!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.leafletMap=e():t.leafletMap=e()}(window,function(){return function(t){var e={};function s(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);class n extends L.Marker{constructor(t,e){super(t,e)}setData(t){this.__data=t}getData(){return this.__data}}class r{constructor(t,e,s,n){this.map=t,this.dataList=e,this.options=Object.assign({},{renderType:"point",renderPointColorType:"single",iconType:"unicode",iconSize:[20,20],iconClass:"iconfont",iconColor:"#3388FF",iconAnchor:[10,10],segmentedColors:["#3388FF"]},s),this.channelFunc=n,this.layer=null,this.focusedMarker=null,this.hoveredMarker=null,this.focusedDisplayMarker=null,this.markers=[],this.markerLayer=null,this.heatLayer=null,this.clusterLayer=null,this.segmentedMin=1/0,this.segmentedStep=1,this.cacheSegmentParams(),this.initMarkers()}draw(t){return this.options=Object.assign(this.options,t),this.redraw()}redraw(){switch(this.layer&&this.map.removeLayer(this.layer),this.options.renderType){case"point":this.layer=this.configMarkerLayer();break;case"cluster":this.layer=this.configClusterLayer();break;case"heat":this.layer=this.configHeatLayer();break;default:throw new Error(`renderType 不支持"${this.options.renderType}"`)}return this.map.addLayer(this.layer),this}setOptions(t,e=!1){this.options=Object.assign(this.options,t),e&&this.redraw()}fitBounds(){this.map.fitBounds(this.getBounds())}getBounds(){return this.markers.length<=0?this.map.getBounds():this.markers.map(t=>[t.getLatLng().lng,t.getLatLng().lat])}destroy(){this.layer&&this.layer.remove()}toggleVisible(t){this.layer||this.draw(),t?this.map.removeLayer(this.layer):this.map.addLayer(this.layer)}configMarkerLayer(){const t=L.canvasIconLayer({}).addTo(this.map);return t.addOnClickListener((t,[{data:e}])=>{this.markerClickHandler(e)}),t.addOnHoverListener((t,[{data:e}])=>{this.hoveredMarker&&this.hoveredMarker.closeTooltip(),this.hoveredMarker=e,this.hoveredMarker.getTooltip()?this.hoveredMarker.openTooltip():this.options.tooltipAttr&&this.hoveredMarker.bindTooltip(""+this.hoveredMarker.getData()[this.options.tooltipAttr])}),t.addMarkers(this.markers),this.map.on("zoomstart",()=>{this.map.removeLayer(this.markerLayer)}),this.map.on("zoomend",()=>{this.map.addLayer(this.markerLayer)}),setTimeout(()=>{this.map.panTo(this.map.getCenter())}),this.markerLayer=t,this.markerLayer}initMarkers(){this.dataList.forEach(t=>{const e=L.geoJSON(t.geometry).getLayers()[0],s=new n([e.getLatLng().lng,e.getLatLng().lat],{icon:this.getMarkerIcon(t)});s.setData(t),this.markers.push(s)})}markerClickHandler(t){this.focusedMarker=t,this.focusedDisplayMarker&&this.focusedDisplayMarker.removeFrom(this.map),this.focusedDisplayMarker=new n(t.getLatLng(),{icon:this.getLargerMarkerIcon(t.getData())}),this.focusedDisplayMarker.addTo(this.map),this.focusedDisplayMarker.bindPopup(this.getPopupContent(t.getData())).openPopup(),this.focusedDisplayMarker.on("popupclose",()=>{this.focusedDisplayMarker.remove()}),this.map.panTo(this.focusedMarker.getLatLng()),this.channelFunc("on-click-marker",t)}configClusterLayer(){return this.clusterLayer=L.markerClusterGroup(),this.clusterLayer.addLayers(this.markers.map(t=>{const e=new n(t.getLatLng(),{icon:this.getMarkerIcon(t.getData())});return e.setData(t.getData()),e.bindTooltip(""+e.getData()[this.options.tooltipAttr]),e.on("click",()=>{this.markerClickHandler(e)}),e})),this.clusterLayer}configHeatLayer(){return this.markers.forEach(t=>{const e=t.getLatLng();let s=t.getData()[this.options.heatOptions.dimensionAttr];"number"!=typeof s&&(s=this.options.heatOptions.max),t.setLatLng(L.latLng(e.lat,e.lng,s))}),this.heatLayer=L.heatLayer(this.markers.map(t=>t.getLatLng()),this.options.heatOptions),this.heatLayer}getLargerMarkerIcon(t){return this._getMarkerIcon(t,!0)}getMarkerIcon(t){return this._getMarkerIcon(t,!1)}_getMarkerIcon(t,e){let s=this.options.iconSize,n=this.options.iconAnchor;s=e?[1.5*s[0],1.5*s[1]]:s,n=e?[1.5*n[0],1.5*n[1]]:n;const r=this.options.iconColor;switch(this.options.iconType){case"image":return L.icon({iconUrl:this.options.iconImageUrl,iconSize:s,iconAnchor:n});case"font_class":case"symbol":case"unicode":return L.divIcon({html:this.getCustomIconHTML(t,{iconSize:s,iconColor:r}),className:e?"large-div-icon-marker":"",iconSize:s,iconAnchor:n});default:throw new Error(`图标类型不支持"${this.options.iconType}"`)}}getCustomIconHTML(t,e){if(this.options.iconRenderer)return e=Object.assign({},this.options,e),this.options.iconRenderer(t,e);switch(this.options.renderPointColorType){case"single":switch(this.options.iconType){case"font_class":return`\n              <i class="${this.options.iconClass}"\n                style="\n                  color: ${e.iconColor};\n                  font-size: ${e.iconSize[0]}px;\n                "\n                />\n            `;case"symbol":return`\n              <svg class="icon-symbol" aria-hidden="true">\n                <use xlink:href="${this.options.iconSymbol}" />\n              </svg>\n            `;case"unicode":return`\n              <i\n                class="${this.options.iconClass}"\n                style="\n                  color: ${e.iconColor};\n                  font-size: ${e.iconSize[0]}px;\n                "\n                >\n                ${this.options.iconUnicode}\n              </i>\n            `}break;case"segmented":switch(this.options.iconType){case"font_class":return`\n              <i\n                class="${this.options.iconClass}"\n                style="\n                  color: ${this.getSegmentedMarkerColor(t)};\n                  font-size: ${e.iconSize[0]}px;\n                "\n                />\n            `;case"symbol":return`\n              <svg class="icon-symbol" aria-hidden="true">\n                <use xlink:href="${this.options.iconSymbol}" />\n              </svg>\n            `;case"unicode":return`\n              <i\n                class="${this.options.iconClass}"\n                style="\n                  color: ${this.getSegmentedMarkerColor(t)};\n                  font-size: ${e.iconSize[0]}px;\n                "\n                >\n                ${this.options.iconUnicode}\n              </i>\n            `}break;default:throw new Error(`renderPointColorType 不支持"${this.options.renderPointColorType}"`)}}cacheSegmentParams(){const t=this.options.segmentedColors.length;let e=-1/0,s=1/0;for(const t of this.dataList){const n=t[this.options.segmentedAttr];e=Math.max(e,n),s=Math.min(s,n)}const n=(e-s+1)/t;this.segmentedMin=s,this.segmentedStep=n}getSegmentedMarkerColor(t){const e=t[this.options.segmentedAttr];return this.options.segmentedColors[(e-this.segmentedMin)/this.segmentedStep]}getPopupContent(t){return this.options.popupAttr?`${this.options.popupAttr}: ${t[this.options.popupAttr]}`:""}}class i extends r{constructor(t,e,s,n){super(t,e,s,n);this.options=Object.assign(this.options,{bufferOptions:{radius:1e3,stroke:!1}},s)}draw(t){return this.options=Object.assign(this.options,t),this.redraw()}redraw(){return this.markerLayer&&this.map.removeLayer(this.markerLayer),this.bufferLayer&&this.map.removeLayer(this.bufferLayer),this.markerLayer=this.configMarkerLayer(),this.bufferLayer=this.configBufferLayer(),this.map.addLayer(this.markerLayer),this.map.addLayer(this.bufferLayer),this}configBufferLayer(){const t=L.layerGroup();return this.markers.forEach(e=>{const s=L.circle(e.getLatLng(),this.options.bufferOptions);t.addLayer(s)}),t}}class o extends L.Polyline{constructor(t,e){super(t,e)}setData(t){this.__data=t}getData(){return this.__data}}class a{constructor(t,e,s,n){this.map=t,this.dataList=e,this.options=s,this.channelFunc=n,this.polylines=[],this.segmentedMin=1/0,this.segmentedStep=1,this.options=Object.assign({},{renderPolylineColorType:"single",segmentedColors:["#3388FF"]},s),this.cacheSegmentParams(),this.initPolylines()}draw(t){return this.options=Object.assign(this.options,t),this.redraw()}redraw(){return this.layer&&this.map.removeLayer(this.layer),this.layer=this.configPolylineLayer(),this.map.addLayer(this.layer),this}fitBounds(){this.map.fitBounds(this.getBounds())}getBounds(){return this.polylines.length<=0?this.map.getBounds():this.polylines.reduce((t,e)=>t.extend(e.getBounds()),this.polylines[0].getBounds())}destroy(){this.layer&&this.layer.remove()}toggleVisible(t){this.layer||this.draw(),t?this.map.removeLayer(this.layer):this.map.addLayer(this.layer)}initPolylines(){this.dataList.forEach(t=>{this.cacheSegmentParams();const e=L.geoJSON(t.geometry).getLayers()[0],s=new o(e.getLatLngs());s.setData(t),this.polylines.push(s)})}configPolylineLayer(){return this.polylineLayer=L.layerGroup(),this.polylines.forEach(t=>{t.on("click",()=>{this.polylineClickHandler(t)});const e=Object.assign({},this.options,{color:this.getSegmentedPolylineColor(t.getData())}),s=new o(t.getLatLngs(),e);this.polylineLayer.addLayer(s)}),this.polylineLayer}polylineClickHandler(t){this.channelFunc("on-click-polyline",t)}cacheSegmentParams(){const t=this.options.segmentedColors.length;let e=-1/0,s=1/0;for(const t of this.dataList){const n=t[this.options.segmentedAttr];e=Math.max(e,n),s=Math.min(s,n)}const n=(e-s+1)/t;this.segmentedMin=s,this.segmentedStep=n}getSegmentedPolylineColor(t){const e=t[this.options.segmentedAttr];return this.options.segmentedColors[(e-this.segmentedMin)/this.segmentedStep]}}class h extends L.Polygon{constructor(t,e){super(t,e)}setData(t){this.__data=t}getData(){return this.__data}}class l{constructor(t,e,s,n){this.map=t,this.dataList=e,this.options=s,this.channelFunc=n,this.polygons=[],this.segmentedMin=1/0,this.segmentedStep=1,this.options=Object.assign({},{renderPolygonColorType:"single",segmentedColors:["#3388FF"]},s),this.cacheSegmentParams(),this.initPolygons()}draw(t){return this.options=Object.assign(this.options,t),this.redraw()}redraw(){return this.layer&&this.map.removeLayer(this.layer),this.layer=this.configPolygonLayer(),this.map.addLayer(this.layer),this}fitBounds(){this.map.fitBounds(this.getBounds())}getBounds(){return this.polygons.length<=0?this.map.getBounds():this.polygons.reduce((t,e)=>t.extend(e.getBounds()),this.polygons[0].getBounds())}destroy(){this.layer&&this.layer.remove()}toggleVisible(t){this.layer||this.draw(),t?this.map.removeLayer(this.layer):this.map.addLayer(this.layer)}initPolygons(){this.dataList.forEach(t=>{this.cacheSegmentParams();const e=L.geoJSON(t.geometry).getLayers()[0],s=new h(e.getLatLngs());s.setData(t),this.polygons.push(s)})}configPolygonLayer(){return this.polygonLayer=L.layerGroup(),this.polygons.forEach(t=>{t.on("click",()=>{this.polygonClickHandler(t)});const e=Object.assign({},this.options,{color:this.getSegmentedPolygonColor(t.getData())}),s=new h(t.getLatLngs(),e);this.polygonLayer.addLayer(s)}),this.polygonLayer}polygonClickHandler(t){this.channelFunc("on-click-polygon",t)}cacheSegmentParams(){const t=this.options.segmentedColors.length;let e=-1/0,s=1/0;for(const t of this.dataList){const n=t[this.options.segmentedAttr];e=Math.max(e,n),s=Math.min(s,n)}const n=(e-s+1)/t;this.segmentedMin=s,this.segmentedStep=n}getSegmentedPolygonColor(t){const e=t[this.options.segmentedAttr];return this.options.segmentedColors[(e-this.segmentedMin)/this.segmentedStep]}}s.d(e,"Marker",function(){return n}),s.d(e,"MarkersLayer",function(){return r}),s.d(e,"MarkersBufferLayer",function(){return i}),s.d(e,"Polyline",function(){return o}),s.d(e,"PolylinesLayer",function(){return a}),s.d(e,"Polygon",function(){return h}),s.d(e,"PolygonsLayer",function(){return l});e.default={Marker:n,MarkersLayer:r,MarkersBufferLayer:i,Polyline:o,PolylinesLayer:a,Polygon:h,PolygonsLayer:l}}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFmbGV0TWFwL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9sZWFmbGV0TWFwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2xlYWZsZXRNYXAvLi9zcmMvbWFya2VyL01hcmtlci50cyIsIndlYnBhY2s6Ly9sZWFmbGV0TWFwLy4vc3JjL21hcmtlci9NYXJrZXJzTGF5ZXIudHMiLCJ3ZWJwYWNrOi8vbGVhZmxldE1hcC8uL3NyYy9tYXJrZXIvTWFya2Vyc0J1ZmZlckxheWVyLnRzIiwid2VicGFjazovL2xlYWZsZXRNYXAvLi9zcmMvcG9seWxpbmUvUG9seWxpbmUudHMiLCJ3ZWJwYWNrOi8vbGVhZmxldE1hcC8uL3NyYy9wb2x5bGluZS9Qb2x5bGluZXNMYXllci50cyIsIndlYnBhY2s6Ly9sZWFmbGV0TWFwLy4vc3JjL3BvbHlnb24vUG9seWdvbi50cyIsIndlYnBhY2s6Ly9sZWFmbGV0TWFwLy4vc3JjL3BvbHlnb24vUG9seWdvbnNMYXllci50cyIsIndlYnBhY2s6Ly9sZWFmbGV0TWFwLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsIndpbmRvdyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJNYXJrZXIiLCJMIiwiW29iamVjdCBPYmplY3RdIiwibGF0bG5nIiwib3B0aW9ucyIsInN1cGVyIiwiZGF0YSIsInRoaXMiLCJfX2RhdGEiLCJNYXJrZXJzTGF5ZXJfTWFya2Vyc0xheWVyIiwibWFwIiwiZGF0YUxpc3QiLCJjaGFubmVsRnVuYyIsImFzc2lnbiIsInJlbmRlclR5cGUiLCJyZW5kZXJQb2ludENvbG9yVHlwZSIsImljb25UeXBlIiwiaWNvblNpemUiLCJpY29uQ2xhc3MiLCJpY29uQ29sb3IiLCJpY29uQW5jaG9yIiwic2VnbWVudGVkQ29sb3JzIiwibGF5ZXIiLCJmb2N1c2VkTWFya2VyIiwiaG92ZXJlZE1hcmtlciIsImZvY3VzZWREaXNwbGF5TWFya2VyIiwibWFya2VycyIsIm1hcmtlckxheWVyIiwiaGVhdExheWVyIiwiY2x1c3RlckxheWVyIiwic2VnbWVudGVkTWluIiwiSW5maW5pdHkiLCJzZWdtZW50ZWRTdGVwIiwiY2FjaGVTZWdtZW50UGFyYW1zIiwiaW5pdE1hcmtlcnMiLCJyZWRyYXciLCJyZW1vdmVMYXllciIsImNvbmZpZ01hcmtlckxheWVyIiwiY29uZmlnQ2x1c3RlckxheWVyIiwiY29uZmlnSGVhdExheWVyIiwiRXJyb3IiLCJhZGRMYXllciIsImZpdEJvdW5kcyIsImdldEJvdW5kcyIsImxlbmd0aCIsIm1hcmtlciIsImdldExhdExuZyIsImxuZyIsImxhdCIsInJlbW92ZSIsInZpc2libGUiLCJkcmF3IiwiY2FudmFzSWNvbkxheWVyIiwiYWRkVG8iLCJhZGRPbkNsaWNrTGlzdGVuZXIiLCJfIiwibWFya2VyQ2xpY2tIYW5kbGVyIiwiYWRkT25Ib3Zlckxpc3RlbmVyIiwiY2xvc2VUb29sdGlwIiwiZ2V0VG9vbHRpcCIsIm9wZW5Ub29sdGlwIiwidG9vbHRpcEF0dHIiLCJiaW5kVG9vbHRpcCIsImdldERhdGEiLCJhZGRNYXJrZXJzIiwib24iLCJzZXRUaW1lb3V0IiwicGFuVG8iLCJnZXRDZW50ZXIiLCJmb3JFYWNoIiwiZ2VvSlNPTiIsImdlb21ldHJ5IiwiZ2V0TGF5ZXJzIiwiaWNvbiIsImdldE1hcmtlckljb24iLCJzZXREYXRhIiwicHVzaCIsInJlbW92ZUZyb20iLCJnZXRMYXJnZXJNYXJrZXJJY29uIiwiYmluZFBvcHVwIiwiZ2V0UG9wdXBDb250ZW50Iiwib3BlblBvcHVwIiwibWFya2VyQ2x1c3Rlckdyb3VwIiwiYWRkTGF5ZXJzIiwibGF0TG5nIiwiYWx0IiwiaGVhdE9wdGlvbnMiLCJkaW1lbnNpb25BdHRyIiwibWF4Iiwic2V0TGF0TG5nIiwiaXQiLCJfZ2V0TWFya2VySWNvbiIsImlzTGFyZ2VyIiwiaWNvblVybCIsImljb25JbWFnZVVybCIsImRpdkljb24iLCJodG1sIiwiZ2V0Q3VzdG9tSWNvbkhUTUwiLCJjbGFzc05hbWUiLCJpY29uUmVuZGVyZXIiLCJpY29uU3ltYm9sIiwiaWNvblVuaWNvZGUiLCJnZXRTZWdtZW50ZWRNYXJrZXJDb2xvciIsInNlZ21lbnRlZExlbmd0aCIsIm1heFZhbCIsIm1pblZhbCIsInZhbCIsInNlZ21lbnRlZEF0dHIiLCJNYXRoIiwibWluIiwic3RlcCIsInBvcHVwQXR0ciIsIk1hcmtlcnNCdWZmZXJMYXllcl9NYXJrZXJzQnVmZmVyTGF5ZXIiLCJidWZmZXJPcHRpb25zIiwicmFkaXVzIiwic3Ryb2tlIiwiYnVmZmVyTGF5ZXIiLCJjb25maWdCdWZmZXJMYXllciIsImdyb3VwTGF5ZXIiLCJsYXllckdyb3VwIiwiY2lyY2xlTGF5ZXIiLCJjaXJjbGUiLCJQb2x5bGluZSIsImxhdGxuZ3MiLCJQb2x5bGluZXNMYXllcl9Qb2x5bGluZXNMYXllciIsInBvbHlsaW5lcyIsInJlbmRlclBvbHlsaW5lQ29sb3JUeXBlIiwiaW5pdFBvbHlsaW5lcyIsImNvbmZpZ1BvbHlsaW5lTGF5ZXIiLCJyZWR1Y2UiLCJwcmV2IiwiY3VyciIsImV4dGVuZCIsInBvbHlsaW5lIiwiZ2V0TGF0TG5ncyIsInBvbHlsaW5lTGF5ZXIiLCJwb2x5bGluZUNsaWNrSGFuZGxlciIsImNvbG9yIiwiZ2V0U2VnbWVudGVkUG9seWxpbmVDb2xvciIsIm5ld1BvbHlsaW5lIiwiUG9seWdvbiIsIlBvbHlnb25zTGF5ZXJfUG9seWdvbnNMYXllciIsInBvbHlnb25zIiwicmVuZGVyUG9seWdvbkNvbG9yVHlwZSIsImluaXRQb2x5Z29ucyIsImNvbmZpZ1BvbHlnb25MYXllciIsInBvbHlnb24iLCJwb2x5Z29uTGF5ZXIiLCJwb2x5Z29uQ2xpY2tIYW5kbGVyIiwiZ2V0U2VnbWVudGVkUG9seWdvbkNvbG9yIiwibmV3UG9seWdvbiIsIl9fd2VicGFja19leHBvcnRzX18iLCJNYXJrZXJzTGF5ZXIiLCJNYXJrZXJzQnVmZmVyTGF5ZXIiLCJQb2x5bGluZXNMYXllciIsIlBvbHlnb25zTGF5ZXIiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsaUJBQUFDLFNBQUEsaUJBQUFDLE9BQ0FBLE9BQUFELFFBQUFELElBQ0EsbUJBQUFHLGVBQUFDLElBQ0FELFVBQUFILEdBQ0EsaUJBQUFDLFFBQ0FBLFFBQUEsV0FBQUQsSUFFQUQsRUFBQSxXQUFBQyxJQVJBLENBU0NLLE9BQUEsV0FDRCxtQkNUQSxJQUFBQyxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBUCxRQUdBLElBQUFDLEVBQUFJLEVBQUFFLElBQ0FDLEVBQUFELEVBQ0FFLEdBQUEsRUFDQVQsWUFVQSxPQU5BVSxFQUFBSCxHQUFBSSxLQUFBVixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBTSxHQUdBTCxFQUFBUSxHQUFBLEVBR0FSLEVBQUFELFFBMERBLE9BckRBTSxFQUFBTSxFQUFBRixFQUdBSixFQUFBTyxFQUFBUixFQUdBQyxFQUFBUSxFQUFBLFNBQUFkLEVBQUFlLEVBQUFDLEdBQ0FWLEVBQUFXLEVBQUFqQixFQUFBZSxJQUNBRyxPQUFBQyxlQUFBbkIsRUFBQWUsR0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNWLEVBQUFnQixFQUFBLFNBQUF0QixHQUNBLG9CQUFBdUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQW5CLEVBQUF1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QUFRdUcsZUFJOUIsT0FIY3BHLEtBQUtILFFBQVFpQixpQkFDeEJxRixFQUFNbkcsS0FBS3VCLGNBQWdCdkIsS0FBS3lCLGdCQzlJdkNsRSxFQUFBUSxFQUFBaUwsRUFBQSwyQkFBQXZKLElBQUFsQyxFQUFBUSxFQUFBaUwsRUFBQSxpQ0FBQTlJLElBQUEzQyxFQUFBUSxFQUFBaUwsRUFBQSx1Q0FBQXZDLElBQUFsSixFQUFBUSxFQUFBaUwsRUFBQSw2QkFBQTdCLElBQUE1SixFQUFBUSxFQUFBaUwsRUFBQSxtQ0FBQTNCLElBQUE5SixFQUFBUSxFQUFBaUwsRUFBQSw0QkFBQVgsSUFBQTlLLEVBQUFRLEVBQUFpTCxFQUFBLGtDQUFBVixJQVFBVSxFQUFBLFNBQ0V2SixTQUNBd0osYUFBQS9JLEVBQ0FnSixtQkFBQXpDLEVBQ0FVLFdBQ0FnQyxlQUFBOUIsRUFDQWdCLFVBQ0FlLGNBQUFkIiwiZmlsZSI6ImxlYWZsZXQtbGF5ZXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wibGVhZmxldE1hcFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJsZWFmbGV0TWFwXCJdID0gZmFjdG9yeSgpO1xufSkod2luZG93LCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgeyBEYXRhTGlzdEl0ZW0gfSBmcm9tICcuLi9kZWZpbml0aW9ucydcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFya2VyIGV4dGVuZHMgTC5NYXJrZXIge1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6dmFyaWFibGUtbmFtZVxuICBwcml2YXRlIF9fZGF0YTogRGF0YUxpc3RJdGVtXG4gIGNvbnN0cnVjdG9yKGxhdGxuZzogTC5MYXRMbmdFeHByZXNzaW9uLCBvcHRpb25zPzogTC5NYXJrZXJPcHRpb25zKSB7XG4gICAgc3VwZXIobGF0bG5nLCBvcHRpb25zKVxuICB9XG4gIHB1YmxpYyBzZXREYXRhKGRhdGE6IERhdGFMaXN0SXRlbSkge1xuICAgIHRoaXMuX19kYXRhID0gZGF0YVxuICB9XG4gIHB1YmxpYyBnZXREYXRhKCkge1xuICAgIHJldHVybiB0aGlzLl9fZGF0YVxuICB9XG59XG4iLCJpbXBvcnQgeyBEYXRhTGlzdEl0ZW0sIENoYW5uZWxGdW5jIH0gZnJvbSAnLi4vZGVmaW5pdGlvbnMnXG5pbXBvcnQgTWFya2VyIGZyb20gJy4vTWFya2VyJ1xuXG4vKiog5riy5p+T5qC35byPIOaVo+eCuXzng63lipvlm74gKi9cbnR5cGUgTWFya2Vyc0xheWVyUmVuZGVyVHlwZSA9ICdwb2ludCcgfCAnaGVhdCcgfCAnY2x1c3RlcidcblxuLyoqIOa4suafk+minOiJsuagt+W8jyDljZXoibJ85YiG5q61ICovXG50eXBlIE1hcmtlcnNMYXllclJlbmRlclBvaW50Q29sb3JUeXBlID0gJ3NpbmdsZScgfCAnc2VnbWVudGVkJ1xuXG4vKiog5pWj54K55Zu+5qCH57G75Z6LIGljb25mb250fHN2Z3xpbWFnZSAqL1xudHlwZSBNYXJrZXJzTGF5ZXJJY29uVHlwZSA9ICdmb250X2NsYXNzJyB8ICd1bmljb2RlJyB8ICdzeW1ib2wnIHwgJ2ltYWdlJ1xuXG5pbnRlcmZhY2UgSWNvblJlbmRlckZ1bmNPcHRpb24ge1xuICBpY29uU2l6ZTogW251bWJlciwgbnVtYmVyXVxuICBpY29uQ29sb3I6IHN0cmluZ1xufVxudHlwZSBJY29uUmVuZGVyRnVuYyA9IChcbiAgZGF0YTogRGF0YUxpc3RJdGVtLFxuICBwYXJhbXM6IEljb25SZW5kZXJGdW5jT3B0aW9uXG4pID0+IHN0cmluZ1xuXG5leHBvcnQgaW50ZXJmYWNlIE1hcmtlcnNMYXllck9wdGlvbnMge1xuICByZW5kZXJUeXBlOiBNYXJrZXJzTGF5ZXJSZW5kZXJUeXBlXG4gIHJlbmRlclBvaW50Q29sb3JUeXBlOiBNYXJrZXJzTGF5ZXJSZW5kZXJQb2ludENvbG9yVHlwZVxuICBpY29uVHlwZTogTWFya2Vyc0xheWVySWNvblR5cGVcblxuICBpY29uSW1hZ2VVcmw/OiBzdHJpbmdcbiAgaWNvblNpemU/OiBbbnVtYmVyLCBudW1iZXJdXG4gIGljb25DbGFzcz86IHN0cmluZ1xuICBpY29uVW5pY29kZT86IHN0cmluZ1xuICBpY29uU3ltYm9sPzogc3RyaW5nXG4gIGljb25Db2xvcj86IHN0cmluZ1xuICBpY29uQW5jaG9yPzogW251bWJlciwgbnVtYmVyXVxuICBpY29uUmVuZGVyZXI/OiBJY29uUmVuZGVyRnVuY1xuXG4gIC8qKiBwb3B1cCDlsZXnpLrlrZfmrrUgKi9cbiAgcG9wdXBBdHRyPzogc3RyaW5nXG4gIC8qKiB0b29sdGlwIOWxleekuuWtl+autSAqL1xuICB0b29sdGlwQXR0cj86IHN0cmluZ1xuXG4gIG9wYWNpdHk/OiBudW1iZXJcblxuICAvKiog5YiG5q615riy5p+T57uf6K6h5a2X5q61ICovXG4gIHNlZ21lbnRlZEF0dHI/OiBzdHJpbmdcbiAgc2VnbWVudGVkQ29sb3JzPzogc3RyaW5nW11cblxuICBoZWF0T3B0aW9ucz86IE1hcmtlcnNIZWF0TGF5ZXJPcHRpb25zXG4gIGNsdXN0ZXJPcHRpb25zPzogTC5NYXJrZXJzQ2x1c3Rlck9wdGlvbnNcbn1cblxuLyoqIOi9rOWMluS4uueDreWKm+WbvueahCBvcHRpb25zICovXG5pbnRlcmZhY2UgTWFya2Vyc0hlYXRMYXllck9wdGlvbnMgZXh0ZW5kcyBMLkhlYXRMYXllck9wdGlvbnMge1xuICBkaW1lbnNpb25BdHRyOiBzdHJpbmdcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFya2Vyc0xheWVyIHtcbiAgcHVibGljIG1hcDogTC5NYXBcbiAgcHVibGljIGRhdGFMaXN0OiBEYXRhTGlzdEl0ZW1bXVxuICBwdWJsaWMgb3B0aW9uczogTWFya2Vyc0xheWVyT3B0aW9uc1xuICBwdWJsaWMgY2hhbm5lbEZ1bmM6IENoYW5uZWxGdW5jXG5cbiAgcHJvdGVjdGVkIG1hcmtlcnM6IE1hcmtlcltdXG5cbiAgcHJvdGVjdGVkIGZvY3VzZWRNYXJrZXI6IE1hcmtlclxuICBwcm90ZWN0ZWQgaG92ZXJlZE1hcmtlcjogTWFya2VyXG4gIC8qKiDpnIDopoHlsZXnpLrnmoTmlL7lpKfnmoTlm77moIcgKi9cbiAgcHJvdGVjdGVkIGZvY3VzZWREaXNwbGF5TWFya2VyOiBNYXJrZXJcbiAgcHJvdGVjdGVkIG1hcmtlckxheWVyOiBMLkNhbnZhc0ljb25MYXllclxuXG4gIHByaXZhdGUgbGF5ZXI6XG4gICAgfCBMLkNhbnZhc0ljb25MYXllclxuICAgIHwgTC5IZWF0TGF5ZXJcbiAgICB8IEwuTWFya2Vyc0NsdXN0ZXJcbiAgICB8IEwuTGF5ZXJHcm91cFxuICBwcml2YXRlIGhlYXRMYXllcjogTC5IZWF0TGF5ZXJcbiAgcHJpdmF0ZSBjbHVzdGVyTGF5ZXI6IEwuTWFya2Vyc0NsdXN0ZXJcblxuICBwcml2YXRlIHNlZ21lbnRlZE1pbjogbnVtYmVyXG4gIHByaXZhdGUgc2VnbWVudGVkU3RlcDogbnVtYmVyXG4gIGNvbnN0cnVjdG9yKFxuICAgIG1hcDogTC5NYXAsXG4gICAgZGF0YUxpc3Q6IERhdGFMaXN0SXRlbVtdLFxuICAgIG9wdGlvbnM6IE1hcmtlcnNMYXllck9wdGlvbnMsXG4gICAgY2hhbm5lbEZ1bmM6IENoYW5uZWxGdW5jXG4gICkge1xuICAgIGNvbnN0IGRlZmF1bHRPcHRpb25zOiBNYXJrZXJzTGF5ZXJPcHRpb25zID0ge1xuICAgICAgcmVuZGVyVHlwZTogJ3BvaW50JyxcbiAgICAgIHJlbmRlclBvaW50Q29sb3JUeXBlOiAnc2luZ2xlJyxcbiAgICAgIGljb25UeXBlOiAndW5pY29kZScsXG4gICAgICBpY29uU2l6ZTogWzIwLCAyMF0sXG4gICAgICBpY29uQ2xhc3M6ICdpY29uZm9udCcsXG4gICAgICBpY29uQ29sb3I6ICcjMzM4OEZGJyxcbiAgICAgIGljb25BbmNob3I6IFsxMCwgMTBdLFxuICAgICAgc2VnbWVudGVkQ29sb3JzOiBbJyMzMzg4RkYnXSxcbiAgICB9XG4gICAgdGhpcy5tYXAgPSBtYXBcbiAgICB0aGlzLmRhdGFMaXN0ID0gZGF0YUxpc3RcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucywgb3B0aW9ucylcbiAgICB0aGlzLmNoYW5uZWxGdW5jID0gY2hhbm5lbEZ1bmNcblxuICAgIHRoaXMubGF5ZXIgPSBudWxsXG4gICAgdGhpcy5mb2N1c2VkTWFya2VyID0gbnVsbFxuICAgIHRoaXMuaG92ZXJlZE1hcmtlciA9IG51bGxcbiAgICB0aGlzLmZvY3VzZWREaXNwbGF5TWFya2VyID0gbnVsbFxuICAgIHRoaXMubWFya2VycyA9IFtdXG4gICAgdGhpcy5tYXJrZXJMYXllciA9IG51bGxcbiAgICB0aGlzLmhlYXRMYXllciA9IG51bGxcbiAgICB0aGlzLmNsdXN0ZXJMYXllciA9IG51bGxcblxuICAgIHRoaXMuc2VnbWVudGVkTWluID0gSW5maW5pdHlcbiAgICB0aGlzLnNlZ21lbnRlZFN0ZXAgPSAxXG5cbiAgICAvLyDnvJPlrZggc2VnbWVudCDnm7jlhbPmlbDmja5cbiAgICB0aGlzLmNhY2hlU2VnbWVudFBhcmFtcygpXG4gICAgdGhpcy5pbml0TWFya2VycygpXG4gIH1cbiAgcHVibGljIGRyYXcob3B0aW9ucz86IE1hcmtlcnNMYXllck9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucylcbiAgICByZXR1cm4gdGhpcy5yZWRyYXcoKVxuICB9XG4gIHB1YmxpYyByZWRyYXcoKSB7XG4gICAgaWYgKHRoaXMubGF5ZXIpIHtcbiAgICAgIHRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMubGF5ZXIpXG4gICAgfVxuICAgIHN3aXRjaCAodGhpcy5vcHRpb25zLnJlbmRlclR5cGUpIHtcbiAgICAgIGNhc2UgJ3BvaW50Jzoge1xuICAgICAgICB0aGlzLmxheWVyID0gdGhpcy5jb25maWdNYXJrZXJMYXllcigpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdjbHVzdGVyJzoge1xuICAgICAgICB0aGlzLmxheWVyID0gdGhpcy5jb25maWdDbHVzdGVyTGF5ZXIoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnaGVhdCc6IHtcbiAgICAgICAgdGhpcy5sYXllciA9IHRoaXMuY29uZmlnSGVhdExheWVyKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGByZW5kZXJUeXBlIOS4jeaUr+aMgVwiJHt0aGlzLm9wdGlvbnMucmVuZGVyVHlwZX1cImApXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMubWFwLmFkZExheWVyKHRoaXMubGF5ZXIpXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuICBwdWJsaWMgc2V0T3B0aW9ucyhvcHRpb25zOiBNYXJrZXJzTGF5ZXJPcHRpb25zLCByZWRyYXcgPSBmYWxzZSkge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKVxuICAgIGlmIChyZWRyYXcpIHtcbiAgICAgIHRoaXMucmVkcmF3KClcbiAgICB9XG4gIH1cbiAgcHVibGljIGZpdEJvdW5kcygpIHtcbiAgICB0aGlzLm1hcC5maXRCb3VuZHModGhpcy5nZXRCb3VuZHMoKSlcbiAgfVxuICBwdWJsaWMgZ2V0Qm91bmRzKCk6IEwuTGF0TG5nQm91bmRzRXhwcmVzc2lvbiB7XG4gICAgaWYgKHRoaXMubWFya2Vycy5sZW5ndGggPD0gMCkge1xuICAgICAgcmV0dXJuIHRoaXMubWFwLmdldEJvdW5kcygpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLm1hcmtlcnMubWFwKFxuICAgICAgKG1hcmtlcikgPT5cbiAgICAgICAgW21hcmtlci5nZXRMYXRMbmcoKS5sbmcsIG1hcmtlci5nZXRMYXRMbmcoKS5sYXRdIGFzIFtudW1iZXIsIG51bWJlcl1cbiAgICApXG4gIH1cbiAgcHVibGljIGRlc3Ryb3koKSB7XG4gICAgLy8gVE9ETzog5bCG5LqL5Lu256e76ZmkXG4gICAgaWYgKHRoaXMubGF5ZXIpIHtcbiAgICAgIHRoaXMubGF5ZXIucmVtb3ZlKClcbiAgICB9XG4gIH1cbiAgcHVibGljIHRvZ2dsZVZpc2libGUodmlzaWJsZTogYm9vbGVhbikge1xuICAgIGlmICghdGhpcy5sYXllcikge1xuICAgICAgdGhpcy5kcmF3KClcbiAgICB9XG4gICAgaWYgKHZpc2libGUpIHtcbiAgICAgIHRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMubGF5ZXIpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubWFwLmFkZExheWVyKHRoaXMubGF5ZXIpXG4gICAgfVxuICB9XG4gIC8qKiDmuLLmn5PkuLrmlaPngrnlm74gKi9cbiAgcHJvdGVjdGVkIGNvbmZpZ01hcmtlckxheWVyKCkge1xuICAgIGNvbnN0IGNhbnZhc0ljb25MYXllciA9IEwuY2FudmFzSWNvbkxheWVyKHt9KS5hZGRUbyh0aGlzLm1hcClcbiAgICAvLyDmt7vliqDngrnlh7vkuovku7ZcbiAgICBjYW52YXNJY29uTGF5ZXIuYWRkT25DbGlja0xpc3RlbmVyKChfLCBbeyBkYXRhOiBtYXJrZXIgfV0pID0+IHtcbiAgICAgIHRoaXMubWFya2VyQ2xpY2tIYW5kbGVyKG1hcmtlciBhcyBNYXJrZXIpXG4gICAgfSlcbiAgICAvLyDmt7vliqAgaG92ZXIg5LqL5Lu2XG4gICAgY2FudmFzSWNvbkxheWVyLmFkZE9uSG92ZXJMaXN0ZW5lcigoXywgW3sgZGF0YTogbWFya2VyIH1dKSA9PiB7XG4gICAgICAvLyDkuYvliY3mnIkgaG92ZXIg55qE5YWz6ZetIHRvb2x0aXBcbiAgICAgIGlmICh0aGlzLmhvdmVyZWRNYXJrZXIpIHtcbiAgICAgICAgdGhpcy5ob3ZlcmVkTWFya2VyLmNsb3NlVG9vbHRpcCgpXG4gICAgICB9XG4gICAgICB0aGlzLmhvdmVyZWRNYXJrZXIgPSBtYXJrZXIgYXMgTWFya2VyXG5cbiAgICAgIGlmICh0aGlzLmhvdmVyZWRNYXJrZXIuZ2V0VG9vbHRpcCgpKSB7XG4gICAgICAgIC8vIOWmguaenOW3sue7j+iuvue9riB0b29sdGlwIOebtOaOpeWxleekuiB0b29sdGlwXG4gICAgICAgIHRoaXMuaG92ZXJlZE1hcmtlci5vcGVuVG9vbHRpcCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyDlkKbliJnnu5HlrpogdG9vbHRpcCDlubblsZXnpLpcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50b29sdGlwQXR0cikge1xuICAgICAgICAgIHRoaXMuaG92ZXJlZE1hcmtlci5iaW5kVG9vbHRpcChcbiAgICAgICAgICAgICcnICsgdGhpcy5ob3ZlcmVkTWFya2VyLmdldERhdGEoKVt0aGlzLm9wdGlvbnMudG9vbHRpcEF0dHJdXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICBjYW52YXNJY29uTGF5ZXIuYWRkTWFya2Vycyh0aGlzLm1hcmtlcnMpXG5cbiAgICB0aGlzLm1hcC5vbignem9vbXN0YXJ0JywgKCkgPT4ge1xuICAgICAgdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcy5tYXJrZXJMYXllcilcbiAgICB9KVxuICAgIHRoaXMubWFwLm9uKCd6b29tZW5kJywgKCkgPT4ge1xuICAgICAgdGhpcy5tYXAuYWRkTGF5ZXIodGhpcy5tYXJrZXJMYXllcilcbiAgICB9KVxuXG4gICAgLy8g6Kej5Yaz5Yid5qyh5riy5p+T5LiN5Ye65Zu+5qCH6Zeu6aKYXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLm1hcC5wYW5Ubyh0aGlzLm1hcC5nZXRDZW50ZXIoKSlcbiAgICB9KVxuXG4gICAgdGhpcy5tYXJrZXJMYXllciA9IGNhbnZhc0ljb25MYXllclxuICAgIHJldHVybiB0aGlzLm1hcmtlckxheWVyXG4gIH1cbiAgcHJpdmF0ZSBpbml0TWFya2VycygpIHtcbiAgICB0aGlzLmRhdGFMaXN0LmZvckVhY2goKGRhdGEpID0+IHtcbiAgICAgIGNvbnN0IGxheWVyID0gTC5nZW9KU09OKGRhdGEuZ2VvbWV0cnkpLmdldExheWVycygpWzBdXG5cbiAgICAgIGNvbnN0IG1hcmtlciA9IG5ldyBNYXJrZXIoXG4gICAgICAgIFtcbiAgICAgICAgICAobGF5ZXIgYXMgTC5NYXJrZXIpLmdldExhdExuZygpLmxuZyxcbiAgICAgICAgICAobGF5ZXIgYXMgTC5NYXJrZXIpLmdldExhdExuZygpLmxhdCxcbiAgICAgICAgXSxcbiAgICAgICAge1xuICAgICAgICAgIGljb246IHRoaXMuZ2V0TWFya2VySWNvbihkYXRhKSxcbiAgICAgICAgfVxuICAgICAgKVxuXG4gICAgICAvLyDlsIbnm7jlhbPlgLznu5HlrprliLAgbWFya2Vy5LiKXG4gICAgICBtYXJrZXIuc2V0RGF0YShkYXRhKVxuXG4gICAgICB0aGlzLm1hcmtlcnMucHVzaChtYXJrZXIpXG4gICAgfSlcbiAgfVxuICAvLyDlpITnkIYgbWFya2VyIOeCueWHu+S6i+S7tlxuICBwcml2YXRlIG1hcmtlckNsaWNrSGFuZGxlcihtYXJrZXI6IE1hcmtlcikge1xuICAgIHRoaXMuZm9jdXNlZE1hcmtlciA9IG1hcmtlclxuICAgIC8vIOWIoOmZpOWJjeS4gOS4quaUvuWkp+Wbvuagh1xuICAgIGlmICh0aGlzLmZvY3VzZWREaXNwbGF5TWFya2VyKSB7XG4gICAgICB0aGlzLmZvY3VzZWREaXNwbGF5TWFya2VyLnJlbW92ZUZyb20odGhpcy5tYXApXG4gICAgfVxuICAgIC8vIOeUn+aIkOW9k+WJjeaUvuWkp+Wbvuagh1xuICAgIHRoaXMuZm9jdXNlZERpc3BsYXlNYXJrZXIgPSBuZXcgTWFya2VyKG1hcmtlci5nZXRMYXRMbmcoKSwge1xuICAgICAgaWNvbjogdGhpcy5nZXRMYXJnZXJNYXJrZXJJY29uKG1hcmtlci5nZXREYXRhKCkpLFxuICAgIH0pXG4gICAgdGhpcy5mb2N1c2VkRGlzcGxheU1hcmtlci5hZGRUbyh0aGlzLm1hcClcblxuICAgIHRoaXMuZm9jdXNlZERpc3BsYXlNYXJrZXJcbiAgICAgIC5iaW5kUG9wdXAodGhpcy5nZXRQb3B1cENvbnRlbnQobWFya2VyLmdldERhdGEoKSkpXG4gICAgICAub3BlblBvcHVwKClcbiAgICB0aGlzLmZvY3VzZWREaXNwbGF5TWFya2VyLm9uKCdwb3B1cGNsb3NlJywgKCkgPT4ge1xuICAgICAgdGhpcy5mb2N1c2VkRGlzcGxheU1hcmtlci5yZW1vdmUoKVxuICAgIH0pXG5cbiAgICB0aGlzLm1hcC5wYW5Ubyh0aGlzLmZvY3VzZWRNYXJrZXIuZ2V0TGF0TG5nKCkpXG4gICAgdGhpcy5jaGFubmVsRnVuYygnb24tY2xpY2stbWFya2VyJywgbWFya2VyKVxuICB9XG4gIHByaXZhdGUgY29uZmlnQ2x1c3RlckxheWVyKCkge1xuICAgIC8vIOWxleekuuiBmuWQiOWbvuWxglxuICAgIHRoaXMuY2x1c3RlckxheWVyID0gTC5tYXJrZXJDbHVzdGVyR3JvdXAoKVxuICAgIHRoaXMuY2x1c3RlckxheWVyLmFkZExheWVycyhcbiAgICAgIHRoaXMubWFya2Vycy5tYXAoKG0pID0+IHtcbiAgICAgICAgY29uc3QgbWFya2VyID0gbmV3IE1hcmtlcihtLmdldExhdExuZygpLCB7XG4gICAgICAgICAgaWNvbjogdGhpcy5nZXRNYXJrZXJJY29uKG0uZ2V0RGF0YSgpKSxcbiAgICAgICAgfSlcbiAgICAgICAgbWFya2VyLnNldERhdGEobS5nZXREYXRhKCkpXG4gICAgICAgIG1hcmtlci5iaW5kVG9vbHRpcCgnJyArIG1hcmtlci5nZXREYXRhKClbdGhpcy5vcHRpb25zLnRvb2x0aXBBdHRyXSlcbiAgICAgICAgbWFya2VyLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICB0aGlzLm1hcmtlckNsaWNrSGFuZGxlcihtYXJrZXIpXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBtYXJrZXJcbiAgICAgIH0pXG4gICAgKVxuICAgIHJldHVybiB0aGlzLmNsdXN0ZXJMYXllclxuICB9XG5cbiAgLyoqIOa4suafk+S4uueDreWKm+WbviAqL1xuICBwcml2YXRlIGNvbmZpZ0hlYXRMYXllcigpIHtcbiAgICB0aGlzLm1hcmtlcnMuZm9yRWFjaCgobWFya2VyKSA9PiB7XG4gICAgICBjb25zdCBsYXRMbmcgPSBtYXJrZXIuZ2V0TGF0TG5nKClcbiAgICAgIGxldCBhbHQgPSBtYXJrZXIuZ2V0RGF0YSgpW3RoaXMub3B0aW9ucy5oZWF0T3B0aW9ucy5kaW1lbnNpb25BdHRyXVxuICAgICAgaWYgKHR5cGVvZiBhbHQgIT09ICdudW1iZXInKSB7XG4gICAgICAgIGFsdCA9IHRoaXMub3B0aW9ucy5oZWF0T3B0aW9ucy5tYXhcbiAgICAgIH1cbiAgICAgIG1hcmtlci5zZXRMYXRMbmcoTC5sYXRMbmcobGF0TG5nLmxhdCwgbGF0TG5nLmxuZywgYWx0KSlcbiAgICB9KVxuICAgIHRoaXMuaGVhdExheWVyID0gTC5oZWF0TGF5ZXIoXG4gICAgICB0aGlzLm1hcmtlcnMubWFwKChpdCkgPT4gaXQuZ2V0TGF0TG5nKCkpLFxuICAgICAgdGhpcy5vcHRpb25zLmhlYXRPcHRpb25zXG4gICAgKVxuICAgIHJldHVybiB0aGlzLmhlYXRMYXllclxuICB9XG5cbiAgcHJpdmF0ZSBnZXRMYXJnZXJNYXJrZXJJY29uKGRhdGE6IERhdGFMaXN0SXRlbSkge1xuICAgIHJldHVybiB0aGlzLl9nZXRNYXJrZXJJY29uKGRhdGEsIHRydWUpXG4gIH1cblxuICBwcml2YXRlIGdldE1hcmtlckljb24oZGF0YTogRGF0YUxpc3RJdGVtKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldE1hcmtlckljb24oZGF0YSwgZmFsc2UpXG4gIH1cblxuICAvKiog6I635Y+W5b2T5YmNIG1hcmtlciDpnIDopoHlsZXnpLrnmoQgaWNvbiAqL1xuICBwcml2YXRlIF9nZXRNYXJrZXJJY29uKFxuICAgIGRhdGE6IERhdGFMaXN0SXRlbSxcbiAgICBpc0xhcmdlcjogYm9vbGVhblxuICApOiBMLkljb24gfCBMLkRpdkljb24ge1xuICAgIGxldCBpY29uU2l6ZSA9IHRoaXMub3B0aW9ucy5pY29uU2l6ZVxuICAgIGxldCBpY29uQW5jaG9yID0gdGhpcy5vcHRpb25zLmljb25BbmNob3JcbiAgICBpY29uU2l6ZSA9IGlzTGFyZ2VyID8gW2ljb25TaXplWzBdICogMS41LCBpY29uU2l6ZVsxXSAqIDEuNV0gOiBpY29uU2l6ZVxuICAgIGljb25BbmNob3IgPSBpc0xhcmdlclxuICAgICAgPyBbaWNvbkFuY2hvclswXSAqIDEuNSwgaWNvbkFuY2hvclsxXSAqIDEuNV1cbiAgICAgIDogaWNvbkFuY2hvclxuXG4gICAgY29uc3QgaWNvbkNvbG9yID0gdGhpcy5vcHRpb25zLmljb25Db2xvclxuXG4gICAgc3dpdGNoICh0aGlzLm9wdGlvbnMuaWNvblR5cGUpIHtcbiAgICAgIGNhc2UgJ2ltYWdlJzoge1xuICAgICAgICByZXR1cm4gTC5pY29uKHtcbiAgICAgICAgICBpY29uVXJsOiB0aGlzLm9wdGlvbnMuaWNvbkltYWdlVXJsLFxuICAgICAgICAgIGljb25TaXplLFxuICAgICAgICAgIGljb25BbmNob3IsXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBjYXNlICdmb250X2NsYXNzJzpcbiAgICAgIGNhc2UgJ3N5bWJvbCc6XG4gICAgICBjYXNlICd1bmljb2RlJzoge1xuICAgICAgICByZXR1cm4gTC5kaXZJY29uKHtcbiAgICAgICAgICBodG1sOiB0aGlzLmdldEN1c3RvbUljb25IVE1MKGRhdGEsIHtcbiAgICAgICAgICAgIGljb25TaXplLFxuICAgICAgICAgICAgaWNvbkNvbG9yLFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGNsYXNzTmFtZTogaXNMYXJnZXIgPyAnbGFyZ2UtZGl2LWljb24tbWFya2VyJyA6ICcnLFxuICAgICAgICAgIGljb25TaXplLFxuICAgICAgICAgIGljb25BbmNob3IsXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihg5Zu+5qCH57G75Z6L5LiN5pSv5oyBXCIke3RoaXMub3B0aW9ucy5pY29uVHlwZX1cImApXG4gICAgICB9XG4gICAgfVxuICB9XG4gIHByaXZhdGUgZ2V0Q3VzdG9tSWNvbkhUTUwoXG4gICAgZGF0YTogRGF0YUxpc3RJdGVtLFxuICAgIG9wdGlvbnM/OiBJY29uUmVuZGVyRnVuY09wdGlvblxuICApOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLm9wdGlvbnMuaWNvblJlbmRlcmVyKSB7XG4gICAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcHRpb25zLCBvcHRpb25zKVxuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5pY29uUmVuZGVyZXIoZGF0YSwgb3B0aW9ucylcbiAgICB9XG4gICAgc3dpdGNoICh0aGlzLm9wdGlvbnMucmVuZGVyUG9pbnRDb2xvclR5cGUpIHtcbiAgICAgIGNhc2UgJ3NpbmdsZSc6IHtcbiAgICAgICAgc3dpdGNoICh0aGlzLm9wdGlvbnMuaWNvblR5cGUpIHtcbiAgICAgICAgICAvLyDkvb/nlKggY2xhc3NcbiAgICAgICAgICBjYXNlICdmb250X2NsYXNzJzoge1xuICAgICAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICAgICAgPGkgY2xhc3M9XCIke3RoaXMub3B0aW9ucy5pY29uQ2xhc3N9XCJcbiAgICAgICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICAgICAgY29sb3I6ICR7b3B0aW9ucy5pY29uQ29sb3J9O1xuICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAke29wdGlvbnMuaWNvblNpemVbMF19cHg7XG4gICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgYFxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyDkvb/nlKggc3ZnXG4gICAgICAgICAgY2FzZSAnc3ltYm9sJzoge1xuICAgICAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICAgICAgPHN2ZyBjbGFzcz1cImljb24tc3ltYm9sXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+XG4gICAgICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPVwiJHt0aGlzLm9wdGlvbnMuaWNvblN5bWJvbH1cIiAvPlxuICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8g5L2/55SoIHVuaWNvZGVcbiAgICAgICAgICBjYXNlICd1bmljb2RlJzoge1xuICAgICAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICAgICAgPGlcbiAgICAgICAgICAgICAgICBjbGFzcz1cIiR7dGhpcy5vcHRpb25zLmljb25DbGFzc31cIlxuICAgICAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgICBjb2xvcjogJHtvcHRpb25zLmljb25Db2xvcn07XG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6ICR7b3B0aW9ucy5pY29uU2l6ZVswXX1weDtcbiAgICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAke3RoaXMub3B0aW9ucy5pY29uVW5pY29kZX1cbiAgICAgICAgICAgICAgPC9pPlxuICAgICAgICAgICAgYFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnc2VnbWVudGVkJzoge1xuICAgICAgICBzd2l0Y2ggKHRoaXMub3B0aW9ucy5pY29uVHlwZSkge1xuICAgICAgICAgIC8vIOS9v+eUqCBjbGFzc1xuICAgICAgICAgIGNhc2UgJ2ZvbnRfY2xhc3MnOiB7XG4gICAgICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgICA8aVxuICAgICAgICAgICAgICAgIGNsYXNzPVwiJHt0aGlzLm9wdGlvbnMuaWNvbkNsYXNzfVwiXG4gICAgICAgICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiAke3RoaXMuZ2V0U2VnbWVudGVkTWFya2VyQ29sb3IoZGF0YSl9O1xuICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAke29wdGlvbnMuaWNvblNpemVbMF19cHg7XG4gICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgYFxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyDkvb/nlKggc3ZnXG4gICAgICAgICAgY2FzZSAnc3ltYm9sJzoge1xuICAgICAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICAgICAgPHN2ZyBjbGFzcz1cImljb24tc3ltYm9sXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+XG4gICAgICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPVwiJHt0aGlzLm9wdGlvbnMuaWNvblN5bWJvbH1cIiAvPlxuICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8g5L2/55SoIHVuaWNvZGVcbiAgICAgICAgICBjYXNlICd1bmljb2RlJzoge1xuICAgICAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICAgICAgPGlcbiAgICAgICAgICAgICAgICBjbGFzcz1cIiR7dGhpcy5vcHRpb25zLmljb25DbGFzc31cIlxuICAgICAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgICBjb2xvcjogJHt0aGlzLmdldFNlZ21lbnRlZE1hcmtlckNvbG9yKGRhdGEpfTtcbiAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogJHtvcHRpb25zLmljb25TaXplWzBdfXB4O1xuICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICR7dGhpcy5vcHRpb25zLmljb25Vbmljb2RlfVxuICAgICAgICAgICAgICA8L2k+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgcmVuZGVyUG9pbnRDb2xvclR5cGUg5LiN5pSv5oyBXCIke3RoaXMub3B0aW9ucy5yZW5kZXJQb2ludENvbG9yVHlwZX1cImBcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBwcml2YXRlIGNhY2hlU2VnbWVudFBhcmFtcygpIHtcbiAgICBjb25zdCBzZWdtZW50ZWRMZW5ndGggPSB0aGlzLm9wdGlvbnMuc2VnbWVudGVkQ29sb3JzLmxlbmd0aFxuICAgIGxldCBtYXhWYWwgPSAtSW5maW5pdHlcbiAgICBsZXQgbWluVmFsID0gSW5maW5pdHlcbiAgICBmb3IgKGNvbnN0IGRhdGEgb2YgdGhpcy5kYXRhTGlzdCkge1xuICAgICAgY29uc3QgdmFsID0gZGF0YVt0aGlzLm9wdGlvbnMuc2VnbWVudGVkQXR0cl1cbiAgICAgIG1heFZhbCA9IE1hdGgubWF4KG1heFZhbCwgdmFsKVxuICAgICAgbWluVmFsID0gTWF0aC5taW4obWluVmFsLCB2YWwpXG4gICAgfVxuICAgIGNvbnN0IHN0ZXAgPSAobWF4VmFsIC0gbWluVmFsICsgMSkgLyBzZWdtZW50ZWRMZW5ndGhcbiAgICB0aGlzLnNlZ21lbnRlZE1pbiA9IG1pblZhbFxuICAgIHRoaXMuc2VnbWVudGVkU3RlcCA9IHN0ZXBcbiAgfVxuICBwcml2YXRlIGdldFNlZ21lbnRlZE1hcmtlckNvbG9yKGRhdGE6IERhdGFMaXN0SXRlbSk6IHN0cmluZyB7XG4gICAgY29uc3QgdmFsID0gZGF0YVt0aGlzLm9wdGlvbnMuc2VnbWVudGVkQXR0cl1cbiAgICBjb25zdCBjb2xvciA9IHRoaXMub3B0aW9ucy5zZWdtZW50ZWRDb2xvcnNbXG4gICAgICAodmFsIC0gdGhpcy5zZWdtZW50ZWRNaW4pIC8gdGhpcy5zZWdtZW50ZWRTdGVwXG4gICAgXVxuICAgIHJldHVybiBjb2xvclxuICB9XG4gIHByaXZhdGUgZ2V0UG9wdXBDb250ZW50KGRhdGE6IERhdGFMaXN0SXRlbSkge1xuICAgIGlmICghdGhpcy5vcHRpb25zLnBvcHVwQXR0cikge1xuICAgICAgcmV0dXJuICcnXG4gICAgfVxuICAgIHJldHVybiBgJHt0aGlzLm9wdGlvbnMucG9wdXBBdHRyfTogJHtkYXRhW3RoaXMub3B0aW9ucy5wb3B1cEF0dHJdfWBcbiAgfVxufVxuIiwiaW1wb3J0IHsgRGF0YUxpc3RJdGVtLCBDaGFubmVsRnVuYyB9IGZyb20gJy4uL2RlZmluaXRpb25zJ1xuaW1wb3J0IE1hcmtlcnNMYXllciwgeyBNYXJrZXJzTGF5ZXJPcHRpb25zIH0gZnJvbSAnLi9NYXJrZXJzTGF5ZXInXG5pbnRlcmZhY2UgTWFya2Vyc0J1ZmZlckxheWVyT3B0aW9ucyBleHRlbmRzIE1hcmtlcnNMYXllck9wdGlvbnMge1xuICBidWZmZXJPcHRpb25zOiBMLkNpcmNsZU1hcmtlck9wdGlvbnNcbn1cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hcmtlcnNCdWZmZXJMYXllciBleHRlbmRzIE1hcmtlcnNMYXllciB7XG4gIHB1YmxpYyBvcHRpb25zOiBNYXJrZXJzQnVmZmVyTGF5ZXJPcHRpb25zXG4gIHByaXZhdGUgYnVmZmVyTGF5ZXI6IEwuTGF5ZXJHcm91cFxuICBjb25zdHJ1Y3RvcihcbiAgICBtYXA6IEwuTWFwLFxuICAgIGRhdGFMaXN0OiBEYXRhTGlzdEl0ZW1bXSxcbiAgICBvcHRpb25zOiBNYXJrZXJzQnVmZmVyTGF5ZXJPcHRpb25zLFxuICAgIGNoYW5uZWxGdW5jOiBDaGFubmVsRnVuY1xuICApIHtcbiAgICBzdXBlcihtYXAsIGRhdGFMaXN0LCBvcHRpb25zLCBjaGFubmVsRnVuYylcbiAgICBjb25zdCBkZWZhdWx0QnVmZmVyT3B0aW9uczogTC5DaXJjbGVNYXJrZXJPcHRpb25zID0ge1xuICAgICAgcmFkaXVzOiAxMDAwLFxuICAgICAgc3Ryb2tlOiBmYWxzZSxcbiAgICB9XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbihcbiAgICAgIHRoaXMub3B0aW9ucyxcbiAgICAgIHsgYnVmZmVyT3B0aW9uczogZGVmYXVsdEJ1ZmZlck9wdGlvbnMgfSxcbiAgICAgIG9wdGlvbnNcbiAgICApXG4gIH1cblxuICBwdWJsaWMgZHJhdyhvcHRpb25zPzogTWFya2Vyc0J1ZmZlckxheWVyT3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKVxuICAgIHJldHVybiB0aGlzLnJlZHJhdygpXG4gIH1cblxuICBwdWJsaWMgcmVkcmF3KCkge1xuICAgIGlmICh0aGlzLm1hcmtlckxheWVyKSB7XG4gICAgICB0aGlzLm1hcC5yZW1vdmVMYXllcih0aGlzLm1hcmtlckxheWVyKVxuICAgIH1cbiAgICBpZiAodGhpcy5idWZmZXJMYXllcikge1xuICAgICAgdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcy5idWZmZXJMYXllcilcbiAgICB9XG4gICAgdGhpcy5tYXJrZXJMYXllciA9IHRoaXMuY29uZmlnTWFya2VyTGF5ZXIoKVxuICAgIHRoaXMuYnVmZmVyTGF5ZXIgPSB0aGlzLmNvbmZpZ0J1ZmZlckxheWVyKClcbiAgICB0aGlzLm1hcC5hZGRMYXllcih0aGlzLm1hcmtlckxheWVyKVxuICAgIHRoaXMubWFwLmFkZExheWVyKHRoaXMuYnVmZmVyTGF5ZXIpXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHByaXZhdGUgY29uZmlnQnVmZmVyTGF5ZXIoKSB7XG4gICAgY29uc3QgZ3JvdXBMYXllciA9IEwubGF5ZXJHcm91cCgpXG4gICAgdGhpcy5tYXJrZXJzLmZvckVhY2goKG1hcmtlcikgPT4ge1xuICAgICAgY29uc3QgY2lyY2xlTGF5ZXIgPSBMLmNpcmNsZShcbiAgICAgICAgbWFya2VyLmdldExhdExuZygpLFxuICAgICAgICB0aGlzLm9wdGlvbnMuYnVmZmVyT3B0aW9uc1xuICAgICAgKVxuICAgICAgZ3JvdXBMYXllci5hZGRMYXllcihjaXJjbGVMYXllcilcbiAgICB9KVxuICAgIHJldHVybiBncm91cExheWVyXG4gIH1cbn1cbiIsImltcG9ydCB7IERhdGFMaXN0SXRlbSB9IGZyb20gJy4uL2RlZmluaXRpb25zJ1xuXG5leHBvcnQgdHlwZSBQb2x5bGluZU9wdGlvbnMgPSBMLkxhdExuZ0V4cHJlc3Npb25bXSB8IEwuTGF0TG5nRXhwcmVzc2lvbltdW11cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvbHlsaW5lIGV4dGVuZHMgTC5Qb2x5bGluZSB7XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp2YXJpYWJsZS1uYW1lXG4gIHByaXZhdGUgX19kYXRhOiBEYXRhTGlzdEl0ZW1cbiAgY29uc3RydWN0b3IobGF0bG5nczogUG9seWxpbmVPcHRpb25zLCBvcHRpb25zPzogTC5Qb2x5bGluZU9wdGlvbnMpIHtcbiAgICBzdXBlcihsYXRsbmdzLCBvcHRpb25zKVxuICB9XG4gIHB1YmxpYyBzZXREYXRhKGRhdGE6IERhdGFMaXN0SXRlbSkge1xuICAgIHRoaXMuX19kYXRhID0gZGF0YVxuICB9XG4gIHB1YmxpYyBnZXREYXRhKCkge1xuICAgIHJldHVybiB0aGlzLl9fZGF0YVxuICB9XG59XG4iLCJpbXBvcnQgeyBEYXRhTGlzdEl0ZW0sIENoYW5uZWxGdW5jIH0gZnJvbSAnLi4vZGVmaW5pdGlvbnMnXG5pbXBvcnQgUG9seWxpbmUsIHsgUG9seWxpbmVPcHRpb25zIH0gZnJvbSAnLi9Qb2x5bGluZSdcblxuLyoqIOa4suafk+minOiJsuagt+W8jyDljZXoibJ85YiG5q61ICovXG50eXBlIFBvbHlsaW5lTGF5ZXJSZW5kZXJDb2xvclR5cGUgPSAnc2luZ2xlJyB8ICdzZWdtZW50ZWQnXG5pbnRlcmZhY2UgUG9seWxpbmVMYXllck9wdGlvbnMgZXh0ZW5kcyBMLlBvbHlsaW5lT3B0aW9ucyB7XG4gIHJlbmRlclBvbHlsaW5lQ29sb3JUeXBlOiBQb2x5bGluZUxheWVyUmVuZGVyQ29sb3JUeXBlXG5cbiAgLyoqIHBvcHVwIOWxleekuuWtl+autSAqL1xuICBwb3B1cEF0dHI/OiBzdHJpbmdcbiAgLyoqIHRvb2x0aXAg5bGV56S65a2X5q61ICovXG4gIHRvb2x0aXBBdHRyPzogc3RyaW5nXG5cbiAgb3BhY2l0eT86IG51bWJlclxuXG4gIC8qKiDliIbmrrXmuLLmn5Pnu5/orqHlrZfmrrUgKi9cbiAgc2VnbWVudGVkQXR0cj86IHN0cmluZ1xuICBzZWdtZW50ZWRDb2xvcnM/OiBzdHJpbmdbXVxufVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9seWxpbmVzTGF5ZXIge1xuICBwcml2YXRlIG1hcDogTC5NYXBcbiAgcHJpdmF0ZSBkYXRhTGlzdDogRGF0YUxpc3RJdGVtW11cbiAgcHJpdmF0ZSBvcHRpb25zOiBQb2x5bGluZUxheWVyT3B0aW9uc1xuICBwcml2YXRlIGNoYW5uZWxGdW5jOiBDaGFubmVsRnVuY1xuICBwcml2YXRlIHBvbHlsaW5lczogUG9seWxpbmVbXVxuICBwcml2YXRlIHNlZ21lbnRlZE1pbjogbnVtYmVyXG4gIHByaXZhdGUgc2VnbWVudGVkU3RlcDogbnVtYmVyXG4gIC8vIHByaXZhdGUgZm9jdXNlZFBvbHlsaW5lOiBQb2x5bGluZVxuICBwcml2YXRlIGxheWVyOiBMLkxheWVyR3JvdXBcbiAgcHJpdmF0ZSBwb2x5bGluZUxheWVyOiBMLkxheWVyR3JvdXBcbiAgY29uc3RydWN0b3IoXG4gICAgbWFwOiBMLk1hcCxcbiAgICBkYXRhTGlzdDogRGF0YUxpc3RJdGVtW10sXG4gICAgb3B0aW9uczogUG9seWxpbmVMYXllck9wdGlvbnMsXG4gICAgY2hhbm5lbEZ1bmM6IENoYW5uZWxGdW5jXG4gICkge1xuICAgIGNvbnN0IGRlZmF1bHRPcHRpb25zOiBQb2x5bGluZUxheWVyT3B0aW9ucyA9IHtcbiAgICAgIHJlbmRlclBvbHlsaW5lQ29sb3JUeXBlOiAnc2luZ2xlJyxcbiAgICAgIHNlZ21lbnRlZENvbG9yczogWycjMzM4OEZGJ10sXG4gICAgfVxuICAgIHRoaXMubWFwID0gbWFwXG4gICAgdGhpcy5kYXRhTGlzdCA9IGRhdGFMaXN0XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9uc1xuICAgIHRoaXMuY2hhbm5lbEZ1bmMgPSBjaGFubmVsRnVuY1xuXG4gICAgdGhpcy5wb2x5bGluZXMgPSBbXVxuICAgIHRoaXMuc2VnbWVudGVkTWluID0gSW5maW5pdHlcbiAgICB0aGlzLnNlZ21lbnRlZFN0ZXAgPSAxXG4gICAgLy8gdGhpcy5mb2N1c2VkUG9seWxpbmUgPSBudWxsXG5cbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucywgb3B0aW9ucylcblxuICAgIC8vIOe8k+WtmCBzZWdtZW50IOebuOWFs+aVsOaNrlxuICAgIHRoaXMuY2FjaGVTZWdtZW50UGFyYW1zKClcbiAgICB0aGlzLmluaXRQb2x5bGluZXMoKVxuICB9XG4gIHB1YmxpYyBkcmF3KG9wdGlvbnM/OiBQb2x5bGluZUxheWVyT3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKVxuICAgIHJldHVybiB0aGlzLnJlZHJhdygpXG4gIH1cbiAgcHVibGljIHJlZHJhdygpIHtcbiAgICBpZiAodGhpcy5sYXllcikge1xuICAgICAgdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcy5sYXllcilcbiAgICB9XG4gICAgdGhpcy5sYXllciA9IHRoaXMuY29uZmlnUG9seWxpbmVMYXllcigpXG4gICAgdGhpcy5tYXAuYWRkTGF5ZXIodGhpcy5sYXllcilcbiAgICByZXR1cm4gdGhpc1xuICB9XG4gIHB1YmxpYyBmaXRCb3VuZHMoKSB7XG4gICAgdGhpcy5tYXAuZml0Qm91bmRzKHRoaXMuZ2V0Qm91bmRzKCkpXG4gIH1cbiAgcHVibGljIGdldEJvdW5kcygpOiBMLkxhdExuZ0JvdW5kc0V4cHJlc3Npb24ge1xuICAgIGlmICh0aGlzLnBvbHlsaW5lcy5sZW5ndGggPD0gMCkge1xuICAgICAgcmV0dXJuIHRoaXMubWFwLmdldEJvdW5kcygpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnBvbHlsaW5lcy5yZWR1Y2UoXG4gICAgICAocHJldiwgY3VycikgPT4gcHJldi5leHRlbmQoY3Vyci5nZXRCb3VuZHMoKSksXG4gICAgICB0aGlzLnBvbHlsaW5lc1swXS5nZXRCb3VuZHMoKVxuICAgIClcbiAgfVxuICBwdWJsaWMgZGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5sYXllcikge1xuICAgICAgdGhpcy5sYXllci5yZW1vdmUoKVxuICAgIH1cbiAgfVxuICBwdWJsaWMgdG9nZ2xlVmlzaWJsZSh2aXNpYmxlOiBib29sZWFuKSB7XG4gICAgaWYgKCF0aGlzLmxheWVyKSB7XG4gICAgICB0aGlzLmRyYXcoKVxuICAgIH1cbiAgICBpZiAodmlzaWJsZSkge1xuICAgICAgdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcy5sYXllcilcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tYXAuYWRkTGF5ZXIodGhpcy5sYXllcilcbiAgICB9XG4gIH1cbiAgcHJpdmF0ZSBpbml0UG9seWxpbmVzKCkge1xuICAgIHRoaXMuZGF0YUxpc3QuZm9yRWFjaCgoZGF0YSkgPT4ge1xuICAgICAgdGhpcy5jYWNoZVNlZ21lbnRQYXJhbXMoKVxuXG4gICAgICBjb25zdCBsYXllciA9IEwuZ2VvSlNPTihkYXRhLmdlb21ldHJ5KS5nZXRMYXllcnMoKVswXVxuICAgICAgY29uc3QgcG9seWxpbmUgPSBuZXcgUG9seWxpbmUoXG4gICAgICAgIChsYXllciBhcyBMLlBvbHlsaW5lKS5nZXRMYXRMbmdzKCkgYXMgUG9seWxpbmVPcHRpb25zXG4gICAgICApXG5cbiAgICAgIC8vIOWwhuebuOWFs+WAvOe7keWumuWIsCBtYXJrZXLkuIpcbiAgICAgIHBvbHlsaW5lLnNldERhdGEoZGF0YSlcblxuICAgICAgdGhpcy5wb2x5bGluZXMucHVzaChwb2x5bGluZSlcbiAgICB9KVxuICB9XG4gIHByaXZhdGUgY29uZmlnUG9seWxpbmVMYXllcigpIHtcbiAgICB0aGlzLnBvbHlsaW5lTGF5ZXIgPSBMLmxheWVyR3JvdXAoKVxuICAgIHRoaXMucG9seWxpbmVzLmZvckVhY2goKHBvbHlsaW5lKSA9PiB7XG4gICAgICBwb2x5bGluZS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMucG9seWxpbmVDbGlja0hhbmRsZXIocG9seWxpbmUpXG4gICAgICB9KVxuICAgICAgY29uc3Qgb3B0aW9uczogTC5Qb2x5bGluZU9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLm9wdGlvbnMsIHtcbiAgICAgICAgY29sb3I6IHRoaXMuZ2V0U2VnbWVudGVkUG9seWxpbmVDb2xvcihwb2x5bGluZS5nZXREYXRhKCkpLFxuICAgICAgfSlcbiAgICAgIGNvbnN0IG5ld1BvbHlsaW5lID0gbmV3IFBvbHlsaW5lKFxuICAgICAgICBwb2x5bGluZS5nZXRMYXRMbmdzKCkgYXMgUG9seWxpbmVPcHRpb25zLFxuICAgICAgICBvcHRpb25zXG4gICAgICApXG4gICAgICB0aGlzLnBvbHlsaW5lTGF5ZXIuYWRkTGF5ZXIobmV3UG9seWxpbmUpXG4gICAgfSlcbiAgICByZXR1cm4gdGhpcy5wb2x5bGluZUxheWVyXG4gIH1cbiAgcHJpdmF0ZSBwb2x5bGluZUNsaWNrSGFuZGxlcihwb2x5bGluZTogUG9seWxpbmUpIHtcbiAgICAvLyB0aGlzLmZvY3VzZWRQb2x5bGluZSA9IHBvbHlsaW5lXG4gICAgdGhpcy5jaGFubmVsRnVuYygnb24tY2xpY2stcG9seWxpbmUnLCBwb2x5bGluZSlcbiAgfVxuICBwcml2YXRlIGNhY2hlU2VnbWVudFBhcmFtcygpIHtcbiAgICBjb25zdCBzZWdtZW50ZWRMZW5ndGggPSB0aGlzLm9wdGlvbnMuc2VnbWVudGVkQ29sb3JzLmxlbmd0aFxuICAgIGxldCBtYXhWYWwgPSAtSW5maW5pdHlcbiAgICBsZXQgbWluVmFsID0gSW5maW5pdHlcbiAgICBmb3IgKGNvbnN0IGRhdGEgb2YgdGhpcy5kYXRhTGlzdCkge1xuICAgICAgY29uc3QgdmFsID0gZGF0YVt0aGlzLm9wdGlvbnMuc2VnbWVudGVkQXR0cl1cbiAgICAgIG1heFZhbCA9IE1hdGgubWF4KG1heFZhbCwgdmFsKVxuICAgICAgbWluVmFsID0gTWF0aC5taW4obWluVmFsLCB2YWwpXG4gICAgfVxuICAgIGNvbnN0IHN0ZXAgPSAobWF4VmFsIC0gbWluVmFsICsgMSkgLyBzZWdtZW50ZWRMZW5ndGhcbiAgICB0aGlzLnNlZ21lbnRlZE1pbiA9IG1pblZhbFxuICAgIHRoaXMuc2VnbWVudGVkU3RlcCA9IHN0ZXBcbiAgfVxuICBwcml2YXRlIGdldFNlZ21lbnRlZFBvbHlsaW5lQ29sb3IoZGF0YTogRGF0YUxpc3RJdGVtKTogc3RyaW5nIHtcbiAgICBjb25zdCB2YWwgPSBkYXRhW3RoaXMub3B0aW9ucy5zZWdtZW50ZWRBdHRyXVxuICAgIGNvbnN0IGNvbG9yID0gdGhpcy5vcHRpb25zLnNlZ21lbnRlZENvbG9yc1tcbiAgICAgICh2YWwgLSB0aGlzLnNlZ21lbnRlZE1pbikgLyB0aGlzLnNlZ21lbnRlZFN0ZXBcbiAgICBdXG4gICAgcmV0dXJuIGNvbG9yXG4gIH1cbn1cbiIsImltcG9ydCB7IERhdGFMaXN0SXRlbSB9IGZyb20gJy4uL2RlZmluaXRpb25zJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb2x5Z29uIGV4dGVuZHMgTC5Qb2x5Z29uIHtcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnZhcmlhYmxlLW5hbWVcbiAgcHJpdmF0ZSBfX2RhdGE6IERhdGFMaXN0SXRlbVxuICBjb25zdHJ1Y3RvcihcbiAgICBsYXRsbmdzOlxuICAgICAgfCBMLkxhdExuZ0V4cHJlc3Npb25bXVxuICAgICAgfCBMLkxhdExuZ0V4cHJlc3Npb25bXVtdXG4gICAgICB8IEwuTGF0TG5nRXhwcmVzc2lvbltdW11bXSxcbiAgICBvcHRpb25zPzogTC5Qb2x5bGluZU9wdGlvbnNcbiAgKSB7XG4gICAgc3VwZXIobGF0bG5ncywgb3B0aW9ucylcbiAgfVxuICBwdWJsaWMgc2V0RGF0YShkYXRhOiBEYXRhTGlzdEl0ZW0pIHtcbiAgICB0aGlzLl9fZGF0YSA9IGRhdGFcbiAgfVxuICBwdWJsaWMgZ2V0RGF0YSgpIHtcbiAgICByZXR1cm4gdGhpcy5fX2RhdGFcbiAgfVxufVxuIiwiaW1wb3J0IHsgRGF0YUxpc3RJdGVtLCBDaGFubmVsRnVuYyB9IGZyb20gJy4uL2RlZmluaXRpb25zJ1xuaW1wb3J0IFBvbHlnb24gZnJvbSAnLi9Qb2x5Z29uJ1xuXG4vKiog5riy5p+T6aKc6Imy5qC35byPIOWNleiJsnzliIbmrrUgKi9cbnR5cGUgUG9seWdvbkxheWVyUmVuZGVyQ29sb3JUeXBlID0gJ3NpbmdsZScgfCAnc2VnbWVudGVkJ1xuaW50ZXJmYWNlIFBvbHlnb25MYXllck9wdGlvbnMgZXh0ZW5kcyBMLlBvbHlsaW5lT3B0aW9ucyB7XG4gIHJlbmRlclBvbHlnb25Db2xvclR5cGU6IFBvbHlnb25MYXllclJlbmRlckNvbG9yVHlwZVxuXG4gIC8qKiBwb3B1cCDlsZXnpLrlrZfmrrUgKi9cbiAgcG9wdXBBdHRyPzogc3RyaW5nXG4gIC8qKiB0b29sdGlwIOWxleekuuWtl+autSAqL1xuICB0b29sdGlwQXR0cj86IHN0cmluZ1xuXG4gIG9wYWNpdHk/OiBudW1iZXJcblxuICAvKiog5YiG5q615riy5p+T57uf6K6h5a2X5q61ICovXG4gIHNlZ21lbnRlZEF0dHI/OiBzdHJpbmdcbiAgc2VnbWVudGVkQ29sb3JzPzogc3RyaW5nW11cbn1cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvbHlnb25zTGF5ZXIge1xuICBwcml2YXRlIG1hcDogTC5NYXBcbiAgcHJpdmF0ZSBkYXRhTGlzdDogRGF0YUxpc3RJdGVtW11cbiAgcHJpdmF0ZSBvcHRpb25zOiBQb2x5Z29uTGF5ZXJPcHRpb25zXG4gIHByaXZhdGUgY2hhbm5lbEZ1bmM6IENoYW5uZWxGdW5jXG4gIHByaXZhdGUgcG9seWdvbnM6IFBvbHlnb25bXVxuICBwcml2YXRlIHNlZ21lbnRlZE1pbjogbnVtYmVyXG4gIHByaXZhdGUgc2VnbWVudGVkU3RlcDogbnVtYmVyXG4gIC8vIHByaXZhdGUgZm9jdXNlZFBvbHlnb246IFBvbHlnb25cbiAgcHJpdmF0ZSBsYXllcjogTC5MYXllckdyb3VwXG4gIHByaXZhdGUgcG9seWdvbkxheWVyOiBMLkxheWVyR3JvdXBcbiAgY29uc3RydWN0b3IoXG4gICAgbWFwOiBMLk1hcCxcbiAgICBkYXRhTGlzdDogRGF0YUxpc3RJdGVtW10sXG4gICAgb3B0aW9uczogUG9seWdvbkxheWVyT3B0aW9ucyxcbiAgICBjaGFubmVsRnVuYzogQ2hhbm5lbEZ1bmNcbiAgKSB7XG4gICAgY29uc3QgZGVmYXVsdE9wdGlvbnM6IFBvbHlnb25MYXllck9wdGlvbnMgPSB7XG4gICAgICByZW5kZXJQb2x5Z29uQ29sb3JUeXBlOiAnc2luZ2xlJyxcbiAgICAgIHNlZ21lbnRlZENvbG9yczogWycjMzM4OEZGJ10sXG4gICAgfVxuICAgIHRoaXMubWFwID0gbWFwXG4gICAgdGhpcy5kYXRhTGlzdCA9IGRhdGFMaXN0XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9uc1xuICAgIHRoaXMuY2hhbm5lbEZ1bmMgPSBjaGFubmVsRnVuY1xuXG4gICAgdGhpcy5wb2x5Z29ucyA9IFtdXG4gICAgdGhpcy5zZWdtZW50ZWRNaW4gPSBJbmZpbml0eVxuICAgIHRoaXMuc2VnbWVudGVkU3RlcCA9IDFcbiAgICAvLyB0aGlzLmZvY3VzZWRQb2x5Z29uID0gbnVsbFxuXG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpXG5cbiAgICAvLyDnvJPlrZggc2VnbWVudCDnm7jlhbPmlbDmja5cbiAgICB0aGlzLmNhY2hlU2VnbWVudFBhcmFtcygpXG4gICAgdGhpcy5pbml0UG9seWdvbnMoKVxuICB9XG4gIHB1YmxpYyBkcmF3KG9wdGlvbnM/OiBQb2x5Z29uTGF5ZXJPcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXG4gICAgcmV0dXJuIHRoaXMucmVkcmF3KClcbiAgfVxuICBwdWJsaWMgcmVkcmF3KCkge1xuICAgIGlmICh0aGlzLmxheWVyKSB7XG4gICAgICB0aGlzLm1hcC5yZW1vdmVMYXllcih0aGlzLmxheWVyKVxuICAgIH1cbiAgICB0aGlzLmxheWVyID0gdGhpcy5jb25maWdQb2x5Z29uTGF5ZXIoKVxuICAgIHRoaXMubWFwLmFkZExheWVyKHRoaXMubGF5ZXIpXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuICBwdWJsaWMgZml0Qm91bmRzKCkge1xuICAgIHRoaXMubWFwLmZpdEJvdW5kcyh0aGlzLmdldEJvdW5kcygpKVxuICB9XG4gIHB1YmxpYyBnZXRCb3VuZHMoKTogTC5MYXRMbmdCb3VuZHNFeHByZXNzaW9uIHtcbiAgICBpZiAodGhpcy5wb2x5Z29ucy5sZW5ndGggPD0gMCkge1xuICAgICAgcmV0dXJuIHRoaXMubWFwLmdldEJvdW5kcygpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnBvbHlnb25zLnJlZHVjZShcbiAgICAgIChwcmV2LCBjdXJyKSA9PiBwcmV2LmV4dGVuZChjdXJyLmdldEJvdW5kcygpKSxcbiAgICAgIHRoaXMucG9seWdvbnNbMF0uZ2V0Qm91bmRzKClcbiAgICApXG4gIH1cbiAgcHVibGljIGRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMubGF5ZXIpIHtcbiAgICAgIHRoaXMubGF5ZXIucmVtb3ZlKClcbiAgICB9XG4gIH1cbiAgcHVibGljIHRvZ2dsZVZpc2libGUodmlzaWJsZTogYm9vbGVhbikge1xuICAgIGlmICghdGhpcy5sYXllcikge1xuICAgICAgdGhpcy5kcmF3KClcbiAgICB9XG4gICAgaWYgKHZpc2libGUpIHtcbiAgICAgIHRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMubGF5ZXIpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubWFwLmFkZExheWVyKHRoaXMubGF5ZXIpXG4gICAgfVxuICB9XG4gIHByaXZhdGUgaW5pdFBvbHlnb25zKCkge1xuICAgIHRoaXMuZGF0YUxpc3QuZm9yRWFjaCgoZGF0YSkgPT4ge1xuICAgICAgdGhpcy5jYWNoZVNlZ21lbnRQYXJhbXMoKVxuXG4gICAgICBjb25zdCBsYXllciA9IEwuZ2VvSlNPTihkYXRhLmdlb21ldHJ5KS5nZXRMYXllcnMoKVswXVxuICAgICAgY29uc3QgcG9seWdvbiA9IG5ldyBQb2x5Z29uKChsYXllciBhcyBMLlBvbHlnb24pLmdldExhdExuZ3MoKSlcblxuICAgICAgLy8g5bCG55u45YWz5YC857uR5a6a5YiwIG1hcmtlcuS4ilxuICAgICAgcG9seWdvbi5zZXREYXRhKGRhdGEpXG5cbiAgICAgIHRoaXMucG9seWdvbnMucHVzaChwb2x5Z29uKVxuICAgIH0pXG4gIH1cbiAgcHJpdmF0ZSBjb25maWdQb2x5Z29uTGF5ZXIoKSB7XG4gICAgdGhpcy5wb2x5Z29uTGF5ZXIgPSBMLmxheWVyR3JvdXAoKVxuICAgIHRoaXMucG9seWdvbnMuZm9yRWFjaCgocG9seWdvbikgPT4ge1xuICAgICAgcG9seWdvbi5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMucG9seWdvbkNsaWNrSGFuZGxlcihwb2x5Z29uKVxuICAgICAgfSlcbiAgICAgIGNvbnN0IG9wdGlvbnM6IEwuUG9seWxpbmVPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcHRpb25zLCB7XG4gICAgICAgIGNvbG9yOiB0aGlzLmdldFNlZ21lbnRlZFBvbHlnb25Db2xvcihwb2x5Z29uLmdldERhdGEoKSksXG4gICAgICB9KVxuICAgICAgY29uc3QgbmV3UG9seWdvbiA9IG5ldyBQb2x5Z29uKHBvbHlnb24uZ2V0TGF0TG5ncygpLCBvcHRpb25zKVxuICAgICAgdGhpcy5wb2x5Z29uTGF5ZXIuYWRkTGF5ZXIobmV3UG9seWdvbilcbiAgICB9KVxuICAgIHJldHVybiB0aGlzLnBvbHlnb25MYXllclxuICB9XG4gIHByaXZhdGUgcG9seWdvbkNsaWNrSGFuZGxlcihwb2x5Z29uOiBQb2x5Z29uKSB7XG4gICAgLy8gdGhpcy5mb2N1c2VkUG9seWdvbiA9IHBvbHlnb25cbiAgICB0aGlzLmNoYW5uZWxGdW5jKCdvbi1jbGljay1wb2x5Z29uJywgcG9seWdvbilcbiAgfVxuICBwcml2YXRlIGNhY2hlU2VnbWVudFBhcmFtcygpIHtcbiAgICBjb25zdCBzZWdtZW50ZWRMZW5ndGggPSB0aGlzLm9wdGlvbnMuc2VnbWVudGVkQ29sb3JzLmxlbmd0aFxuICAgIGxldCBtYXhWYWwgPSAtSW5maW5pdHlcbiAgICBsZXQgbWluVmFsID0gSW5maW5pdHlcbiAgICBmb3IgKGNvbnN0IGRhdGEgb2YgdGhpcy5kYXRhTGlzdCkge1xuICAgICAgY29uc3QgdmFsID0gZGF0YVt0aGlzLm9wdGlvbnMuc2VnbWVudGVkQXR0cl1cbiAgICAgIG1heFZhbCA9IE1hdGgubWF4KG1heFZhbCwgdmFsKVxuICAgICAgbWluVmFsID0gTWF0aC5taW4obWluVmFsLCB2YWwpXG4gICAgfVxuICAgIGNvbnN0IHN0ZXAgPSAobWF4VmFsIC0gbWluVmFsICsgMSkgLyBzZWdtZW50ZWRMZW5ndGhcbiAgICB0aGlzLnNlZ21lbnRlZE1pbiA9IG1pblZhbFxuICAgIHRoaXMuc2VnbWVudGVkU3RlcCA9IHN0ZXBcbiAgfVxuICBwcml2YXRlIGdldFNlZ21lbnRlZFBvbHlnb25Db2xvcihkYXRhOiBEYXRhTGlzdEl0ZW0pOiBzdHJpbmcge1xuICAgIGNvbnN0IHZhbCA9IGRhdGFbdGhpcy5vcHRpb25zLnNlZ21lbnRlZEF0dHJdXG4gICAgY29uc3QgY29sb3IgPSB0aGlzLm9wdGlvbnMuc2VnbWVudGVkQ29sb3JzW1xuICAgICAgKHZhbCAtIHRoaXMuc2VnbWVudGVkTWluKSAvIHRoaXMuc2VnbWVudGVkU3RlcFxuICAgIF1cbiAgICByZXR1cm4gY29sb3JcbiAgfVxufVxuIiwiaW1wb3J0IE1hcmtlciBmcm9tICcuL21hcmtlci9NYXJrZXInXG5pbXBvcnQgTWFya2Vyc0xheWVyIGZyb20gJy4vbWFya2VyL01hcmtlcnNMYXllcidcbmltcG9ydCBNYXJrZXJzQnVmZmVyTGF5ZXIgZnJvbSAnLi9tYXJrZXIvTWFya2Vyc0J1ZmZlckxheWVyJ1xuaW1wb3J0IFBvbHlsaW5lIGZyb20gJy4vcG9seWxpbmUvUG9seWxpbmUnXG5pbXBvcnQgUG9seWxpbmVzTGF5ZXIgZnJvbSAnLi9wb2x5bGluZS9Qb2x5bGluZXNMYXllcidcbmltcG9ydCBQb2x5Z29uIGZyb20gJy4vcG9seWdvbi9Qb2x5Z29uJ1xuaW1wb3J0IFBvbHlnb25zTGF5ZXIgZnJvbSAnLi9wb2x5Z29uL1BvbHlnb25zTGF5ZXInXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgTWFya2VyLFxuICBNYXJrZXJzTGF5ZXIsXG4gIE1hcmtlcnNCdWZmZXJMYXllcixcbiAgUG9seWxpbmUsXG4gIFBvbHlsaW5lc0xheWVyLFxuICBQb2x5Z29uLFxuICBQb2x5Z29uc0xheWVyLFxufVxuZXhwb3J0IHtcbiAgTWFya2VyLFxuICBNYXJrZXJzTGF5ZXIsXG4gIE1hcmtlcnNCdWZmZXJMYXllcixcbiAgUG9seWxpbmUsXG4gIFBvbHlsaW5lc0xheWVyLFxuICBQb2x5Z29uLFxuICBQb2x5Z29uc0xheWVyLFxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==