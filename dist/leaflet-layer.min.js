!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.leafletMap=e():t.leafletMap=e()}(window,function(){return function(t){var e={};function s(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);class i extends L.Marker{constructor(t,e){super(t,e)}setData(t){this.__data=t}getData(){return this.__data}}class o{constructor(t,e,s,i){this.type="marker",this.map=t,this.dataList=e,this.options=Object.assign({},{renderType:"point",renderPointColorType:"single",iconType:"unicode",iconSize:[20,20],iconClass:"iconfont",iconColor:"#3388FF",iconAnchor:[10,20],segmentedColors:["#3388FF"],isCluster:!1,heatOptions:{max:1,minOpacity:1}},s),this.channelFunc=i,this.visible=!0,this.layer=null,this.focusedMarker=null,this.hoveredMarker=null,this.focusedDisplayMarker=null,this.markers=[],this.markerLayer=null,this.heatLayer=null,this.clusterLayer=null,this.segmentedMin=1/0,this.segmentedStep=1}draw(t){return this.visible=!0,this.initMarkers(),this.options=Object.assign(this.options,t),this.redraw()}redraw(){if(this.visible){if(this.layer&&this.layer.remove(),this.options.isCluster&&"point"===this.options.renderType)this.layer=this.configClusterLayer();else switch(this.options.renderType){case"point":this.layer=this.configMarkerLayer();break;case"cluster":this.layer=this.configClusterLayer();break;case"heat":this.layer=this.configHeatLayer();break;default:throw new Error(`renderType 不支持"${this.options.renderType}"`)}return this.map.addLayer(this.layer),this}}setOptions(t,e=!1){this.options=Object.assign(this.options,t),e&&this.redraw()}fitBounds(){this.map.fitBounds(this.getBounds())}getBounds(){return this.markers.length<=0?this.map.getBounds():this.markers.map(t=>[t.getLatLng().lat,t.getLatLng().lng])}destroy(){this.layer&&this.layer.remove()}toggleVisible(t){this.visible=t,this.layer&&(t?this.map.addLayer(this.layer):this.map.removeLayer(this.layer))}changeColor(t){this.options.iconColor=t,this.redraw()}changeIcon(t){this.options.iconUnicode=t,this.redraw()}pitch(t){this.markers.forEach(e=>{e.getData().id!==t||e.fire("click")})}configMarkerLayer(){this.markerLayer&&this.markerLayer.remove();const t=L.canvasIconLayer({}).addTo(this.map);return t.addOnClickListener((t,[{data:e}])=>{this.markerClickHandler(e)}),t.addOnHoverListener((t,[{data:e}])=>{this.hoveredMarker&&this.hoveredMarker.closeTooltip(),this.hoveredMarker=e,this.hoveredMarker.getTooltip()?this.hoveredMarker.openTooltip():this.options.tooltipAttr&&this.hoveredMarker.bindTooltip(""+this.hoveredMarker.getData()[this.options.tooltipAttr])}),t.addMarkers(this.markers),this.map.on("zoomstart",()=>{this.visible&&("marker"===this.type&&("point"!==this.options.renderType||this.options.isCluster)||this.map.removeLayer(this.markerLayer))}),this.map.on("zoomend",()=>{this.visible&&("marker"===this.type&&("point"!==this.options.renderType||this.options.isCluster)||this.map.addLayer(this.markerLayer))}),setTimeout(()=>{this.map.panTo(this.map.getCenter())}),this.markerLayer=t,this.markerLayer}getToolTipContent(t){return""+t[this.options.tooltipAttr]}initMarkers(){this.cacheSegmentParams(),this.markers=[],this.dataList.forEach(t=>{const e=L.geoJSON(t.geometry).getLayers()[0],s=new i([e.getLatLng().lat,e.getLatLng().lng],{icon:this.getMarkerIcon(t)});s.setData(t),this.markers.push(s)})}markerClickHandler(t){this.focusedMarker=t,this.focusedDisplayMarker&&this.focusedDisplayMarker.removeFrom(this.map),this.focusedDisplayMarker=new i(t.getLatLng(),{icon:this.getLargerMarkerIcon(t.getData())}),this.focusedDisplayMarker.addTo(this.map),this.focusedDisplayMarker.bindPopup(this.getPopupContent(t.getData())).openPopup(),this.focusedDisplayMarker.on("popupclose",()=>{this.focusedDisplayMarker.remove()}),this.map.panTo(this.focusedMarker.getLatLng()),this.channelFunc("on-click-marker",t)}configClusterLayer(){return this.clusterLayer&&this.clusterLayer.remove(),this.clusterLayer=L.markerClusterGroup(),this.clusterLayer.addLayers(this.markers.map(t=>{const e=new i(t.getLatLng(),{icon:this.getMarkerIcon(t.getData())});return e.setData(t.getData()),e.bindTooltip(""+e.getData()[this.options.tooltipAttr]),e.on("click",()=>{this.markerClickHandler(e)}),e})),this.clusterLayer}configHeatLayer(){return this.heatLayer&&this.heatLayer.remove(),this.markers.forEach(t=>{const e=t.getLatLng(),s=this.options.heatOptions&&this.options.heatOptions.dimensionAttr;let i=s&&t.getData()[s]||this.options.heatOptions.max;"number"!=typeof i&&(i=this.options.heatOptions.max),t.setLatLng(L.latLng(e.lat,e.lng,i))}),this.heatLayer=L.heatLayer(this.markers.map(t=>t.getLatLng()),Object.assign({},this.options.heatOptions,{minOpacity:1})),this.heatLayer}getLargerMarkerIcon(t){return this._getMarkerIcon(t,!0)}getMarkerIcon(t){return this._getMarkerIcon(t,!1)}_getMarkerIcon(t,e){const s=this.options.iconSize,i=this.options.iconAnchor,o=[1.5*s[0],1.5*s[1]],n=[1.5*i[0],1.5*i[1]],r=this.options.iconColor;switch(this.options.iconType){case"image":case"font_class":case"symbol":case"unicode":return L.divIcon({html:this.getCustomIconHTML(t,{iconSize:e?o:s,iconColor:r}),className:e?"large-div-icon-marker":"",iconSize:e?o:s,iconAnchor:e?n:i});default:throw new Error(`图标类型不支持"${this.options.iconType}"`)}}getCustomIconHTML(t,e){if(this.options.iconRenderer)return e=Object.assign({},this.options,e),this.options.iconRenderer(t,e);switch(this.options.renderPointColorType){case"single":switch(this.options.iconType){case"font_class":return`\n              <i class="${this.options.iconClass}"\n                style="\n                  color: ${e.iconColor};\n                  font-size: ${e.iconSize[0]}px;\n                "\n                />\n            `;case"symbol":return`\n              <svg class="icon-symbol" aria-hidden="true">\n                <use xlink:href="${this.options.iconSymbol}" />\n              </svg>\n            `;case"unicode":return`\n              <i\n                class="${this.options.iconClass}"\n                style="\n                  color: ${e.iconColor};\n                  font-size: ${e.iconSize[0]}px;\n                "\n                >\n                ${this.options.iconUnicode}\n              </i>\n            `}break;case"segmented":switch(this.options.iconType){case"font_class":return`\n              <i\n                class="${this.options.iconClass}"\n                style="\n                  color: ${this.getSegmentedMarkerColor(t)};\n                  font-size: ${e.iconSize[0]}px;\n                "\n                />\n            `;case"symbol":return`\n              <svg class="icon-symbol" aria-hidden="true">\n                <use xlink:href="${this.options.iconSymbol}" />\n              </svg>\n            `;case"unicode":return`\n              <i\n                class="${this.options.iconClass}"\n                style="\n                  color: ${this.getSegmentedMarkerColor(t)};\n                  font-size: ${e.iconSize[0]}px;\n                "\n                >\n                ${this.options.iconUnicode}\n              </i>\n            `}break;default:throw new Error(`renderPointColorType 不支持"${this.options.renderPointColorType}"`)}}cacheSegmentParams(){const t=this.options.segmentedColors.length;let e=-1/0,s=1/0;for(const t of this.dataList){const i=t[this.options.segmentedAttr];e=Math.max(e,i),s=Math.min(s,i)}const i=(e-s+1)/t;this.segmentedMin=s,this.segmentedStep=i}getSegmentedMarkerColor(t){const e=t[this.options.segmentedAttr];return this.options.segmentedColors[parseInt(""+(e-this.segmentedMin)/this.segmentedStep,10)]}getPopupContent(t){return this.options.popupAttr?`${this.options.popupAttr}: ${t[this.options.popupAttr]}`:""}}class n extends o{constructor(t,e,s,i){super(t,e,s,i),this.type="markerBuffer";this.options=Object.assign(this.options,{bufferOptions:{radius:1e3,stroke:!0,weight:1}},s)}draw(t){return this.options=Object.assign(this.options,t),this.redraw()}redraw(){if(this.visible)return this.markerLayer&&this.map.removeLayer(this.markerLayer),this.bufferLayer&&this.map.removeLayer(this.bufferLayer),this.markerLayer=this.configMarkerLayer(),this.bufferLayer=this.configBufferLayer(),this.map.addLayer(this.markerLayer),this.map.addLayer(this.bufferLayer),this}configBufferLayer(){const t=L.layerGroup();return this.markers.forEach(e=>{const s=L.circle(e.getLatLng(),this.options.bufferOptions);this.options.bufferTooltipAttr&&s.bindTooltip(""+e.getData()[this.options.bufferTooltipAttr]),t.addLayer(s)}),t}}class r extends L.Polyline{constructor(t,e){super(t,e)}setData(t){this.__data=t}getData(){return this.__data}}class a{constructor(t,e,s,i){this.type="polyline",this.map=t,this.dataList=e,this.options=s,this.channelFunc=i,this.visible=!0,this.polylines=[],this.segmentedMin=1/0,this.segmentedStep=1,this.options=Object.assign({},{color:"#3388FF",renderPolylineColorType:"single",segmentedColors:["#3388FF"]},s),this.initPolylines()}draw(t){return this.options=Object.assign(this.options,t),this.redraw()}redraw(){if(this.visible)return this.layer&&this.layer.remove(),this.layer=this.configPolylineLayer(),this.map.addLayer(this.layer),this}fitBounds(){this.map.fitBounds(this.getBounds())}getBounds(){return this.polylines.length<=0?this.map.getBounds():this.polylines.reduce((t,e)=>t.extend(e.getBounds()),this.polylines[0].getBounds())}destroy(){this.layer&&this.layer.remove()}toggleVisible(t){this.visible=t,this.layer&&(t?this.map.addLayer(this.layer):this.map.removeLayer(this.layer))}changeColor(t){this.options.fillColor=t,this.redraw()}pitch(t){this.polylines.forEach(e=>{e.getData().id!==t||e.fire("click")})}initPolylines(){this.cacheSegmentParams(),this.polylines=[],this.dataList.forEach(t=>{const e=L.geoJSON(t.geometry).getLayers()[0];let s=this.options.fillColor;"segmented"===this.options.renderPolylineColorType&&(s=this.getSegmentedPolylineColor(t));const i=new r(e.getLatLngs(),Object.assign({},this.options,{fillColor:s}));i.setData(t),this.polylines.push(i)})}getSegmentedPolylineColor(t){const e=t[this.options.segmentedAttr];return this.options.segmentedColors[parseInt(""+(e-this.segmentedMin)/this.segmentedStep,10)]}polylineClickHandler(t){this.channelFunc("on-click-polyline",t)}getToolTipContent(t){return""+t[this.options.tooltipAttr]}configPolylineLayer(){return this.polylineLayer=L.layerGroup(),this.polylines.forEach(t=>{const e=Object.assign({},this.options,{color:this.getSegmentedPolylineColor(t.getData())}),s=new r(t.getLatLngs(),e);s.on("click",()=>{this.polylineClickHandler(t)}),s.setData(t.getData()),this.options.tooltipAttr&&s.bindTooltip(this.getToolTipContent(s.getData())),this.polylineLayer.addLayer(s)}),this.polylineLayer}cacheSegmentParams(){const t=this.options.segmentedColors.length;let e=-1/0,s=1/0;for(const t of this.dataList){const i=t[this.options.segmentedAttr];e=Math.max(e,i),s=Math.min(s,i)}const i=(e-s+1)/t;this.segmentedMin=s,this.segmentedStep=i}}class h extends a{constructor(t,e,s,i){super(t,e,s,i);this.type="polylineBuffer",this.map=t,this.dataList=e,this.options=s,this.channelFunc=i,this.visible=!0,this.polylines=[],this.segmentedMin=1/0,this.segmentedStep=1,this.options=Object.assign({},{renderPolylineColorType:"single",segmentedColors:["#3388FF"],corridor:100,color:"#3388FF",opacity:.5},s),this.initPolylines()}draw(t){return this.options=Object.assign(this.options,t),this.redraw()}redraw(){if(this.visible)return this.layer&&this.layer.remove(),this.layer=this.configPolylineBufferLayer(),this.map.addLayer(this.layer),this}fitBounds(){this.map.fitBounds(this.getBounds())}getBounds(){return this.polylines.length<=0?this.map.getBounds():this.polylines.reduce((t,e)=>t.extend(e.getBounds()),this.polylines[0].getBounds())}changeColor(t){this.options.color=t,this.redraw()}configPolylineBufferLayer(){return this.polylineLayer=L.layerGroup(),this.polylines.forEach(t=>{t.on("click",()=>{this.polylineClickHandler(t)});const e=Object.assign({},this.options,{color:"single"===this.options.renderPolylineColorType?this.options.color:this.getSegmentedPolylineColor(t.getData())}),s=L.corridor(t.getLatLngs().map(t=>L.latLng([t.lat,t.lng])),e);this.options.tooltipAttr&&s.bindTooltip(this.getToolTipContent(t.getData())),this.polylineLayer.addLayer(s)}),this.polylineLayer}}class l extends L.Polygon{constructor(t,e){super(t,e)}setData(t){this.__data=t}getData(){return this.__data}}class p{constructor(t,e,s,i){this.type="polygon",this.map=t,this.dataList=e,this.options=s,this.channelFunc=i,this.visible=!0,this.polygons=[],this.segmentedMin=1/0,this.segmentedStep=1,this.options=Object.assign({},{color:"#3388FF",fillColor:"#3388FF",renderPolygonColorType:"single",segmentedColors:["#3388FF"]},s),this.initPolygons()}draw(t){return this.options=Object.assign(this.options,t),this.redraw()}redraw(){if(this.visible)return this.layer&&this.layer.remove(),this.layer=this.configPolygonLayer(),this.map.addLayer(this.layer),this}fitBounds(){this.map.fitBounds(this.getBounds())}getBounds(){return this.polygons.length<=0?this.map.getBounds():this.polygons.reduce((t,e)=>t.extend(e.getBounds()),this.polygons[0].getBounds())}destroy(){this.layer&&this.layer.remove()}toggleVisible(t){this.visible=t,this.layer&&(t?this.map.addLayer(this.layer):this.map.removeLayer(this.layer))}changeColor(t){this.options.fillColor=t,this.redraw()}pitch(t){this.polygons.forEach(e=>{e.getData().id!==t||e.fire("click")})}getToolTipContent(t){return""+t[this.options.tooltipAttr]}initPolygons(){this.cacheSegmentParams(),this.polygons=[],this.dataList.forEach(t=>{const e=L.geoJSON(t.geometry).getLayers()[0],s=new l(e.getLatLngs());s.setData(t),this.polygons.push(s)})}configPolygonLayer(){return this.polygonLayer=L.layerGroup(),this.polygons.forEach(t=>{let e=this.options.color;"segmented"===this.options.renderPolygonColorType&&(e=this.getSegmentedPolygonColor(t.getData()));const s=Object.assign({},this.options,{color:e}),i=new l(t.getLatLngs(),s);i.setData(t.getData()),i.on("click",()=>{this.polygonClickHandler(t)}),this.options.tooltipAttr&&i.bindTooltip(this.getToolTipContent(i.getData())),this.polygonLayer.addLayer(i)}),this.polygonLayer}polygonClickHandler(t){this.channelFunc("on-click-polygon",t)}cacheSegmentParams(){const t=this.options.segmentedColors.length;let e=-1/0,s=1/0;for(const t of this.dataList){const i=t[this.options.segmentedAttr];e=Math.max(e,i),s=Math.min(s,i)}const i=(e-s+1)/t;this.segmentedMin=s,this.segmentedStep=i}getSegmentedPolygonColor(t){const e=t[this.options.segmentedAttr];return this.options.segmentedColors[parseInt(""+(e-this.segmentedMin)/this.segmentedStep,10)]}}s.d(e,"Marker",function(){return i}),s.d(e,"MarkersLayer",function(){return o}),s.d(e,"MarkersBufferLayer",function(){return n}),s.d(e,"Polyline",function(){return r}),s.d(e,"PolylinesLayer",function(){return a}),s.d(e,"PolylinesBufferLayer",function(){return h}),s.d(e,"Polygon",function(){return l}),s.d(e,"PolygonsLayer",function(){return p});e.default={Marker:i,MarkersLayer:o,MarkersBufferLayer:n,Polyline:r,PolylinesLayer:a,PolylinesBufferLayer:h,Polygon:l,PolygonsLayer:p}}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFmbGV0TWFwL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9sZWFmbGV0TWFwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2xlYWZsZXRNYXAvLi9zcmMvbWFya2VyL01hcmtlci50cyIsIndlYnBhY2s6Ly9sZWFmbGV0TWFwLy4vc3JjL21hcmtlci9NYXJrZXJzTGF5ZXIudHMiLCJ3ZWJwYWNrOi8vbGVhZmxldE1hcC8uL3NyYy9tYXJrZXIvTWFya2Vyc0J1ZmZlckxheWVyLnRzIiwid2VicGFjazovL2xlYWZsZXRNYXAvLi9zcmMvcG9seWxpbmUvUG9seWxpbmUudHMiLCJ3ZWJwYWNrOi8vbGVhZmxldE1hcC8uL3NyYy9wb2x5bGluZS9Qb2x5bGluZXNMYXllci50cyIsIndlYnBhY2s6Ly9sZWFmbGV0TWFwLy4vc3JjL3BvbHlsaW5lL1BvbHlsaW5lc0J1ZmZlckxheWVyLnRzIiwid2VicGFjazovL2xlYWZsZXRNYXAvLi9zcmMvcG9seWdvbi9Qb2x5Z29uLnRzIiwid2VicGFjazovL2xlYWZsZXRNYXAvLi9zcmMvcG9seWdvbi9Qb2x5Z29uc0xheWVyLnRzIiwid2VicGFjazovL2xlYWZsZXRNYXAvLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwid2luZG93IiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIk1hcmtlciIsIkwiLCJbb2JqZWN0IE9iamVjdF0iLCJsYXRsbmciLCJvcHRpb25zIiwic3VwZXIiLCJkYXRhIiwidGhpcyIsIl9fZGF0YSIsIk1hcmtlcnNMYXllcl9NYXJrZXJzTGF5ZXIiLCJtYXAiLCJkYXRhTGlzdCIsImNoYW5uZWxGdW5jIiwidHlwZSIsImFzc2lnbiIsInJlbmRlclR5cGUiLCJyZW5kZXJQb2ludENvbG9yVHlwZSIsImljb25UeXBlIiwiaWNvblNpemUiLCJpY29uQ2xhc3MiLCJpY29uQ29sb3IiLCJpY29uQW5jaG9yIiwic2VnbWVudGVkQ29sb3JzIiwiaXNDbHVzdGVyIiwiaGVhdE9wdGlvbnMiLCJtYXgiLCJtaW5PcGFjaXR5IiwidmlzaWJsZSIsImxheWVyIiwiZm9jdXNlZE1hcmtlciIsImhvdmVyZWRNYXJrZXIiLCJmb2N1c2VkRGlzcGxheU1hcmtlciIsIm1hcmtlcnMiLCJtYXJrZXJMYXllciIsImhlYXRMYXllciIsImNsdXN0ZXJMYXllciIsInNlZ21lbnRlZE1pbiIsIkluZmluaXR5Iiwic2VnbWVudGVkU3RlcCIsImluaXRNYXJrZXJzIiwicmVkcmF3IiwicmVtb3ZlIiwiY29uZmlnQ2x1c3RlckxheWVyIiwiY29uZmlnTWFya2VyTGF5ZXIiLCJjb25maWdIZWF0TGF5ZXIiLCJFcnJvciIsImFkZExheWVyIiwiZml0Qm91bmRzIiwiZ2V0Qm91bmRzIiwibGVuZ3RoIiwibWFya2VyIiwiZ2V0TGF0TG5nIiwibGF0IiwibG5nIiwicmVtb3ZlTGF5ZXIiLCJjb2xvciIsImljb25Vbmljb2RlIiwiaWQiLCJmb3JFYWNoIiwiZ2V0RGF0YSIsImZpcmUiLCJjYW52YXNJY29uTGF5ZXIiLCJhZGRUbyIsImFkZE9uQ2xpY2tMaXN0ZW5lciIsIl8iLCJtYXJrZXJDbGlja0hhbmRsZXIiLCJhZGRPbkhvdmVyTGlzdGVuZXIiLCJjbG9zZVRvb2x0aXAiLCJnZXRUb29sdGlwIiwib3BlblRvb2x0aXAiLCJ0b29sdGlwQXR0ciIsImJpbmRUb29sdGlwIiwiYWRkTWFya2VycyIsIm9uIiwic2V0VGltZW91dCIsInBhblRvIiwiZ2V0Q2VudGVyIiwiY2FjaGVTZWdtZW50UGFyYW1zIiwiZ2VvSlNPTiIsImdlb21ldHJ5IiwiZ2V0TGF5ZXJzIiwiaWNvbiIsImdldE1hcmtlckljb24iLCJzZXREYXRhIiwicHVzaCIsInJlbW92ZUZyb20iLCJnZXRMYXJnZXJNYXJrZXJJY29uIiwiYmluZFBvcHVwIiwiZ2V0UG9wdXBDb250ZW50Iiwib3BlblBvcHVwIiwibWFya2VyQ2x1c3Rlckdyb3VwIiwiYWRkTGF5ZXJzIiwibGF0TG5nIiwiZGltZW5zaW9uQXR0ciIsImFsdCIsInNldExhdExuZyIsIml0IiwiX2dldE1hcmtlckljb24iLCJpc0xhcmdlciIsImxhcmdlckljb25TaXplIiwibGFyZ2VySWNvbkFuY2hvciIsImRpdkljb24iLCJodG1sIiwiZ2V0Q3VzdG9tSWNvbkhUTUwiLCJjbGFzc05hbWUiLCJpY29uUmVuZGVyZXIiLCJpY29uU3ltYm9sIiwiZ2V0U2VnbWVudGVkTWFya2VyQ29sb3IiLCJzZWdtZW50ZWRMZW5ndGgiLCJtYXhWYWwiLCJtaW5WYWwiLCJ2YWwiLCJzZWdtZW50ZWRBdHRyIiwiTWF0aCIsIm1pbiIsInN0ZXAiLCJwYXJzZUludCIsInBvcHVwQXR0ciIsIk1hcmtlcnNCdWZmZXJMYXllcl9NYXJrZXJzQnVmZmVyTGF5ZXIiLCJidWZmZXJPcHRpb25zIiwicmFkaXVzIiwic3Ryb2tlIiwid2VpZ2h0IiwiYnVmZmVyTGF5ZXIiLCJjb25maWdCdWZmZXJMYXllciIsImdyb3VwTGF5ZXIiLCJsYXllckdyb3VwIiwiY2lyY2xlTGF5ZXIiLCJjaXJjbGUiLCJidWZmZXJUb29sdGlwQXR0ciIsIlBvbHlsaW5lIiwibGF0bG5ncyIsIlBvbHlsaW5lc0xheWVyX1BvbHlsaW5lc0xheWVyIiwicG9seWxpbmVzIiwicmVuZGVyUG9seWxpbmVDb2xvclR5cGUiLCJpbml0UG9seWxpbmVzIiwiY29uZmlnUG9seWxpbmVMYXllciIsInJlZHVjZSIsInByZXYiLCJjdXJyIiwiZXh0ZW5kIiwiZmlsbENvbG9yIiwicG9seWxpbmUiLCJnZXRTZWdtZW50ZWRQb2x5bGluZUNvbG9yIiwiZ2V0TGF0TG5ncyIsInBvbHlsaW5lTGF5ZXIiLCJuZXdQb2x5bGluZSIsInBvbHlsaW5lQ2xpY2tIYW5kbGVyIiwiZ2V0VG9vbFRpcENvbnRlbnQiLCJQb2x5bGluZXNCdWZmZXJMYXllcl9Qb2x5bGluZXNCdWZmZXJMYXllciIsImNvcnJpZG9yIiwib3BhY2l0eSIsImNvbmZpZ1BvbHlsaW5lQnVmZmVyTGF5ZXIiLCJwb2x5bGluZUJ1ZmZlciIsIlBvbHlnb24iLCJQb2x5Z29uc0xheWVyX1BvbHlnb25zTGF5ZXIiLCJwb2x5Z29ucyIsInJlbmRlclBvbHlnb25Db2xvclR5cGUiLCJpbml0UG9seWdvbnMiLCJjb25maWdQb2x5Z29uTGF5ZXIiLCJwb2x5Z29uIiwicG9seWdvbkxheWVyIiwiZ2V0U2VnbWVudGVkUG9seWdvbkNvbG9yIiwibmV3UG9seWdvbiIsInBvbHlnb25DbGlja0hhbmRsZXIiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiTWFya2Vyc0xheWVyIiwiTWFya2Vyc0J1ZmZlckxheWVyIiwiUG9seWxpbmVzTGF5ZXIiLCJQb2x5bGluZXNCdWZmZXJMYXllciIsIlBvbHlnb25zTGF5ZXIiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsaUJBQUFDLFNBQUEsaUJBQUFDLE9BQ0FBLE9BQUFELFFBQUFELElBQ0EsbUJBQUFHLGVBQUFDLElBQ0FELFVBQUFILEdBQ0EsaUJBQUFDLFFBQ0FBLFFBQUEsV0FBQUQsSUFFQUQsRUFBQSxXQUFBQyxJQVJBLENBU0NLLE9BQUEsV0FDRCxtQkNUQSxJQUFBQyxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBUCxRQUdBLElBQUFDLEVBQUFJLEVBQUFFLElBQ0FDLEVBQUFELEVBQ0FF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RUFBQStMLEVBQUEsMkJBQUFySyxJQUFBbEMsRUFBQVEsRUFBQStMLEVBQUEsaUNBQUE1SixJQUFBM0MsRUFBQVEsRUFBQStMLEVBQUEsdUNBQUEvQyxJQUFBeEosRUFBQVEsRUFBQStMLEVBQUEsNkJBQUFuQyxJQUFBcEssRUFBQVEsRUFBQStMLEVBQUEsbUNBQUFqQyxJQUFBdEssRUFBQVEsRUFBQStMLEVBQUEseUNBQUFoQixJQUFBdkwsRUFBQVEsRUFBQStMLEVBQUEsNEJBQUFYLElBQUE1TCxFQUFBUSxFQUFBK0wsRUFBQSxrQ0FBQVYsSUFTQVUsRUFBQSxTQUNFckssU0FDQXNLLGFBQUE3SixFQUNBOEosbUJBQUFqRCxFQUNBWSxXQUNBc0MsZUFBQXBDLEVBQ0FxQyxxQkFBQXBCLEVBQ0FLLFVBQ0FnQixjQUFBZiIsImZpbGUiOiJsZWFmbGV0LWxheWVyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcImxlYWZsZXRNYXBcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wibGVhZmxldE1hcFwiXSA9IGZhY3RvcnkoKTtcbn0pKHdpbmRvdywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IHsgRGF0YUxpc3RJdGVtIH0gZnJvbSAnLi4vZGVmaW5pdGlvbnMnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hcmtlciBleHRlbmRzIEwuTWFya2VyIHtcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnZhcmlhYmxlLW5hbWVcbiAgcHJpdmF0ZSBfX2RhdGE6IERhdGFMaXN0SXRlbVxuICBjb25zdHJ1Y3RvcihsYXRsbmc6IEwuTGF0TG5nRXhwcmVzc2lvbiwgb3B0aW9ucz86IEwuTWFya2VyT3B0aW9ucykge1xuICAgIHN1cGVyKGxhdGxuZywgb3B0aW9ucylcbiAgfVxuICBwdWJsaWMgc2V0RGF0YShkYXRhOiBEYXRhTGlzdEl0ZW0pIHtcbiAgICB0aGlzLl9fZGF0YSA9IGRhdGFcbiAgfVxuICBwdWJsaWMgZ2V0RGF0YSgpIHtcbiAgICByZXR1cm4gdGhpcy5fX2RhdGFcbiAgfVxufVxuIiwiaW1wb3J0IHsgRGF0YUxpc3RJdGVtLCBDaGFubmVsRnVuYyB9IGZyb20gJy4uL2RlZmluaXRpb25zJ1xuaW1wb3J0IE1hcmtlciBmcm9tICcuL01hcmtlcidcblxuLyoqIOa4suafk+agt+W8jyDmlaPngrl854Ot5Yqb5Zu+ICovXG50eXBlIE1hcmtlcnNMYXllclJlbmRlclR5cGUgPSAncG9pbnQnIHwgJ2hlYXQnIHwgJ2NsdXN0ZXInXG5cbi8qKiDmuLLmn5PpopzoibLmoLflvI8g5Y2V6ImyfOWIhuautSAqL1xudHlwZSBNYXJrZXJzTGF5ZXJSZW5kZXJQb2ludENvbG9yVHlwZSA9ICdzaW5nbGUnIHwgJ3NlZ21lbnRlZCdcblxuLyoqIOaVo+eCueWbvuagh+exu+WeiyBpY29uZm9udHxzdmd8aW1hZ2UgKi9cbnR5cGUgTWFya2Vyc0xheWVySWNvblR5cGUgPSAnZm9udF9jbGFzcycgfCAndW5pY29kZScgfCAnc3ltYm9sJyB8ICdpbWFnZSdcblxuaW50ZXJmYWNlIEljb25SZW5kZXJGdW5jT3B0aW9uIHtcbiAgaWNvblNpemU6IFtudW1iZXIsIG51bWJlcl1cbiAgaWNvbkNvbG9yOiBzdHJpbmdcbn1cbnR5cGUgSWNvblJlbmRlckZ1bmMgPSAoXG4gIGRhdGE6IERhdGFMaXN0SXRlbSxcbiAgcGFyYW1zOiBJY29uUmVuZGVyRnVuY09wdGlvblxuKSA9PiBzdHJpbmdcblxuZXhwb3J0IGludGVyZmFjZSBNYXJrZXJzTGF5ZXJPcHRpb25zIHtcbiAgcmVuZGVyVHlwZTogTWFya2Vyc0xheWVyUmVuZGVyVHlwZVxuICByZW5kZXJQb2ludENvbG9yVHlwZTogTWFya2Vyc0xheWVyUmVuZGVyUG9pbnRDb2xvclR5cGVcbiAgaWNvblR5cGU6IE1hcmtlcnNMYXllckljb25UeXBlXG5cbiAgaWNvbkltYWdlVXJsPzogc3RyaW5nXG4gIGljb25TaXplPzogW251bWJlciwgbnVtYmVyXVxuICBpY29uQ2xhc3M/OiBzdHJpbmdcbiAgaWNvblVuaWNvZGU/OiBzdHJpbmdcbiAgaWNvblN5bWJvbD86IHN0cmluZ1xuICBpY29uQ29sb3I/OiBzdHJpbmdcbiAgaWNvbkFuY2hvcj86IFtudW1iZXIsIG51bWJlcl1cbiAgaWNvblJlbmRlcmVyPzogSWNvblJlbmRlckZ1bmNcblxuICBpc0NsdXN0ZXI/OiBib29sZWFuXG5cbiAgLyoqIHBvcHVwIOWxleekuuWtl+autSAqL1xuICBwb3B1cEF0dHI/OiBzdHJpbmdcbiAgLyoqIHRvb2x0aXAg5bGV56S65a2X5q61ICovXG4gIHRvb2x0aXBBdHRyPzogc3RyaW5nXG5cbiAgb3BhY2l0eT86IG51bWJlclxuXG4gIC8qKiDliIbmrrXmuLLmn5Pnu5/orqHlrZfmrrUgKi9cbiAgc2VnbWVudGVkQXR0cj86IHN0cmluZ1xuICBzZWdtZW50ZWRDb2xvcnM/OiBzdHJpbmdbXVxuXG4gIGhlYXRPcHRpb25zPzogTWFya2Vyc0hlYXRMYXllck9wdGlvbnNcbiAgY2x1c3Rlck9wdGlvbnM/OiBMLk1hcmtlcnNDbHVzdGVyT3B0aW9uc1xufVxuXG4vKiog6L2s5YyW5Li654Ot5Yqb5Zu+55qEIG9wdGlvbnMgKi9cbmludGVyZmFjZSBNYXJrZXJzSGVhdExheWVyT3B0aW9ucyBleHRlbmRzIEwuSGVhdExheWVyT3B0aW9ucyB7XG4gIGRpbWVuc2lvbkF0dHI/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFya2Vyc0xheWVyIHtcbiAgcHVibGljIG1hcDogTC5NYXBcbiAgcHVibGljIGRhdGFMaXN0OiBEYXRhTGlzdEl0ZW1bXVxuICBwdWJsaWMgb3B0aW9uczogTWFya2Vyc0xheWVyT3B0aW9uc1xuICBwdWJsaWMgY2hhbm5lbEZ1bmM6IENoYW5uZWxGdW5jXG5cbiAgcHVibGljIHR5cGU6IHN0cmluZ1xuXG4gIHByb3RlY3RlZCBtYXJrZXJzOiBNYXJrZXJbXVxuXG4gIHByb3RlY3RlZCBmb2N1c2VkTWFya2VyOiBNYXJrZXJcbiAgcHJvdGVjdGVkIGhvdmVyZWRNYXJrZXI6IE1hcmtlclxuICAvKiog6ZyA6KaB5bGV56S655qE5pS+5aSn55qE5Zu+5qCHICovXG4gIHByb3RlY3RlZCBmb2N1c2VkRGlzcGxheU1hcmtlcjogTWFya2VyXG4gIHByb3RlY3RlZCBtYXJrZXJMYXllcjogTC5DYW52YXNJY29uTGF5ZXJcblxuICBwcm90ZWN0ZWQgdmlzaWJsZTogYm9vbGVhblxuICBwcm90ZWN0ZWQgbGF5ZXI6XG4gICAgfCBMLkNhbnZhc0ljb25MYXllclxuICAgIHwgTC5IZWF0TGF5ZXJcbiAgICB8IEwuTWFya2Vyc0NsdXN0ZXJcbiAgICB8IEwuTGF5ZXJHcm91cFxuICBwcml2YXRlIGhlYXRMYXllcjogTC5IZWF0TGF5ZXJcbiAgcHJpdmF0ZSBjbHVzdGVyTGF5ZXI6IEwuTWFya2Vyc0NsdXN0ZXJcblxuICBwcml2YXRlIHNlZ21lbnRlZE1pbjogbnVtYmVyXG4gIHByaXZhdGUgc2VnbWVudGVkU3RlcDogbnVtYmVyXG4gIGNvbnN0cnVjdG9yKFxuICAgIG1hcDogTC5NYXAsXG4gICAgZGF0YUxpc3Q6IERhdGFMaXN0SXRlbVtdLFxuICAgIG9wdGlvbnM6IE1hcmtlcnNMYXllck9wdGlvbnMsXG4gICAgY2hhbm5lbEZ1bmM6IENoYW5uZWxGdW5jXG4gICkge1xuICAgIGNvbnN0IGRlZmF1bHRPcHRpb25zOiBNYXJrZXJzTGF5ZXJPcHRpb25zID0ge1xuICAgICAgcmVuZGVyVHlwZTogJ3BvaW50JyxcbiAgICAgIHJlbmRlclBvaW50Q29sb3JUeXBlOiAnc2luZ2xlJyxcbiAgICAgIGljb25UeXBlOiAndW5pY29kZScsXG4gICAgICBpY29uU2l6ZTogWzIwLCAyMF0sXG4gICAgICBpY29uQ2xhc3M6ICdpY29uZm9udCcsXG4gICAgICBpY29uQ29sb3I6ICcjMzM4OEZGJyxcbiAgICAgIGljb25BbmNob3I6IFsxMCwgMjBdLFxuICAgICAgc2VnbWVudGVkQ29sb3JzOiBbJyMzMzg4RkYnXSxcbiAgICAgIGlzQ2x1c3RlcjogZmFsc2UsXG4gICAgICBoZWF0T3B0aW9uczoge1xuICAgICAgICBtYXg6IDEsXG4gICAgICAgIG1pbk9wYWNpdHk6IDEsXG4gICAgICB9LFxuICAgIH1cbiAgICB0aGlzLnR5cGUgPSAnbWFya2VyJ1xuICAgIHRoaXMubWFwID0gbWFwXG4gICAgdGhpcy5kYXRhTGlzdCA9IGRhdGFMaXN0XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpXG4gICAgdGhpcy5jaGFubmVsRnVuYyA9IGNoYW5uZWxGdW5jXG5cbiAgICB0aGlzLnZpc2libGUgPSB0cnVlXG4gICAgdGhpcy5sYXllciA9IG51bGxcbiAgICB0aGlzLmZvY3VzZWRNYXJrZXIgPSBudWxsXG4gICAgdGhpcy5ob3ZlcmVkTWFya2VyID0gbnVsbFxuICAgIHRoaXMuZm9jdXNlZERpc3BsYXlNYXJrZXIgPSBudWxsXG4gICAgdGhpcy5tYXJrZXJzID0gW11cbiAgICB0aGlzLm1hcmtlckxheWVyID0gbnVsbFxuICAgIHRoaXMuaGVhdExheWVyID0gbnVsbFxuICAgIHRoaXMuY2x1c3RlckxheWVyID0gbnVsbFxuXG4gICAgdGhpcy5zZWdtZW50ZWRNaW4gPSBJbmZpbml0eVxuICAgIHRoaXMuc2VnbWVudGVkU3RlcCA9IDFcbiAgfVxuICBwdWJsaWMgZHJhdyhvcHRpb25zPzogTWFya2Vyc0xheWVyT3B0aW9ucykge1xuICAgIHRoaXMudmlzaWJsZSA9IHRydWVcbiAgICB0aGlzLmluaXRNYXJrZXJzKClcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucylcbiAgICByZXR1cm4gdGhpcy5yZWRyYXcoKVxuICB9XG4gIHB1YmxpYyByZWRyYXcoKSB7XG4gICAgaWYgKCF0aGlzLnZpc2libGUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodGhpcy5sYXllcikge1xuICAgICAgdGhpcy5sYXllci5yZW1vdmUoKVxuICAgIH1cblxuICAgIC8vIOS8mOWFiOWIpOaWrSBpc0NsdXN0ZXJcbiAgICBpZiAodGhpcy5vcHRpb25zLmlzQ2x1c3RlciAmJiB0aGlzLm9wdGlvbnMucmVuZGVyVHlwZSA9PT0gJ3BvaW50Jykge1xuICAgICAgdGhpcy5sYXllciA9IHRoaXMuY29uZmlnQ2x1c3RlckxheWVyKClcbiAgICB9IGVsc2Uge1xuICAgICAgc3dpdGNoICh0aGlzLm9wdGlvbnMucmVuZGVyVHlwZSkge1xuICAgICAgICBjYXNlICdwb2ludCc6IHtcbiAgICAgICAgICB0aGlzLmxheWVyID0gdGhpcy5jb25maWdNYXJrZXJMYXllcigpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdjbHVzdGVyJzoge1xuICAgICAgICAgIHRoaXMubGF5ZXIgPSB0aGlzLmNvbmZpZ0NsdXN0ZXJMYXllcigpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdoZWF0Jzoge1xuICAgICAgICAgIHRoaXMubGF5ZXIgPSB0aGlzLmNvbmZpZ0hlYXRMYXllcigpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGByZW5kZXJUeXBlIOS4jeaUr+aMgVwiJHt0aGlzLm9wdGlvbnMucmVuZGVyVHlwZX1cImApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5tYXAuYWRkTGF5ZXIodGhpcy5sYXllcilcbiAgICByZXR1cm4gdGhpc1xuICB9XG4gIHB1YmxpYyBzZXRPcHRpb25zKG9wdGlvbnM6IE1hcmtlcnNMYXllck9wdGlvbnMsIHJlZHJhdyA9IGZhbHNlKSB7XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXG4gICAgaWYgKHJlZHJhdykge1xuICAgICAgdGhpcy5yZWRyYXcoKVxuICAgIH1cbiAgfVxuICBwdWJsaWMgZml0Qm91bmRzKCkge1xuICAgIHRoaXMubWFwLmZpdEJvdW5kcyh0aGlzLmdldEJvdW5kcygpKVxuICB9XG4gIHB1YmxpYyBnZXRCb3VuZHMoKTogTC5MYXRMbmdCb3VuZHNFeHByZXNzaW9uIHtcbiAgICBpZiAodGhpcy5tYXJrZXJzLmxlbmd0aCA8PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5tYXAuZ2V0Qm91bmRzKClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubWFya2Vycy5tYXAoXG4gICAgICAobWFya2VyKSA9PlxuICAgICAgICBbbWFya2VyLmdldExhdExuZygpLmxhdCwgbWFya2VyLmdldExhdExuZygpLmxuZ10gYXMgW251bWJlciwgbnVtYmVyXVxuICAgIClcbiAgfVxuICBwdWJsaWMgZGVzdHJveSgpIHtcbiAgICAvLyBUT0RPOiDlsIbkuovku7bnp7vpmaRcbiAgICBpZiAodGhpcy5sYXllcikge1xuICAgICAgdGhpcy5sYXllci5yZW1vdmUoKVxuICAgIH1cbiAgfVxuICBwdWJsaWMgdG9nZ2xlVmlzaWJsZSh2aXNpYmxlOiBib29sZWFuKSB7XG4gICAgdGhpcy52aXNpYmxlID0gdmlzaWJsZVxuICAgIGlmICghdGhpcy5sYXllcikge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh2aXNpYmxlKSB7XG4gICAgICB0aGlzLm1hcC5hZGRMYXllcih0aGlzLmxheWVyKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1hcC5yZW1vdmVMYXllcih0aGlzLmxheWVyKVxuICAgIH1cbiAgfVxuICBwdWJsaWMgY2hhbmdlQ29sb3IoY29sb3I6IHN0cmluZykge1xuICAgIHRoaXMub3B0aW9ucy5pY29uQ29sb3IgPSBjb2xvclxuICAgIHRoaXMucmVkcmF3KClcbiAgfVxuICBwdWJsaWMgY2hhbmdlSWNvbihpY29uVW5pY29kZTogc3RyaW5nKSB7XG4gICAgdGhpcy5vcHRpb25zLmljb25Vbmljb2RlID0gaWNvblVuaWNvZGVcbiAgICB0aGlzLnJlZHJhdygpXG4gIH1cbiAgcHVibGljIHBpdGNoKGlkOiBzdHJpbmcpIHtcbiAgICB0aGlzLm1hcmtlcnMuZm9yRWFjaCgobWFya2VyKSA9PiB7XG4gICAgICBpZiAobWFya2VyLmdldERhdGEoKS5pZCA9PT0gaWQpIHtcbiAgICAgICAgbWFya2VyLmZpcmUoJ2NsaWNrJylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgfSlcbiAgfVxuICAvKiog5riy5p+T5Li65pWj54K55Zu+ICovXG4gIHByb3RlY3RlZCBjb25maWdNYXJrZXJMYXllcigpIHtcbiAgICBpZiAodGhpcy5tYXJrZXJMYXllcikge1xuICAgICAgdGhpcy5tYXJrZXJMYXllci5yZW1vdmUoKVxuICAgIH1cbiAgICBjb25zdCBjYW52YXNJY29uTGF5ZXIgPSBMLmNhbnZhc0ljb25MYXllcih7fSkuYWRkVG8odGhpcy5tYXApXG4gICAgLy8g5re75Yqg54K55Ye75LqL5Lu2XG4gICAgY2FudmFzSWNvbkxheWVyLmFkZE9uQ2xpY2tMaXN0ZW5lcigoXywgW3sgZGF0YTogbWFya2VyIH1dKSA9PiB7XG4gICAgICB0aGlzLm1hcmtlckNsaWNrSGFuZGxlcihtYXJrZXIgYXMgTWFya2VyKVxuICAgIH0pXG4gICAgLy8g5re75YqgIGhvdmVyIOS6i+S7tlxuICAgIGNhbnZhc0ljb25MYXllci5hZGRPbkhvdmVyTGlzdGVuZXIoKF8sIFt7IGRhdGE6IG1hcmtlciB9XSkgPT4ge1xuICAgICAgLy8g5LmL5YmN5pyJIGhvdmVyIOeahOWFs+mXrSB0b29sdGlwXG4gICAgICBpZiAodGhpcy5ob3ZlcmVkTWFya2VyKSB7XG4gICAgICAgIHRoaXMuaG92ZXJlZE1hcmtlci5jbG9zZVRvb2x0aXAoKVxuICAgICAgfVxuICAgICAgdGhpcy5ob3ZlcmVkTWFya2VyID0gbWFya2VyIGFzIE1hcmtlclxuXG4gICAgICBpZiAodGhpcy5ob3ZlcmVkTWFya2VyLmdldFRvb2x0aXAoKSkge1xuICAgICAgICAvLyDlpoLmnpzlt7Lnu4/orr7nva4gdG9vbHRpcCDnm7TmjqXlsZXnpLogdG9vbHRpcFxuICAgICAgICB0aGlzLmhvdmVyZWRNYXJrZXIub3BlblRvb2x0aXAoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g5ZCm5YiZ57uR5a6aIHRvb2x0aXAg5bm25bGV56S6XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMudG9vbHRpcEF0dHIpIHtcbiAgICAgICAgICB0aGlzLmhvdmVyZWRNYXJrZXIuYmluZFRvb2x0aXAoXG4gICAgICAgICAgICAnJyArIHRoaXMuaG92ZXJlZE1hcmtlci5nZXREYXRhKClbdGhpcy5vcHRpb25zLnRvb2x0aXBBdHRyXVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgY2FudmFzSWNvbkxheWVyLmFkZE1hcmtlcnModGhpcy5tYXJrZXJzKVxuXG4gICAgdGhpcy5tYXAub24oJ3pvb21zdGFydCcsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy52aXNpYmxlKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ21hcmtlcicpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yZW5kZXJUeXBlID09PSAncG9pbnQnICYmICF0aGlzLm9wdGlvbnMuaXNDbHVzdGVyKSB7XG4gICAgICAgICAgdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcy5tYXJrZXJMYXllcilcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcy5tYXJrZXJMYXllcilcbiAgICAgIH1cbiAgICB9KVxuICAgIHRoaXMubWFwLm9uKCd6b29tZW5kJywgKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnZpc2libGUpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZiAodGhpcy50eXBlID09PSAnbWFya2VyJykge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnJlbmRlclR5cGUgPT09ICdwb2ludCcgJiYgIXRoaXMub3B0aW9ucy5pc0NsdXN0ZXIpIHtcbiAgICAgICAgICB0aGlzLm1hcC5hZGRMYXllcih0aGlzLm1hcmtlckxheWVyKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm1hcC5hZGRMYXllcih0aGlzLm1hcmtlckxheWVyKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyDop6PlhrPliJ3mrKHmuLLmn5PkuI3lh7rlm77moIfpl67pophcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMubWFwLnBhblRvKHRoaXMubWFwLmdldENlbnRlcigpKVxuICAgIH0pXG5cbiAgICB0aGlzLm1hcmtlckxheWVyID0gY2FudmFzSWNvbkxheWVyXG4gICAgcmV0dXJuIHRoaXMubWFya2VyTGF5ZXJcbiAgfVxuICBwcm90ZWN0ZWQgZ2V0VG9vbFRpcENvbnRlbnQoZGF0YTogRGF0YUxpc3RJdGVtKSB7XG4gICAgcmV0dXJuICcnICsgZGF0YVt0aGlzLm9wdGlvbnMudG9vbHRpcEF0dHJdXG4gIH1cbiAgcHJpdmF0ZSBpbml0TWFya2VycygpIHtcbiAgICAvLyDnvJPlrZggc2VnbWVudCDnm7jlhbPmlbDmja5cbiAgICB0aGlzLmNhY2hlU2VnbWVudFBhcmFtcygpXG4gICAgdGhpcy5tYXJrZXJzID0gW11cbiAgICB0aGlzLmRhdGFMaXN0LmZvckVhY2goKGRhdGEpID0+IHtcbiAgICAgIGNvbnN0IGxheWVyID0gTC5nZW9KU09OKGRhdGEuZ2VvbWV0cnkpLmdldExheWVycygpWzBdXG5cbiAgICAgIGNvbnN0IG1hcmtlciA9IG5ldyBNYXJrZXIoXG4gICAgICAgIFtcbiAgICAgICAgICAobGF5ZXIgYXMgTC5NYXJrZXIpLmdldExhdExuZygpLmxhdCxcbiAgICAgICAgICAobGF5ZXIgYXMgTC5NYXJrZXIpLmdldExhdExuZygpLmxuZyxcbiAgICAgICAgXSxcbiAgICAgICAge1xuICAgICAgICAgIGljb246IHRoaXMuZ2V0TWFya2VySWNvbihkYXRhKSxcbiAgICAgICAgfVxuICAgICAgKVxuXG4gICAgICAvLyDlsIbnm7jlhbPlgLznu5HlrprliLAgbWFya2Vy5LiKXG4gICAgICBtYXJrZXIuc2V0RGF0YShkYXRhKVxuXG4gICAgICB0aGlzLm1hcmtlcnMucHVzaChtYXJrZXIpXG4gICAgfSlcbiAgfVxuICAvLyDlpITnkIYgbWFya2VyIOeCueWHu+S6i+S7tlxuICBwcml2YXRlIG1hcmtlckNsaWNrSGFuZGxlcihtYXJrZXI6IE1hcmtlcikge1xuICAgIHRoaXMuZm9jdXNlZE1hcmtlciA9IG1hcmtlclxuICAgIC8vIOWIoOmZpOWJjeS4gOS4quaUvuWkp+Wbvuagh1xuICAgIGlmICh0aGlzLmZvY3VzZWREaXNwbGF5TWFya2VyKSB7XG4gICAgICB0aGlzLmZvY3VzZWREaXNwbGF5TWFya2VyLnJlbW92ZUZyb20odGhpcy5tYXApXG4gICAgfVxuICAgIC8vIOeUn+aIkOW9k+WJjeaUvuWkp+Wbvuagh1xuICAgIHRoaXMuZm9jdXNlZERpc3BsYXlNYXJrZXIgPSBuZXcgTWFya2VyKG1hcmtlci5nZXRMYXRMbmcoKSwge1xuICAgICAgaWNvbjogdGhpcy5nZXRMYXJnZXJNYXJrZXJJY29uKG1hcmtlci5nZXREYXRhKCkpLFxuICAgIH0pXG4gICAgdGhpcy5mb2N1c2VkRGlzcGxheU1hcmtlci5hZGRUbyh0aGlzLm1hcClcblxuICAgIHRoaXMuZm9jdXNlZERpc3BsYXlNYXJrZXJcbiAgICAgIC5iaW5kUG9wdXAodGhpcy5nZXRQb3B1cENvbnRlbnQobWFya2VyLmdldERhdGEoKSkpXG4gICAgICAub3BlblBvcHVwKClcbiAgICB0aGlzLmZvY3VzZWREaXNwbGF5TWFya2VyLm9uKCdwb3B1cGNsb3NlJywgKCkgPT4ge1xuICAgICAgdGhpcy5mb2N1c2VkRGlzcGxheU1hcmtlci5yZW1vdmUoKVxuICAgIH0pXG5cbiAgICB0aGlzLm1hcC5wYW5Ubyh0aGlzLmZvY3VzZWRNYXJrZXIuZ2V0TGF0TG5nKCkpXG4gICAgdGhpcy5jaGFubmVsRnVuYygnb24tY2xpY2stbWFya2VyJywgbWFya2VyKVxuICB9XG4gIHByaXZhdGUgY29uZmlnQ2x1c3RlckxheWVyKCkge1xuICAgIC8vIOWxleekuuiBmuWQiOWbvuWxglxuICAgIGlmICh0aGlzLmNsdXN0ZXJMYXllcikge1xuICAgICAgdGhpcy5jbHVzdGVyTGF5ZXIucmVtb3ZlKClcbiAgICB9XG4gICAgdGhpcy5jbHVzdGVyTGF5ZXIgPSBMLm1hcmtlckNsdXN0ZXJHcm91cCgpXG4gICAgdGhpcy5jbHVzdGVyTGF5ZXIuYWRkTGF5ZXJzKFxuICAgICAgdGhpcy5tYXJrZXJzLm1hcCgobSkgPT4ge1xuICAgICAgICBjb25zdCBtYXJrZXIgPSBuZXcgTWFya2VyKG0uZ2V0TGF0TG5nKCksIHtcbiAgICAgICAgICBpY29uOiB0aGlzLmdldE1hcmtlckljb24obS5nZXREYXRhKCkpLFxuICAgICAgICB9KVxuICAgICAgICBtYXJrZXIuc2V0RGF0YShtLmdldERhdGEoKSlcbiAgICAgICAgbWFya2VyLmJpbmRUb29sdGlwKCcnICsgbWFya2VyLmdldERhdGEoKVt0aGlzLm9wdGlvbnMudG9vbHRpcEF0dHJdKVxuICAgICAgICBtYXJrZXIub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgIHRoaXMubWFya2VyQ2xpY2tIYW5kbGVyKG1hcmtlcilcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIG1hcmtlclxuICAgICAgfSlcbiAgICApXG4gICAgcmV0dXJuIHRoaXMuY2x1c3RlckxheWVyXG4gIH1cblxuICAvKiog5riy5p+T5Li654Ot5Yqb5Zu+ICovXG4gIHByaXZhdGUgY29uZmlnSGVhdExheWVyKCkge1xuICAgIGlmICh0aGlzLmhlYXRMYXllcikge1xuICAgICAgdGhpcy5oZWF0TGF5ZXIucmVtb3ZlKClcbiAgICB9XG4gICAgdGhpcy5tYXJrZXJzLmZvckVhY2goKG1hcmtlcikgPT4ge1xuICAgICAgY29uc3QgbGF0TG5nID0gbWFya2VyLmdldExhdExuZygpXG4gICAgICBjb25zdCBkaW1lbnNpb25BdHRyID1cbiAgICAgICAgdGhpcy5vcHRpb25zLmhlYXRPcHRpb25zICYmIHRoaXMub3B0aW9ucy5oZWF0T3B0aW9ucy5kaW1lbnNpb25BdHRyXG4gICAgICBsZXQgYWx0ID1cbiAgICAgICAgKGRpbWVuc2lvbkF0dHIgJiYgbWFya2VyLmdldERhdGEoKVtkaW1lbnNpb25BdHRyXSkgfHxcbiAgICAgICAgdGhpcy5vcHRpb25zLmhlYXRPcHRpb25zLm1heFxuICAgICAgaWYgKHR5cGVvZiBhbHQgIT09ICdudW1iZXInKSB7XG4gICAgICAgIGFsdCA9IHRoaXMub3B0aW9ucy5oZWF0T3B0aW9ucy5tYXhcbiAgICAgIH1cbiAgICAgIG1hcmtlci5zZXRMYXRMbmcoTC5sYXRMbmcobGF0TG5nLmxhdCwgbGF0TG5nLmxuZywgYWx0KSlcbiAgICB9KVxuICAgIHRoaXMuaGVhdExheWVyID0gTC5oZWF0TGF5ZXIoXG4gICAgICB0aGlzLm1hcmtlcnMubWFwKChpdCkgPT4gaXQuZ2V0TGF0TG5nKCkpLFxuICAgICAgLy8gVE9ETzog5L2/55SoIG1lcmdlQ29uZmlnIOeugOWMllxuICAgICAgT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcHRpb25zLmhlYXRPcHRpb25zLCB7IG1pbk9wYWNpdHk6IDEgfSlcbiAgICApXG4gICAgcmV0dXJuIHRoaXMuaGVhdExheWVyXG4gIH1cblxuICBwcml2YXRlIGdldExhcmdlck1hcmtlckljb24oZGF0YTogRGF0YUxpc3RJdGVtKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldE1hcmtlckljb24oZGF0YSwgdHJ1ZSlcbiAgfVxuXG4gIHByaXZhdGUgZ2V0TWFya2VySWNvbihkYXRhOiBEYXRhTGlzdEl0ZW0pIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0TWFya2VySWNvbihkYXRhLCBmYWxzZSlcbiAgfVxuXG4gIC8qKiDojrflj5blvZPliY0gbWFya2VyIOmcgOimgeWxleekuueahCBpY29uICovXG4gIHByaXZhdGUgX2dldE1hcmtlckljb24oXG4gICAgZGF0YTogRGF0YUxpc3RJdGVtLFxuICAgIGlzTGFyZ2VyOiBib29sZWFuXG4gICk6IEwuSWNvbiB8IEwuRGl2SWNvbiB7XG4gICAgY29uc3QgaWNvblNpemUgPSB0aGlzLm9wdGlvbnMuaWNvblNpemVcbiAgICBjb25zdCBpY29uQW5jaG9yID0gdGhpcy5vcHRpb25zLmljb25BbmNob3JcbiAgICBjb25zdCBsYXJnZXJJY29uU2l6ZSA9IFtpY29uU2l6ZVswXSAqIDEuNSwgaWNvblNpemVbMV0gKiAxLjVdIGFzIFtcbiAgICAgIG51bWJlcixcbiAgICAgIG51bWJlclxuICAgIF1cbiAgICBjb25zdCBsYXJnZXJJY29uQW5jaG9yID0gW2ljb25BbmNob3JbMF0gKiAxLjUsIGljb25BbmNob3JbMV0gKiAxLjVdIGFzIFtcbiAgICAgIG51bWJlcixcbiAgICAgIG51bWJlclxuICAgIF1cblxuICAgIGNvbnN0IGljb25Db2xvciA9IHRoaXMub3B0aW9ucy5pY29uQ29sb3JcblxuICAgIHN3aXRjaCAodGhpcy5vcHRpb25zLmljb25UeXBlKSB7XG4gICAgICBjYXNlICdpbWFnZSc6IHtcbiAgICAgICAgLy8gcmV0dXJuIEwuaWNvbih7XG4gICAgICAgIC8vICAgaWNvblVybDogdGhpcy5vcHRpb25zLmljb25JbWFnZVVybCxcbiAgICAgICAgLy8gICBpY29uU2l6ZTogaXNMYXJnZXIgPyBsYXJnZXJJY29uU2l6ZSA6IGljb25TaXplLFxuICAgICAgICAvLyAgIGljb25BbmNob3IsXG4gICAgICAgIC8vIH0pXG4gICAgICB9XG4gICAgICBjYXNlICdmb250X2NsYXNzJzpcbiAgICAgIGNhc2UgJ3N5bWJvbCc6XG4gICAgICBjYXNlICd1bmljb2RlJzoge1xuICAgICAgICByZXR1cm4gTC5kaXZJY29uKHtcbiAgICAgICAgICBodG1sOiB0aGlzLmdldEN1c3RvbUljb25IVE1MKGRhdGEsIHtcbiAgICAgICAgICAgIGljb25TaXplOiBpc0xhcmdlciA/IGxhcmdlckljb25TaXplIDogaWNvblNpemUsXG4gICAgICAgICAgICBpY29uQ29sb3IsXG4gICAgICAgICAgfSksXG4gICAgICAgICAgY2xhc3NOYW1lOiBpc0xhcmdlciA/ICdsYXJnZS1kaXYtaWNvbi1tYXJrZXInIDogJycsXG4gICAgICAgICAgaWNvblNpemU6IGlzTGFyZ2VyID8gbGFyZ2VySWNvblNpemUgOiBpY29uU2l6ZSxcbiAgICAgICAgICBpY29uQW5jaG9yOiBpc0xhcmdlciA/IGxhcmdlckljb25BbmNob3IgOiBpY29uQW5jaG9yLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYOWbvuagh+exu+Wei+S4jeaUr+aMgVwiJHt0aGlzLm9wdGlvbnMuaWNvblR5cGV9XCJgKVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBwcml2YXRlIGdldEN1c3RvbUljb25IVE1MKFxuICAgIGRhdGE6IERhdGFMaXN0SXRlbSxcbiAgICBvcHRpb25zPzogSWNvblJlbmRlckZ1bmNPcHRpb25cbiAgKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLmljb25SZW5kZXJlcikge1xuICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMub3B0aW9ucywgb3B0aW9ucylcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuaWNvblJlbmRlcmVyKGRhdGEsIG9wdGlvbnMpXG4gICAgfVxuICAgIHN3aXRjaCAodGhpcy5vcHRpb25zLnJlbmRlclBvaW50Q29sb3JUeXBlKSB7XG4gICAgICBjYXNlICdzaW5nbGUnOiB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5vcHRpb25zLmljb25UeXBlKSB7XG4gICAgICAgICAgLy8g5L2/55SoIGNsYXNzXG4gICAgICAgICAgY2FzZSAnZm9udF9jbGFzcyc6IHtcbiAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAgIDxpIGNsYXNzPVwiJHt0aGlzLm9wdGlvbnMuaWNvbkNsYXNzfVwiXG4gICAgICAgICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiAke29wdGlvbnMuaWNvbkNvbG9yfTtcbiAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogJHtvcHRpb25zLmljb25TaXplWzBdfXB4O1xuICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8g5L2/55SoIHN2Z1xuICAgICAgICAgIGNhc2UgJ3N5bWJvbCc6IHtcbiAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAgIDxzdmcgY2xhc3M9XCJpY29uLXN5bWJvbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPlxuICAgICAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj1cIiR7dGhpcy5vcHRpb25zLmljb25TeW1ib2x9XCIgLz5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIOS9v+eUqCB1bmljb2RlXG4gICAgICAgICAgY2FzZSAndW5pY29kZSc6IHtcbiAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAgIDxpXG4gICAgICAgICAgICAgICAgY2xhc3M9XCIke3RoaXMub3B0aW9ucy5pY29uQ2xhc3N9XCJcbiAgICAgICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICAgICAgY29sb3I6ICR7b3B0aW9ucy5pY29uQ29sb3J9O1xuICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAke29wdGlvbnMuaWNvblNpemVbMF19cHg7XG4gICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgJHt0aGlzLm9wdGlvbnMuaWNvblVuaWNvZGV9XG4gICAgICAgICAgICAgIDwvaT5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3NlZ21lbnRlZCc6IHtcbiAgICAgICAgc3dpdGNoICh0aGlzLm9wdGlvbnMuaWNvblR5cGUpIHtcbiAgICAgICAgICAvLyDkvb/nlKggY2xhc3NcbiAgICAgICAgICBjYXNlICdmb250X2NsYXNzJzoge1xuICAgICAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICAgICAgPGlcbiAgICAgICAgICAgICAgICBjbGFzcz1cIiR7dGhpcy5vcHRpb25zLmljb25DbGFzc31cIlxuICAgICAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgICBjb2xvcjogJHt0aGlzLmdldFNlZ21lbnRlZE1hcmtlckNvbG9yKGRhdGEpfTtcbiAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogJHtvcHRpb25zLmljb25TaXplWzBdfXB4O1xuICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8g5L2/55SoIHN2Z1xuICAgICAgICAgIGNhc2UgJ3N5bWJvbCc6IHtcbiAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAgIDxzdmcgY2xhc3M9XCJpY29uLXN5bWJvbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPlxuICAgICAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj1cIiR7dGhpcy5vcHRpb25zLmljb25TeW1ib2x9XCIgLz5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIOS9v+eUqCB1bmljb2RlXG4gICAgICAgICAgY2FzZSAndW5pY29kZSc6IHtcbiAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAgIDxpXG4gICAgICAgICAgICAgICAgY2xhc3M9XCIke3RoaXMub3B0aW9ucy5pY29uQ2xhc3N9XCJcbiAgICAgICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICAgICAgY29sb3I6ICR7dGhpcy5nZXRTZWdtZW50ZWRNYXJrZXJDb2xvcihkYXRhKX07XG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6ICR7b3B0aW9ucy5pY29uU2l6ZVswXX1weDtcbiAgICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAke3RoaXMub3B0aW9ucy5pY29uVW5pY29kZX1cbiAgICAgICAgICAgICAgPC9pPlxuICAgICAgICAgICAgYFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYHJlbmRlclBvaW50Q29sb3JUeXBlIOS4jeaUr+aMgVwiJHt0aGlzLm9wdGlvbnMucmVuZGVyUG9pbnRDb2xvclR5cGV9XCJgXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcHJpdmF0ZSBjYWNoZVNlZ21lbnRQYXJhbXMoKSB7XG4gICAgY29uc3Qgc2VnbWVudGVkTGVuZ3RoID0gdGhpcy5vcHRpb25zLnNlZ21lbnRlZENvbG9ycy5sZW5ndGhcbiAgICBsZXQgbWF4VmFsID0gLUluZmluaXR5XG4gICAgbGV0IG1pblZhbCA9IEluZmluaXR5XG4gICAgZm9yIChjb25zdCBkYXRhIG9mIHRoaXMuZGF0YUxpc3QpIHtcbiAgICAgIGNvbnN0IHZhbCA9IGRhdGFbdGhpcy5vcHRpb25zLnNlZ21lbnRlZEF0dHJdXG4gICAgICBtYXhWYWwgPSBNYXRoLm1heChtYXhWYWwsIHZhbClcbiAgICAgIG1pblZhbCA9IE1hdGgubWluKG1pblZhbCwgdmFsKVxuICAgIH1cbiAgICBjb25zdCBzdGVwID0gKG1heFZhbCAtIG1pblZhbCArIDEpIC8gc2VnbWVudGVkTGVuZ3RoXG4gICAgdGhpcy5zZWdtZW50ZWRNaW4gPSBtaW5WYWxcbiAgICB0aGlzLnNlZ21lbnRlZFN0ZXAgPSBzdGVwXG4gIH1cbiAgcHJpdmF0ZSBnZXRTZWdtZW50ZWRNYXJrZXJDb2xvcihkYXRhOiBEYXRhTGlzdEl0ZW0pOiBzdHJpbmcge1xuICAgIGNvbnN0IHZhbCA9IGRhdGFbdGhpcy5vcHRpb25zLnNlZ21lbnRlZEF0dHJdXG4gICAgY29uc3QgY29sb3IgPSB0aGlzLm9wdGlvbnMuc2VnbWVudGVkQ29sb3JzW1xuICAgICAgcGFyc2VJbnQoJycgKyAodmFsIC0gdGhpcy5zZWdtZW50ZWRNaW4pIC8gdGhpcy5zZWdtZW50ZWRTdGVwLCAxMClcbiAgICBdXG4gICAgcmV0dXJuIGNvbG9yXG4gIH1cbiAgcHJpdmF0ZSBnZXRQb3B1cENvbnRlbnQoZGF0YTogRGF0YUxpc3RJdGVtKSB7XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMucG9wdXBBdHRyKSB7XG4gICAgICByZXR1cm4gJydcbiAgICB9XG4gICAgcmV0dXJuIGAke3RoaXMub3B0aW9ucy5wb3B1cEF0dHJ9OiAke2RhdGFbdGhpcy5vcHRpb25zLnBvcHVwQXR0cl19YFxuICB9XG59XG4iLCJpbXBvcnQgeyBEYXRhTGlzdEl0ZW0sIENoYW5uZWxGdW5jIH0gZnJvbSAnLi4vZGVmaW5pdGlvbnMnXG5pbXBvcnQgTWFya2Vyc0xheWVyLCB7IE1hcmtlcnNMYXllck9wdGlvbnMgfSBmcm9tICcuL01hcmtlcnNMYXllcidcbmludGVyZmFjZSBNYXJrZXJzQnVmZmVyTGF5ZXJPcHRpb25zIGV4dGVuZHMgTWFya2Vyc0xheWVyT3B0aW9ucyB7XG4gIGJ1ZmZlclRvb2x0aXBBdHRyOiBzdHJpbmdcbiAgYnVmZmVyT3B0aW9uczogTC5DaXJjbGVNYXJrZXJPcHRpb25zXG59XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXJrZXJzQnVmZmVyTGF5ZXIgZXh0ZW5kcyBNYXJrZXJzTGF5ZXIge1xuICBwdWJsaWMgb3B0aW9uczogTWFya2Vyc0J1ZmZlckxheWVyT3B0aW9uc1xuICBwcml2YXRlIGJ1ZmZlckxheWVyOiBMLkxheWVyR3JvdXBcbiAgY29uc3RydWN0b3IoXG4gICAgbWFwOiBMLk1hcCxcbiAgICBkYXRhTGlzdDogRGF0YUxpc3RJdGVtW10sXG4gICAgb3B0aW9uczogTWFya2Vyc0J1ZmZlckxheWVyT3B0aW9ucyxcbiAgICBjaGFubmVsRnVuYzogQ2hhbm5lbEZ1bmNcbiAgKSB7XG4gICAgc3VwZXIobWFwLCBkYXRhTGlzdCwgb3B0aW9ucywgY2hhbm5lbEZ1bmMpXG4gICAgdGhpcy50eXBlID0gJ21hcmtlckJ1ZmZlcidcbiAgICBjb25zdCBkZWZhdWx0QnVmZmVyT3B0aW9uczogTC5DaXJjbGVNYXJrZXJPcHRpb25zID0ge1xuICAgICAgcmFkaXVzOiAxMDAwLFxuICAgICAgc3Ryb2tlOiB0cnVlLFxuICAgICAgd2VpZ2h0OiAxLFxuICAgIH1cbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKFxuICAgICAgdGhpcy5vcHRpb25zLFxuICAgICAgeyBidWZmZXJPcHRpb25zOiBkZWZhdWx0QnVmZmVyT3B0aW9ucyB9LFxuICAgICAgb3B0aW9uc1xuICAgIClcbiAgfVxuXG4gIHB1YmxpYyBkcmF3KG9wdGlvbnM/OiBNYXJrZXJzQnVmZmVyTGF5ZXJPcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXG4gICAgcmV0dXJuIHRoaXMucmVkcmF3KClcbiAgfVxuXG4gIHB1YmxpYyByZWRyYXcoKSB7XG4gICAgaWYgKCF0aGlzLnZpc2libGUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodGhpcy5tYXJrZXJMYXllcikge1xuICAgICAgdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcy5tYXJrZXJMYXllcilcbiAgICB9XG4gICAgaWYgKHRoaXMuYnVmZmVyTGF5ZXIpIHtcbiAgICAgIHRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMuYnVmZmVyTGF5ZXIpXG4gICAgfVxuICAgIHRoaXMubWFya2VyTGF5ZXIgPSB0aGlzLmNvbmZpZ01hcmtlckxheWVyKClcbiAgICB0aGlzLmJ1ZmZlckxheWVyID0gdGhpcy5jb25maWdCdWZmZXJMYXllcigpXG4gICAgdGhpcy5tYXAuYWRkTGF5ZXIodGhpcy5tYXJrZXJMYXllcilcbiAgICB0aGlzLm1hcC5hZGRMYXllcih0aGlzLmJ1ZmZlckxheWVyKVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBwcml2YXRlIGNvbmZpZ0J1ZmZlckxheWVyKCkge1xuICAgIGNvbnN0IGdyb3VwTGF5ZXIgPSBMLmxheWVyR3JvdXAoKVxuICAgIHRoaXMubWFya2Vycy5mb3JFYWNoKChtYXJrZXIpID0+IHtcbiAgICAgIGNvbnN0IGNpcmNsZUxheWVyID0gTC5jaXJjbGUoXG4gICAgICAgIG1hcmtlci5nZXRMYXRMbmcoKSxcbiAgICAgICAgdGhpcy5vcHRpb25zLmJ1ZmZlck9wdGlvbnNcbiAgICAgIClcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuYnVmZmVyVG9vbHRpcEF0dHIpIHtcbiAgICAgICAgY2lyY2xlTGF5ZXIuYmluZFRvb2x0aXAoXG4gICAgICAgICAgJycgKyBtYXJrZXIuZ2V0RGF0YSgpW3RoaXMub3B0aW9ucy5idWZmZXJUb29sdGlwQXR0cl1cbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgZ3JvdXBMYXllci5hZGRMYXllcihjaXJjbGVMYXllcilcbiAgICB9KVxuICAgIHJldHVybiBncm91cExheWVyXG4gIH1cbn1cbiIsImltcG9ydCB7IERhdGFMaXN0SXRlbSB9IGZyb20gJy4uL2RlZmluaXRpb25zJ1xuXG5leHBvcnQgdHlwZSBQb2x5bGluZU9wdGlvbnMgPSBMLkxhdExuZ0V4cHJlc3Npb25bXSB8IEwuTGF0TG5nRXhwcmVzc2lvbltdW11cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvbHlsaW5lIGV4dGVuZHMgTC5Qb2x5bGluZSB7XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp2YXJpYWJsZS1uYW1lXG4gIHByaXZhdGUgX19kYXRhOiBEYXRhTGlzdEl0ZW1cbiAgY29uc3RydWN0b3IobGF0bG5nczogUG9seWxpbmVPcHRpb25zLCBvcHRpb25zPzogTC5Qb2x5bGluZU9wdGlvbnMpIHtcbiAgICBzdXBlcihsYXRsbmdzLCBvcHRpb25zKVxuICB9XG4gIHB1YmxpYyBzZXREYXRhKGRhdGE6IERhdGFMaXN0SXRlbSkge1xuICAgIHRoaXMuX19kYXRhID0gZGF0YVxuICB9XG4gIHB1YmxpYyBnZXREYXRhKCkge1xuICAgIHJldHVybiB0aGlzLl9fZGF0YVxuICB9XG59XG4iLCJpbXBvcnQgeyBEYXRhTGlzdEl0ZW0sIENoYW5uZWxGdW5jIH0gZnJvbSAnLi4vZGVmaW5pdGlvbnMnXG5pbXBvcnQgUG9seWxpbmUsIHsgUG9seWxpbmVPcHRpb25zIH0gZnJvbSAnLi9Qb2x5bGluZSdcblxuLyoqIOa4suafk+minOiJsuagt+W8jyDljZXoibJ85YiG5q61ICovXG50eXBlIFBvbHlsaW5lTGF5ZXJSZW5kZXJDb2xvclR5cGUgPSAnc2luZ2xlJyB8ICdzZWdtZW50ZWQnXG5pbnRlcmZhY2UgUG9seWxpbmVMYXllck9wdGlvbnMgZXh0ZW5kcyBMLlBvbHlsaW5lT3B0aW9ucyB7XG4gIHJlbmRlclBvbHlsaW5lQ29sb3JUeXBlOiBQb2x5bGluZUxheWVyUmVuZGVyQ29sb3JUeXBlXG5cbiAgLyoqIHBvcHVwIOWxleekuuWtl+autSAqL1xuICBwb3B1cEF0dHI/OiBzdHJpbmdcbiAgLyoqIHRvb2x0aXAg5bGV56S65a2X5q61ICovXG4gIHRvb2x0aXBBdHRyPzogc3RyaW5nXG5cbiAgb3BhY2l0eT86IG51bWJlclxuXG4gIC8qKiDliIbmrrXmuLLmn5Pnu5/orqHlrZfmrrUgKi9cbiAgc2VnbWVudGVkQXR0cj86IHN0cmluZ1xuICBzZWdtZW50ZWRDb2xvcnM/OiBzdHJpbmdbXVxufVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9seWxpbmVzTGF5ZXIge1xuICBwdWJsaWMgdHlwZTogc3RyaW5nXG5cbiAgcHJvdGVjdGVkIHZpc2libGU6IGJvb2xlYW5cbiAgcHJvdGVjdGVkIGxheWVyOiBMLkxheWVyR3JvdXBcblxuICBwcm90ZWN0ZWQgbWFwOiBMLk1hcFxuICBwcm90ZWN0ZWQgZGF0YUxpc3Q6IERhdGFMaXN0SXRlbVtdXG4gIHByb3RlY3RlZCBvcHRpb25zOiBQb2x5bGluZUxheWVyT3B0aW9uc1xuICBwcm90ZWN0ZWQgY2hhbm5lbEZ1bmM6IENoYW5uZWxGdW5jXG4gIHByb3RlY3RlZCBwb2x5bGluZXM6IFBvbHlsaW5lW11cbiAgcHJvdGVjdGVkIHNlZ21lbnRlZE1pbjogbnVtYmVyXG4gIHByb3RlY3RlZCBzZWdtZW50ZWRTdGVwOiBudW1iZXJcbiAgLy8gcHJpdmF0ZSBmb2N1c2VkUG9seWxpbmU6IFBvbHlsaW5lXG4gIHByb3RlY3RlZCBwb2x5bGluZUxheWVyOiBMLkxheWVyR3JvdXBcbiAgY29uc3RydWN0b3IoXG4gICAgbWFwOiBMLk1hcCxcbiAgICBkYXRhTGlzdDogRGF0YUxpc3RJdGVtW10sXG4gICAgb3B0aW9uczogUG9seWxpbmVMYXllck9wdGlvbnMsXG4gICAgY2hhbm5lbEZ1bmM6IENoYW5uZWxGdW5jXG4gICkge1xuICAgIGNvbnN0IGRlZmF1bHRPcHRpb25zOiBQb2x5bGluZUxheWVyT3B0aW9ucyA9IHtcbiAgICAgIGNvbG9yOiAnIzMzODhGRicsXG4gICAgICByZW5kZXJQb2x5bGluZUNvbG9yVHlwZTogJ3NpbmdsZScsXG4gICAgICBzZWdtZW50ZWRDb2xvcnM6IFsnIzMzODhGRiddLFxuICAgIH1cbiAgICB0aGlzLnR5cGUgPSAncG9seWxpbmUnXG4gICAgdGhpcy5tYXAgPSBtYXBcbiAgICB0aGlzLmRhdGFMaXN0ID0gZGF0YUxpc3RcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgdGhpcy5jaGFubmVsRnVuYyA9IGNoYW5uZWxGdW5jXG5cbiAgICB0aGlzLnZpc2libGUgPSB0cnVlXG4gICAgdGhpcy5wb2x5bGluZXMgPSBbXVxuICAgIHRoaXMuc2VnbWVudGVkTWluID0gSW5maW5pdHlcbiAgICB0aGlzLnNlZ21lbnRlZFN0ZXAgPSAxXG4gICAgLy8gdGhpcy5mb2N1c2VkUG9seWxpbmUgPSBudWxsXG5cbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucywgb3B0aW9ucylcblxuICAgIHRoaXMuaW5pdFBvbHlsaW5lcygpXG4gIH1cbiAgcHVibGljIGRyYXcob3B0aW9ucz86IFBvbHlsaW5lTGF5ZXJPcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXG4gICAgcmV0dXJuIHRoaXMucmVkcmF3KClcbiAgfVxuICBwdWJsaWMgcmVkcmF3KCkge1xuICAgIGlmICghdGhpcy52aXNpYmxlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKHRoaXMubGF5ZXIpIHtcbiAgICAgIHRoaXMubGF5ZXIucmVtb3ZlKClcbiAgICB9XG4gICAgdGhpcy5sYXllciA9IHRoaXMuY29uZmlnUG9seWxpbmVMYXllcigpXG4gICAgdGhpcy5tYXAuYWRkTGF5ZXIodGhpcy5sYXllcilcbiAgICByZXR1cm4gdGhpc1xuICB9XG4gIHB1YmxpYyBmaXRCb3VuZHMoKSB7XG4gICAgdGhpcy5tYXAuZml0Qm91bmRzKHRoaXMuZ2V0Qm91bmRzKCkpXG4gIH1cbiAgcHVibGljIGdldEJvdW5kcygpOiBMLkxhdExuZ0JvdW5kc0V4cHJlc3Npb24ge1xuICAgIGlmICh0aGlzLnBvbHlsaW5lcy5sZW5ndGggPD0gMCkge1xuICAgICAgcmV0dXJuIHRoaXMubWFwLmdldEJvdW5kcygpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnBvbHlsaW5lcy5yZWR1Y2UoXG4gICAgICAocHJldiwgY3VycikgPT4gcHJldi5leHRlbmQoY3Vyci5nZXRCb3VuZHMoKSksXG4gICAgICB0aGlzLnBvbHlsaW5lc1swXS5nZXRCb3VuZHMoKVxuICAgIClcbiAgfVxuICBwdWJsaWMgZGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5sYXllcikge1xuICAgICAgdGhpcy5sYXllci5yZW1vdmUoKVxuICAgIH1cbiAgfVxuICBwdWJsaWMgdG9nZ2xlVmlzaWJsZSh2aXNpYmxlOiBib29sZWFuKSB7XG4gICAgdGhpcy52aXNpYmxlID0gdmlzaWJsZVxuICAgIGlmICghdGhpcy5sYXllcikge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh2aXNpYmxlKSB7XG4gICAgICB0aGlzLm1hcC5hZGRMYXllcih0aGlzLmxheWVyKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1hcC5yZW1vdmVMYXllcih0aGlzLmxheWVyKVxuICAgIH1cbiAgfVxuICBwdWJsaWMgY2hhbmdlQ29sb3IoY29sb3I6IHN0cmluZykge1xuICAgIHRoaXMub3B0aW9ucy5maWxsQ29sb3IgPSBjb2xvclxuICAgIHRoaXMucmVkcmF3KClcbiAgfVxuICBwdWJsaWMgcGl0Y2goaWQ6IHN0cmluZykge1xuICAgIHRoaXMucG9seWxpbmVzLmZvckVhY2goKHBvbHlsaW5lKSA9PiB7XG4gICAgICBpZiAocG9seWxpbmUuZ2V0RGF0YSgpLmlkID09PSBpZCkge1xuICAgICAgICBwb2x5bGluZS5maXJlKCdjbGljaycpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgIH0pXG4gIH1cbiAgcHJvdGVjdGVkIGluaXRQb2x5bGluZXMoKSB7XG4gICAgLy8g57yT5a2YIHNlZ21lbnQg55u45YWz5pWw5o2uXG4gICAgdGhpcy5jYWNoZVNlZ21lbnRQYXJhbXMoKVxuXG4gICAgdGhpcy5wb2x5bGluZXMgPSBbXVxuICAgIHRoaXMuZGF0YUxpc3QuZm9yRWFjaCgoZGF0YSkgPT4ge1xuICAgICAgY29uc3QgbGF5ZXIgPSBMLmdlb0pTT04oZGF0YS5nZW9tZXRyeSkuZ2V0TGF5ZXJzKClbMF1cbiAgICAgIGxldCBmaWxsQ29sb3IgPSB0aGlzLm9wdGlvbnMuZmlsbENvbG9yXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnJlbmRlclBvbHlsaW5lQ29sb3JUeXBlID09PSAnc2VnbWVudGVkJykge1xuICAgICAgICBmaWxsQ29sb3IgPSB0aGlzLmdldFNlZ21lbnRlZFBvbHlsaW5lQ29sb3IoZGF0YSlcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBvbHlsaW5lID0gbmV3IFBvbHlsaW5lKFxuICAgICAgICAobGF5ZXIgYXMgTC5Qb2x5bGluZSkuZ2V0TGF0TG5ncygpIGFzIFBvbHlsaW5lT3B0aW9ucyxcbiAgICAgICAgT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcHRpb25zLCB7IGZpbGxDb2xvciB9KVxuICAgICAgKVxuXG4gICAgICAvLyDlsIbnm7jlhbPlgLznu5HlrprliLAgbWFya2Vy5LiKXG4gICAgICBwb2x5bGluZS5zZXREYXRhKGRhdGEpXG5cbiAgICAgIHRoaXMucG9seWxpbmVzLnB1c2gocG9seWxpbmUpXG4gICAgfSlcbiAgfVxuICBwcm90ZWN0ZWQgZ2V0U2VnbWVudGVkUG9seWxpbmVDb2xvcihkYXRhOiBEYXRhTGlzdEl0ZW0pOiBzdHJpbmcge1xuICAgIGNvbnN0IHZhbCA9IGRhdGFbdGhpcy5vcHRpb25zLnNlZ21lbnRlZEF0dHJdXG4gICAgY29uc3QgY29sb3IgPSB0aGlzLm9wdGlvbnMuc2VnbWVudGVkQ29sb3JzW1xuICAgICAgcGFyc2VJbnQoJycgKyAodmFsIC0gdGhpcy5zZWdtZW50ZWRNaW4pIC8gdGhpcy5zZWdtZW50ZWRTdGVwLCAxMClcbiAgICBdXG4gICAgcmV0dXJuIGNvbG9yXG4gIH1cbiAgcHJvdGVjdGVkIHBvbHlsaW5lQ2xpY2tIYW5kbGVyKHBvbHlsaW5lOiBQb2x5bGluZSkge1xuICAgIC8vIHRoaXMuZm9jdXNlZFBvbHlsaW5lID0gcG9seWxpbmVcbiAgICB0aGlzLmNoYW5uZWxGdW5jKCdvbi1jbGljay1wb2x5bGluZScsIHBvbHlsaW5lKVxuICB9XG4gIHByb3RlY3RlZCBnZXRUb29sVGlwQ29udGVudChkYXRhOiBEYXRhTGlzdEl0ZW0pIHtcbiAgICByZXR1cm4gJycgKyBkYXRhW3RoaXMub3B0aW9ucy50b29sdGlwQXR0cl1cbiAgfVxuICBwcml2YXRlIGNvbmZpZ1BvbHlsaW5lTGF5ZXIoKSB7XG4gICAgdGhpcy5wb2x5bGluZUxheWVyID0gTC5sYXllckdyb3VwKClcbiAgICB0aGlzLnBvbHlsaW5lcy5mb3JFYWNoKChwb2x5bGluZSkgPT4ge1xuICAgICAgY29uc3Qgb3B0aW9uczogTC5Qb2x5bGluZU9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLm9wdGlvbnMsIHtcbiAgICAgICAgY29sb3I6IHRoaXMuZ2V0U2VnbWVudGVkUG9seWxpbmVDb2xvcihwb2x5bGluZS5nZXREYXRhKCkpLFxuICAgICAgfSlcbiAgICAgIGNvbnN0IG5ld1BvbHlsaW5lID0gbmV3IFBvbHlsaW5lKFxuICAgICAgICBwb2x5bGluZS5nZXRMYXRMbmdzKCkgYXMgUG9seWxpbmVPcHRpb25zLFxuICAgICAgICBvcHRpb25zXG4gICAgICApXG4gICAgICBuZXdQb2x5bGluZS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMucG9seWxpbmVDbGlja0hhbmRsZXIocG9seWxpbmUpXG4gICAgICB9KVxuICAgICAgbmV3UG9seWxpbmUuc2V0RGF0YShwb2x5bGluZS5nZXREYXRhKCkpXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnRvb2x0aXBBdHRyKSB7XG4gICAgICAgIG5ld1BvbHlsaW5lLmJpbmRUb29sdGlwKHRoaXMuZ2V0VG9vbFRpcENvbnRlbnQobmV3UG9seWxpbmUuZ2V0RGF0YSgpKSlcbiAgICAgIH1cbiAgICAgIHRoaXMucG9seWxpbmVMYXllci5hZGRMYXllcihuZXdQb2x5bGluZSlcbiAgICB9KVxuICAgIHJldHVybiB0aGlzLnBvbHlsaW5lTGF5ZXJcbiAgfVxuICBwcml2YXRlIGNhY2hlU2VnbWVudFBhcmFtcygpIHtcbiAgICBjb25zdCBzZWdtZW50ZWRMZW5ndGggPSB0aGlzLm9wdGlvbnMuc2VnbWVudGVkQ29sb3JzLmxlbmd0aFxuICAgIGxldCBtYXhWYWwgPSAtSW5maW5pdHlcbiAgICBsZXQgbWluVmFsID0gSW5maW5pdHlcbiAgICBmb3IgKGNvbnN0IGRhdGEgb2YgdGhpcy5kYXRhTGlzdCkge1xuICAgICAgY29uc3QgdmFsID0gZGF0YVt0aGlzLm9wdGlvbnMuc2VnbWVudGVkQXR0cl1cbiAgICAgIG1heFZhbCA9IE1hdGgubWF4KG1heFZhbCwgdmFsKVxuICAgICAgbWluVmFsID0gTWF0aC5taW4obWluVmFsLCB2YWwpXG4gICAgfVxuICAgIGNvbnN0IHN0ZXAgPSAobWF4VmFsIC0gbWluVmFsICsgMSkgLyBzZWdtZW50ZWRMZW5ndGhcbiAgICB0aGlzLnNlZ21lbnRlZE1pbiA9IG1pblZhbFxuICAgIHRoaXMuc2VnbWVudGVkU3RlcCA9IHN0ZXBcbiAgfVxufVxuIiwiaW1wb3J0IHsgRGF0YUxpc3RJdGVtLCBDaGFubmVsRnVuYyB9IGZyb20gJy4uL2RlZmluaXRpb25zJ1xuaW1wb3J0IFBvbHlsaW5lc0xheWVyIGZyb20gJy4vUG9seWxpbmVzTGF5ZXInXG5cbi8qKiDmuLLmn5PpopzoibLmoLflvI8g5Y2V6ImyfOWIhuautSAqL1xudHlwZSBQb2x5bGluZUxheWVyUmVuZGVyQ29sb3JUeXBlID0gJ3NpbmdsZScgfCAnc2VnbWVudGVkJ1xuaW50ZXJmYWNlIFBvbHlsaW5lQnVmZmVyTGF5ZXJPcHRpb25zIGV4dGVuZHMgTC5Db3JyaWRvck9wdGlvbnMge1xuICByZW5kZXJQb2x5bGluZUNvbG9yVHlwZTogUG9seWxpbmVMYXllclJlbmRlckNvbG9yVHlwZVxuXG4gIC8qKiBwb3B1cCDlsZXnpLrlrZfmrrUgKi9cbiAgcG9wdXBBdHRyPzogc3RyaW5nXG4gIC8qKiB0b29sdGlwIOWxleekuuWtl+autSAqL1xuICB0b29sdGlwQXR0cj86IHN0cmluZ1xuXG4gIG9wYWNpdHk/OiBudW1iZXJcblxuICAvKiog5YiG5q615riy5p+T57uf6K6h5a2X5q61ICovXG4gIHNlZ21lbnRlZEF0dHI/OiBzdHJpbmdcbiAgc2VnbWVudGVkQ29sb3JzPzogc3RyaW5nW11cbn1cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvbHlsaW5lc0J1ZmZlckxheWVyIGV4dGVuZHMgUG9seWxpbmVzTGF5ZXIge1xuICBwdWJsaWMgdHlwZTogc3RyaW5nXG4gIHByb3RlY3RlZCBvcHRpb25zOiBQb2x5bGluZUJ1ZmZlckxheWVyT3B0aW9uc1xuICBjb25zdHJ1Y3RvcihcbiAgICBtYXA6IEwuTWFwLFxuICAgIGRhdGFMaXN0OiBEYXRhTGlzdEl0ZW1bXSxcbiAgICBvcHRpb25zOiBQb2x5bGluZUJ1ZmZlckxheWVyT3B0aW9ucyxcbiAgICBjaGFubmVsRnVuYzogQ2hhbm5lbEZ1bmNcbiAgKSB7XG4gICAgc3VwZXIobWFwLCBkYXRhTGlzdCwgb3B0aW9ucywgY2hhbm5lbEZ1bmMpXG4gICAgY29uc3QgZGVmYXVsdE9wdGlvbnM6IFBvbHlsaW5lQnVmZmVyTGF5ZXJPcHRpb25zID0ge1xuICAgICAgcmVuZGVyUG9seWxpbmVDb2xvclR5cGU6ICdzaW5nbGUnLFxuICAgICAgc2VnbWVudGVkQ29sb3JzOiBbJyMzMzg4RkYnXSxcbiAgICAgIGNvcnJpZG9yOiAxMDAsXG4gICAgICBjb2xvcjogJyMzMzg4RkYnLFxuICAgICAgb3BhY2l0eTogMC41LFxuICAgIH1cbiAgICB0aGlzLnR5cGUgPSAncG9seWxpbmVCdWZmZXInXG4gICAgdGhpcy5tYXAgPSBtYXBcbiAgICB0aGlzLmRhdGFMaXN0ID0gZGF0YUxpc3RcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgdGhpcy5jaGFubmVsRnVuYyA9IGNoYW5uZWxGdW5jXG5cbiAgICB0aGlzLnZpc2libGUgPSB0cnVlXG4gICAgdGhpcy5wb2x5bGluZXMgPSBbXVxuICAgIHRoaXMuc2VnbWVudGVkTWluID0gSW5maW5pdHlcbiAgICB0aGlzLnNlZ21lbnRlZFN0ZXAgPSAxXG4gICAgLy8gdGhpcy5mb2N1c2VkUG9seWxpbmUgPSBudWxsXG5cbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucywgb3B0aW9ucylcbiAgICB0aGlzLmluaXRQb2x5bGluZXMoKVxuICB9XG4gIHB1YmxpYyBkcmF3KG9wdGlvbnM/OiBQb2x5bGluZUJ1ZmZlckxheWVyT3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKVxuICAgIHJldHVybiB0aGlzLnJlZHJhdygpXG4gIH1cbiAgcHVibGljIHJlZHJhdygpIHtcbiAgICBpZiAoIXRoaXMudmlzaWJsZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh0aGlzLmxheWVyKSB7XG4gICAgICB0aGlzLmxheWVyLnJlbW92ZSgpXG4gICAgfVxuICAgIHRoaXMubGF5ZXIgPSB0aGlzLmNvbmZpZ1BvbHlsaW5lQnVmZmVyTGF5ZXIoKVxuICAgIHRoaXMubWFwLmFkZExheWVyKHRoaXMubGF5ZXIpXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuICBwdWJsaWMgZml0Qm91bmRzKCkge1xuICAgIHRoaXMubWFwLmZpdEJvdW5kcyh0aGlzLmdldEJvdW5kcygpKVxuICB9XG4gIHB1YmxpYyBnZXRCb3VuZHMoKTogTC5MYXRMbmdCb3VuZHNFeHByZXNzaW9uIHtcbiAgICBpZiAodGhpcy5wb2x5bGluZXMubGVuZ3RoIDw9IDApIHtcbiAgICAgIHJldHVybiB0aGlzLm1hcC5nZXRCb3VuZHMoKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5wb2x5bGluZXMucmVkdWNlKFxuICAgICAgKHByZXYsIGN1cnIpID0+IHByZXYuZXh0ZW5kKGN1cnIuZ2V0Qm91bmRzKCkpLFxuICAgICAgdGhpcy5wb2x5bGluZXNbMF0uZ2V0Qm91bmRzKClcbiAgICApXG4gIH1cbiAgcHVibGljIGNoYW5nZUNvbG9yKGNvbG9yOiBzdHJpbmcpIHtcbiAgICB0aGlzLm9wdGlvbnMuY29sb3IgPSBjb2xvclxuICAgIHRoaXMucmVkcmF3KClcbiAgfVxuICBwcml2YXRlIGNvbmZpZ1BvbHlsaW5lQnVmZmVyTGF5ZXIoKSB7XG4gICAgdGhpcy5wb2x5bGluZUxheWVyID0gTC5sYXllckdyb3VwKClcbiAgICB0aGlzLnBvbHlsaW5lcy5mb3JFYWNoKChwb2x5bGluZSkgPT4ge1xuICAgICAgcG9seWxpbmUub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLnBvbHlsaW5lQ2xpY2tIYW5kbGVyKHBvbHlsaW5lKVxuICAgICAgfSlcbiAgICAgIGNvbnN0IG9wdGlvbnM6IFBvbHlsaW5lQnVmZmVyTGF5ZXJPcHRpb25zID0gT2JqZWN0LmFzc2lnbihcbiAgICAgICAge30sXG4gICAgICAgIHRoaXMub3B0aW9ucyxcbiAgICAgICAge1xuICAgICAgICAgIGNvbG9yOlxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnJlbmRlclBvbHlsaW5lQ29sb3JUeXBlID09PSAnc2luZ2xlJ1xuICAgICAgICAgICAgICA/IHRoaXMub3B0aW9ucy5jb2xvclxuICAgICAgICAgICAgICA6IHRoaXMuZ2V0U2VnbWVudGVkUG9seWxpbmVDb2xvcihwb2x5bGluZS5nZXREYXRhKCkpLFxuICAgICAgICB9XG4gICAgICApXG5cbiAgICAgIGNvbnN0IHBvbHlsaW5lQnVmZmVyID0gTC5jb3JyaWRvcihcbiAgICAgICAgKHBvbHlsaW5lLmdldExhdExuZ3MoKSBhcyBMLkxhdExuZ1tdKS5tYXAoKGxhdExuZykgPT5cbiAgICAgICAgICBMLmxhdExuZyhbbGF0TG5nLmxhdCwgbGF0TG5nLmxuZ10pXG4gICAgICAgICksXG4gICAgICAgIG9wdGlvbnNcbiAgICAgIClcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMudG9vbHRpcEF0dHIpIHtcbiAgICAgICAgcG9seWxpbmVCdWZmZXIuYmluZFRvb2x0aXAodGhpcy5nZXRUb29sVGlwQ29udGVudChwb2x5bGluZS5nZXREYXRhKCkpKVxuICAgICAgfVxuICAgICAgdGhpcy5wb2x5bGluZUxheWVyLmFkZExheWVyKHBvbHlsaW5lQnVmZmVyKVxuICAgIH0pXG4gICAgcmV0dXJuIHRoaXMucG9seWxpbmVMYXllclxuICB9XG59XG4iLCJpbXBvcnQgeyBEYXRhTGlzdEl0ZW0gfSBmcm9tICcuLi9kZWZpbml0aW9ucydcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9seWdvbiBleHRlbmRzIEwuUG9seWdvbiB7XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp2YXJpYWJsZS1uYW1lXG4gIHByaXZhdGUgX19kYXRhOiBEYXRhTGlzdEl0ZW1cbiAgY29uc3RydWN0b3IoXG4gICAgbGF0bG5nczpcbiAgICAgIHwgTC5MYXRMbmdFeHByZXNzaW9uW11cbiAgICAgIHwgTC5MYXRMbmdFeHByZXNzaW9uW11bXVxuICAgICAgfCBMLkxhdExuZ0V4cHJlc3Npb25bXVtdW10sXG4gICAgb3B0aW9ucz86IEwuUG9seWxpbmVPcHRpb25zXG4gICkge1xuICAgIHN1cGVyKGxhdGxuZ3MsIG9wdGlvbnMpXG4gIH1cbiAgcHVibGljIHNldERhdGEoZGF0YTogRGF0YUxpc3RJdGVtKSB7XG4gICAgdGhpcy5fX2RhdGEgPSBkYXRhXG4gIH1cbiAgcHVibGljIGdldERhdGEoKSB7XG4gICAgcmV0dXJuIHRoaXMuX19kYXRhXG4gIH1cbn1cbiIsImltcG9ydCB7IERhdGFMaXN0SXRlbSwgQ2hhbm5lbEZ1bmMgfSBmcm9tICcuLi9kZWZpbml0aW9ucydcbmltcG9ydCBQb2x5Z29uIGZyb20gJy4vUG9seWdvbidcblxuLyoqIOa4suafk+minOiJsuagt+W8jyDljZXoibJ85YiG5q61ICovXG50eXBlIFBvbHlnb25MYXllclJlbmRlckNvbG9yVHlwZSA9ICdzaW5nbGUnIHwgJ3NlZ21lbnRlZCdcbmludGVyZmFjZSBQb2x5Z29uTGF5ZXJPcHRpb25zIGV4dGVuZHMgTC5Qb2x5bGluZU9wdGlvbnMge1xuICByZW5kZXJQb2x5Z29uQ29sb3JUeXBlOiBQb2x5Z29uTGF5ZXJSZW5kZXJDb2xvclR5cGVcblxuICAvKiogcG9wdXAg5bGV56S65a2X5q61ICovXG4gIHBvcHVwQXR0cj86IHN0cmluZ1xuICAvKiogdG9vbHRpcCDlsZXnpLrlrZfmrrUgKi9cbiAgdG9vbHRpcEF0dHI/OiBzdHJpbmdcblxuICBvcGFjaXR5PzogbnVtYmVyXG5cbiAgLyoqIOWIhuautea4suafk+e7n+iuoeWtl+autSAqL1xuICBzZWdtZW50ZWRBdHRyPzogc3RyaW5nXG4gIHNlZ21lbnRlZENvbG9ycz86IHN0cmluZ1tdXG59XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb2x5Z29uc0xheWVyIHtcbiAgcHVibGljIHR5cGU6IHN0cmluZ1xuXG4gIHByb3RlY3RlZCB2aXNpYmxlOiBib29sZWFuXG4gIHByb3RlY3RlZCBsYXllcjogTC5MYXllckdyb3VwXG5cbiAgcHJpdmF0ZSBtYXA6IEwuTWFwXG4gIHByaXZhdGUgZGF0YUxpc3Q6IERhdGFMaXN0SXRlbVtdXG4gIHByaXZhdGUgb3B0aW9uczogUG9seWdvbkxheWVyT3B0aW9uc1xuICBwcml2YXRlIGNoYW5uZWxGdW5jOiBDaGFubmVsRnVuY1xuICBwcml2YXRlIHBvbHlnb25zOiBQb2x5Z29uW11cbiAgcHJpdmF0ZSBzZWdtZW50ZWRNaW46IG51bWJlclxuICBwcml2YXRlIHNlZ21lbnRlZFN0ZXA6IG51bWJlclxuICAvLyBwcml2YXRlIGZvY3VzZWRQb2x5Z29uOiBQb2x5Z29uXG4gIHByaXZhdGUgcG9seWdvbkxheWVyOiBMLkxheWVyR3JvdXBcblxuICBjb25zdHJ1Y3RvcihcbiAgICBtYXA6IEwuTWFwLFxuICAgIGRhdGFMaXN0OiBEYXRhTGlzdEl0ZW1bXSxcbiAgICBvcHRpb25zOiBQb2x5Z29uTGF5ZXJPcHRpb25zLFxuICAgIGNoYW5uZWxGdW5jOiBDaGFubmVsRnVuY1xuICApIHtcbiAgICBjb25zdCBkZWZhdWx0T3B0aW9uczogUG9seWdvbkxheWVyT3B0aW9ucyA9IHtcbiAgICAgIGNvbG9yOiAnIzMzODhGRicsXG4gICAgICBmaWxsQ29sb3I6ICcjMzM4OEZGJyxcbiAgICAgIHJlbmRlclBvbHlnb25Db2xvclR5cGU6ICdzaW5nbGUnLFxuICAgICAgc2VnbWVudGVkQ29sb3JzOiBbJyMzMzg4RkYnXSxcbiAgICB9XG4gICAgdGhpcy50eXBlID0gJ3BvbHlnb24nXG4gICAgdGhpcy5tYXAgPSBtYXBcbiAgICB0aGlzLmRhdGFMaXN0ID0gZGF0YUxpc3RcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgdGhpcy5jaGFubmVsRnVuYyA9IGNoYW5uZWxGdW5jXG5cbiAgICB0aGlzLnZpc2libGUgPSB0cnVlXG4gICAgdGhpcy5wb2x5Z29ucyA9IFtdXG4gICAgdGhpcy5zZWdtZW50ZWRNaW4gPSBJbmZpbml0eVxuICAgIHRoaXMuc2VnbWVudGVkU3RlcCA9IDFcbiAgICAvLyB0aGlzLmZvY3VzZWRQb2x5Z29uID0gbnVsbFxuXG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpXG5cbiAgICB0aGlzLmluaXRQb2x5Z29ucygpXG4gIH1cbiAgcHVibGljIGRyYXcob3B0aW9ucz86IFBvbHlnb25MYXllck9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucylcbiAgICByZXR1cm4gdGhpcy5yZWRyYXcoKVxuICB9XG4gIHB1YmxpYyByZWRyYXcoKSB7XG4gICAgaWYgKCF0aGlzLnZpc2libGUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodGhpcy5sYXllcikge1xuICAgICAgdGhpcy5sYXllci5yZW1vdmUoKVxuICAgIH1cbiAgICB0aGlzLmxheWVyID0gdGhpcy5jb25maWdQb2x5Z29uTGF5ZXIoKVxuICAgIHRoaXMubWFwLmFkZExheWVyKHRoaXMubGF5ZXIpXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuICBwdWJsaWMgZml0Qm91bmRzKCkge1xuICAgIHRoaXMubWFwLmZpdEJvdW5kcyh0aGlzLmdldEJvdW5kcygpKVxuICB9XG4gIHB1YmxpYyBnZXRCb3VuZHMoKTogTC5MYXRMbmdCb3VuZHNFeHByZXNzaW9uIHtcbiAgICBpZiAodGhpcy5wb2x5Z29ucy5sZW5ndGggPD0gMCkge1xuICAgICAgcmV0dXJuIHRoaXMubWFwLmdldEJvdW5kcygpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnBvbHlnb25zLnJlZHVjZShcbiAgICAgIChwcmV2LCBjdXJyKSA9PiBwcmV2LmV4dGVuZChjdXJyLmdldEJvdW5kcygpKSxcbiAgICAgIHRoaXMucG9seWdvbnNbMF0uZ2V0Qm91bmRzKClcbiAgICApXG4gIH1cbiAgcHVibGljIGRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMubGF5ZXIpIHtcbiAgICAgIHRoaXMubGF5ZXIucmVtb3ZlKClcbiAgICB9XG4gIH1cbiAgcHVibGljIHRvZ2dsZVZpc2libGUodmlzaWJsZTogYm9vbGVhbikge1xuICAgIHRoaXMudmlzaWJsZSA9IHZpc2libGVcbiAgICBpZiAoIXRoaXMubGF5ZXIpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodmlzaWJsZSkge1xuICAgICAgdGhpcy5tYXAuYWRkTGF5ZXIodGhpcy5sYXllcilcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcy5sYXllcilcbiAgICB9XG4gIH1cbiAgcHVibGljIGNoYW5nZUNvbG9yKGNvbG9yOiBzdHJpbmcpIHtcbiAgICB0aGlzLm9wdGlvbnMuZmlsbENvbG9yID0gY29sb3JcbiAgICB0aGlzLnJlZHJhdygpXG4gIH1cbiAgcHVibGljIHBpdGNoKGlkOiBzdHJpbmcpIHtcbiAgICB0aGlzLnBvbHlnb25zLmZvckVhY2goKHBvbHlnb24pID0+IHtcbiAgICAgIGlmIChwb2x5Z29uLmdldERhdGEoKS5pZCA9PT0gaWQpIHtcbiAgICAgICAgcG9seWdvbi5maXJlKCdjbGljaycpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgIH0pXG4gIH1cbiAgcHJvdGVjdGVkIGdldFRvb2xUaXBDb250ZW50KGRhdGE6IERhdGFMaXN0SXRlbSkge1xuICAgIHJldHVybiAnJyArIGRhdGFbdGhpcy5vcHRpb25zLnRvb2x0aXBBdHRyXVxuICB9XG4gIHByaXZhdGUgaW5pdFBvbHlnb25zKCkge1xuICAgIC8vIOe8k+WtmCBzZWdtZW50IOebuOWFs+aVsOaNrlxuICAgIHRoaXMuY2FjaGVTZWdtZW50UGFyYW1zKClcbiAgICB0aGlzLnBvbHlnb25zID0gW11cbiAgICB0aGlzLmRhdGFMaXN0LmZvckVhY2goKGRhdGEpID0+IHtcbiAgICAgIGNvbnN0IGxheWVyID0gTC5nZW9KU09OKGRhdGEuZ2VvbWV0cnkpLmdldExheWVycygpWzBdXG4gICAgICBjb25zdCBwb2x5Z29uID0gbmV3IFBvbHlnb24oKGxheWVyIGFzIEwuUG9seWdvbikuZ2V0TGF0TG5ncygpKVxuXG4gICAgICAvLyDlsIbnm7jlhbPlgLznu5HlrprliLAgbWFya2Vy5LiKXG4gICAgICBwb2x5Z29uLnNldERhdGEoZGF0YSlcblxuICAgICAgdGhpcy5wb2x5Z29ucy5wdXNoKHBvbHlnb24pXG4gICAgfSlcbiAgfVxuICBwcml2YXRlIGNvbmZpZ1BvbHlnb25MYXllcigpIHtcbiAgICB0aGlzLnBvbHlnb25MYXllciA9IEwubGF5ZXJHcm91cCgpXG4gICAgdGhpcy5wb2x5Z29ucy5mb3JFYWNoKChwb2x5Z29uKSA9PiB7XG4gICAgICBsZXQgY29sb3IgPSB0aGlzLm9wdGlvbnMuY29sb3JcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMucmVuZGVyUG9seWdvbkNvbG9yVHlwZSA9PT0gJ3NlZ21lbnRlZCcpIHtcbiAgICAgICAgY29sb3IgPSB0aGlzLmdldFNlZ21lbnRlZFBvbHlnb25Db2xvcihwb2x5Z29uLmdldERhdGEoKSlcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9wdGlvbnM6IEwuUG9seWxpbmVPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcHRpb25zLCB7XG4gICAgICAgIGNvbG9yLFxuICAgICAgfSlcbiAgICAgIC8vIOmHjeaWsOW6lOeUqCBvcHRpb25zXG4gICAgICBjb25zdCBuZXdQb2x5Z29uID0gbmV3IFBvbHlnb24ocG9seWdvbi5nZXRMYXRMbmdzKCksIG9wdGlvbnMpXG4gICAgICBuZXdQb2x5Z29uLnNldERhdGEocG9seWdvbi5nZXREYXRhKCkpXG4gICAgICBuZXdQb2x5Z29uLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5wb2x5Z29uQ2xpY2tIYW5kbGVyKHBvbHlnb24pXG4gICAgICB9KVxuICAgICAgaWYgKHRoaXMub3B0aW9ucy50b29sdGlwQXR0cikge1xuICAgICAgICBuZXdQb2x5Z29uLmJpbmRUb29sdGlwKHRoaXMuZ2V0VG9vbFRpcENvbnRlbnQobmV3UG9seWdvbi5nZXREYXRhKCkpKVxuICAgICAgfVxuXG4gICAgICB0aGlzLnBvbHlnb25MYXllci5hZGRMYXllcihuZXdQb2x5Z29uKVxuICAgIH0pXG4gICAgcmV0dXJuIHRoaXMucG9seWdvbkxheWVyXG4gIH1cbiAgcHJpdmF0ZSBwb2x5Z29uQ2xpY2tIYW5kbGVyKHBvbHlnb246IFBvbHlnb24pIHtcbiAgICAvLyB0aGlzLmZvY3VzZWRQb2x5Z29uID0gcG9seWdvblxuICAgIHRoaXMuY2hhbm5lbEZ1bmMoJ29uLWNsaWNrLXBvbHlnb24nLCBwb2x5Z29uKVxuICB9XG4gIHByaXZhdGUgY2FjaGVTZWdtZW50UGFyYW1zKCkge1xuICAgIGNvbnN0IHNlZ21lbnRlZExlbmd0aCA9IHRoaXMub3B0aW9ucy5zZWdtZW50ZWRDb2xvcnMubGVuZ3RoXG4gICAgbGV0IG1heFZhbCA9IC1JbmZpbml0eVxuICAgIGxldCBtaW5WYWwgPSBJbmZpbml0eVxuICAgIGZvciAoY29uc3QgZGF0YSBvZiB0aGlzLmRhdGFMaXN0KSB7XG4gICAgICBjb25zdCB2YWwgPSBkYXRhW3RoaXMub3B0aW9ucy5zZWdtZW50ZWRBdHRyXVxuICAgICAgbWF4VmFsID0gTWF0aC5tYXgobWF4VmFsLCB2YWwpXG4gICAgICBtaW5WYWwgPSBNYXRoLm1pbihtaW5WYWwsIHZhbClcbiAgICB9XG4gICAgY29uc3Qgc3RlcCA9IChtYXhWYWwgLSBtaW5WYWwgKyAxKSAvIHNlZ21lbnRlZExlbmd0aFxuICAgIHRoaXMuc2VnbWVudGVkTWluID0gbWluVmFsXG4gICAgdGhpcy5zZWdtZW50ZWRTdGVwID0gc3RlcFxuICB9XG4gIHByaXZhdGUgZ2V0U2VnbWVudGVkUG9seWdvbkNvbG9yKGRhdGE6IERhdGFMaXN0SXRlbSk6IHN0cmluZyB7XG4gICAgY29uc3QgdmFsID0gZGF0YVt0aGlzLm9wdGlvbnMuc2VnbWVudGVkQXR0cl1cbiAgICBjb25zdCBjb2xvciA9IHRoaXMub3B0aW9ucy5zZWdtZW50ZWRDb2xvcnNbXG4gICAgICBwYXJzZUludCgnJyArICh2YWwgLSB0aGlzLnNlZ21lbnRlZE1pbikgLyB0aGlzLnNlZ21lbnRlZFN0ZXAsIDEwKVxuICAgIF1cbiAgICByZXR1cm4gY29sb3JcbiAgfVxufVxuIiwiaW1wb3J0IE1hcmtlciBmcm9tICcuL21hcmtlci9NYXJrZXInXG5pbXBvcnQgTWFya2Vyc0xheWVyIGZyb20gJy4vbWFya2VyL01hcmtlcnNMYXllcidcbmltcG9ydCBNYXJrZXJzQnVmZmVyTGF5ZXIgZnJvbSAnLi9tYXJrZXIvTWFya2Vyc0J1ZmZlckxheWVyJ1xuaW1wb3J0IFBvbHlsaW5lIGZyb20gJy4vcG9seWxpbmUvUG9seWxpbmUnXG5pbXBvcnQgUG9seWxpbmVzTGF5ZXIgZnJvbSAnLi9wb2x5bGluZS9Qb2x5bGluZXNMYXllcidcbmltcG9ydCBQb2x5bGluZXNCdWZmZXJMYXllciBmcm9tICcuL3BvbHlsaW5lL1BvbHlsaW5lc0J1ZmZlckxheWVyJ1xuaW1wb3J0IFBvbHlnb24gZnJvbSAnLi9wb2x5Z29uL1BvbHlnb24nXG5pbXBvcnQgUG9seWdvbnNMYXllciBmcm9tICcuL3BvbHlnb24vUG9seWdvbnNMYXllcidcblxuZXhwb3J0IGRlZmF1bHQge1xuICBNYXJrZXIsXG4gIE1hcmtlcnNMYXllcixcbiAgTWFya2Vyc0J1ZmZlckxheWVyLFxuICBQb2x5bGluZSxcbiAgUG9seWxpbmVzTGF5ZXIsXG4gIFBvbHlsaW5lc0J1ZmZlckxheWVyLFxuICBQb2x5Z29uLFxuICBQb2x5Z29uc0xheWVyLFxufVxuZXhwb3J0IHtcbiAgTWFya2VyLFxuICBNYXJrZXJzTGF5ZXIsXG4gIE1hcmtlcnNCdWZmZXJMYXllcixcbiAgUG9seWxpbmUsXG4gIFBvbHlsaW5lc0xheWVyLFxuICBQb2x5bGluZXNCdWZmZXJMYXllcixcbiAgUG9seWdvbixcbiAgUG9seWdvbnNMYXllcixcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=