!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.leafletMap=e():t.leafletMap=e()}(window,function(){return function(t){var e={};function s(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);class i extends L.Marker{constructor(t,e){super(t,e)}setData(t){this.__data=t}getData(){return this.__data}}class o{constructor(t,e,s,i){this.type="marker",this.map=t,this.dataList=e,this.options=Object.assign({},{renderType:"point",renderPointColorType:"single",iconType:"unicode",iconSize:[20,20],iconClass:"iconfont",iconColor:"#3388FF",iconAnchor:[10,20],segmentedColors:["#3388FF"],heatOptions:{max:1,minOpacity:1}},s),this.channelFunc=i,this.visible=!0,this.layer=null,this.focusedMarker=null,this.hoveredMarker=null,this.focusedDisplayMarker=null,this.markers=[],this.markerLayer=null,this.heatLayer=null,this.clusterLayer=null,this.segmentedMin=1/0,this.segmentedStep=1,this.cacheSegmentParams(),this.initMarkers()}draw(t){return this.visible=!0,this.options=Object.assign(this.options,t),this.redraw()}redraw(){if(this.visible){switch(this.layer&&this.layer.remove(),this.options.renderType){case"point":this.layer=this.configMarkerLayer();break;case"cluster":this.layer=this.configClusterLayer();break;case"heat":this.layer=this.configHeatLayer();break;default:throw new Error(`renderType 不支持"${this.options.renderType}"`)}return this.map.addLayer(this.layer),this}}setOptions(t,e=!1){this.options=Object.assign(this.options,t),e&&this.redraw()}fitBounds(){this.map.fitBounds(this.getBounds())}getBounds(){return this.markers.length<=0?this.map.getBounds():this.markers.map(t=>[t.getLatLng().lat,t.getLatLng().lng])}destroy(){this.layer&&this.layer.remove()}toggleVisible(t){this.visible=t,this.layer&&(t?this.map.addLayer(this.layer):this.map.removeLayer(this.layer))}changeColor(t){this.options.iconColor=t,this.redraw()}changeIcon(t){this.options.iconUnicode=t,this.redraw()}pitch(t){this.markers.forEach(e=>{e.getData().id!==t||e.fire("click")})}configMarkerLayer(){this.markerLayer&&this.markerLayer.remove(),this.initMarkers();const t=L.canvasIconLayer({}).addTo(this.map);return t.addOnClickListener((t,[{data:e}])=>{this.markerClickHandler(e)}),t.addOnHoverListener((t,[{data:e}])=>{this.hoveredMarker&&this.hoveredMarker.closeTooltip(),this.hoveredMarker=e,this.hoveredMarker.getTooltip()?this.hoveredMarker.openTooltip():this.options.tooltipAttr&&this.hoveredMarker.bindTooltip(""+this.hoveredMarker.getData()[this.options.tooltipAttr])}),t.addMarkers(this.markers),this.map.on("zoomstart",()=>{this.visible&&("marker"===this.type?"point"===this.options.renderType&&this.map.removeLayer(this.markerLayer):this.map.removeLayer(this.markerLayer))}),this.map.on("zoomend",()=>{this.visible&&("marker"===this.type?"point"===this.options.renderType&&this.map.addLayer(this.markerLayer):this.map.addLayer(this.markerLayer))}),setTimeout(()=>{this.map.panTo(this.map.getCenter())}),this.markerLayer=t,this.markerLayer}getToolTipContent(t){return""+t[this.options.tooltipAttr]}initMarkers(){this.markers=[],this.dataList.forEach(t=>{const e=L.geoJSON(t.geometry).getLayers()[0],s=new i([e.getLatLng().lat,e.getLatLng().lng],{icon:this.getMarkerIcon(t)});s.setData(t),this.markers.push(s)})}markerClickHandler(t){this.focusedMarker=t,this.focusedDisplayMarker&&this.focusedDisplayMarker.removeFrom(this.map),this.focusedDisplayMarker=new i(t.getLatLng(),{icon:this.getLargerMarkerIcon(t.getData())}),this.focusedDisplayMarker.addTo(this.map),this.focusedDisplayMarker.bindPopup(this.getPopupContent(t.getData())).openPopup(),this.focusedDisplayMarker.on("popupclose",()=>{this.focusedDisplayMarker.remove()}),this.map.panTo(this.focusedMarker.getLatLng()),this.channelFunc("on-click-marker",t)}configClusterLayer(){return this.clusterLayer&&this.clusterLayer.remove(),this.clusterLayer=L.markerClusterGroup(),this.clusterLayer.addLayers(this.markers.map(t=>{const e=new i(t.getLatLng(),{icon:this.getMarkerIcon(t.getData())});return e.setData(t.getData()),e.bindTooltip(""+e.getData()[this.options.tooltipAttr]),e.on("click",()=>{this.markerClickHandler(e)}),e})),this.clusterLayer}configHeatLayer(){return this.heatLayer&&this.heatLayer.remove(),this.markers.forEach(t=>{const e=t.getLatLng(),s=this.options.heatOptions&&this.options.heatOptions.dimensionAttr;let i=s&&t.getData()[s]||this.options.heatOptions.max;"number"!=typeof i&&(i=this.options.heatOptions.max),t.setLatLng(L.latLng(e.lat,e.lng,i))}),this.heatLayer=L.heatLayer(this.markers.map(t=>t.getLatLng()),Object.assign({},this.options.heatOptions,{minOpacity:1})),this.heatLayer}getLargerMarkerIcon(t){return this._getMarkerIcon(t,!0)}getMarkerIcon(t){return this._getMarkerIcon(t,!1)}_getMarkerIcon(t,e){const s=this.options.iconSize,i=this.options.iconAnchor,o=[1.5*s[0],1.5*s[1]],r=[1.5*i[0],1.5*i[1]],n=this.options.iconColor;switch(this.options.iconType){case"image":case"font_class":case"symbol":case"unicode":return L.divIcon({html:this.getCustomIconHTML(t,{iconSize:e?o:s,iconColor:n}),className:e?"large-div-icon-marker":"",iconSize:e?o:s,iconAnchor:e?r:i});default:throw new Error(`图标类型不支持"${this.options.iconType}"`)}}getCustomIconHTML(t,e){if(this.options.iconRenderer)return e=Object.assign({},this.options,e),this.options.iconRenderer(t,e);switch(this.options.renderPointColorType){case"single":switch(this.options.iconType){case"font_class":return`\n              <i class="${this.options.iconClass}"\n                style="\n                  color: ${e.iconColor};\n                  font-size: ${e.iconSize[0]}px;\n                "\n                />\n            `;case"symbol":return`\n              <svg class="icon-symbol" aria-hidden="true">\n                <use xlink:href="${this.options.iconSymbol}" />\n              </svg>\n            `;case"unicode":return`\n              <i\n                class="${this.options.iconClass}"\n                style="\n                  color: ${e.iconColor};\n                  font-size: ${e.iconSize[0]}px;\n                "\n                >\n                ${this.options.iconUnicode}\n              </i>\n            `}break;case"segmented":switch(this.options.iconType){case"font_class":return`\n              <i\n                class="${this.options.iconClass}"\n                style="\n                  color: ${this.getSegmentedMarkerColor(t)};\n                  font-size: ${e.iconSize[0]}px;\n                "\n                />\n            `;case"symbol":return`\n              <svg class="icon-symbol" aria-hidden="true">\n                <use xlink:href="${this.options.iconSymbol}" />\n              </svg>\n            `;case"unicode":return`\n              <i\n                class="${this.options.iconClass}"\n                style="\n                  color: ${this.getSegmentedMarkerColor(t)};\n                  font-size: ${e.iconSize[0]}px;\n                "\n                >\n                ${this.options.iconUnicode}\n              </i>\n            `}break;default:throw new Error(`renderPointColorType 不支持"${this.options.renderPointColorType}"`)}}cacheSegmentParams(){const t=this.options.segmentedColors.length;let e=-1/0,s=1/0;for(const t of this.dataList){const i=t[this.options.segmentedAttr];e=Math.max(e,i),s=Math.min(s,i)}const i=(e-s+1)/t;this.segmentedMin=s,this.segmentedStep=i}getSegmentedMarkerColor(t){const e=t[this.options.segmentedAttr];return this.options.segmentedColors[(e-this.segmentedMin)/this.segmentedStep]}getPopupContent(t){return this.options.popupAttr?`${this.options.popupAttr}: ${t[this.options.popupAttr]}`:""}}class r extends o{constructor(t,e,s,i){super(t,e,s,i),this.type="markerBuffer";this.options=Object.assign(this.options,{bufferOptions:{radius:1e3,stroke:!0,weight:1}},s)}draw(t){return this.options=Object.assign(this.options,t),this.redraw()}redraw(){if(this.visible)return this.markerLayer&&this.map.removeLayer(this.markerLayer),this.bufferLayer&&this.map.removeLayer(this.bufferLayer),this.markerLayer=this.configMarkerLayer(),this.bufferLayer=this.configBufferLayer(),this.map.addLayer(this.markerLayer),this.map.addLayer(this.bufferLayer),this}configBufferLayer(){const t=L.layerGroup();return this.markers.forEach(e=>{const s=L.circle(e.getLatLng(),this.options.bufferOptions);this.options.bufferTooltipAttr&&s.bindTooltip(""+e.getData()[this.options.bufferTooltipAttr]),t.addLayer(s)}),t}}class n extends L.Polyline{constructor(t,e){super(t,e)}setData(t){this.__data=t}getData(){return this.__data}}class a{constructor(t,e,s,i){this.type="polyline",this.map=t,this.dataList=e,this.options=s,this.channelFunc=i,this.visible=!0,this.polylines=[],this.segmentedMin=1/0,this.segmentedStep=1,this.options=Object.assign({},{color:"#3388FF",renderPolylineColorType:"single",segmentedColors:["#3388FF"]},s),this.cacheSegmentParams(),this.initPolylines()}draw(t){return this.options=Object.assign(this.options,t),this.redraw()}redraw(){if(this.visible)return this.layer&&this.layer.remove(),this.layer=this.configPolylineLayer(),this.map.addLayer(this.layer),this}fitBounds(){this.map.fitBounds(this.getBounds())}getBounds(){return this.polylines.length<=0?this.map.getBounds():this.polylines.reduce((t,e)=>t.extend(e.getBounds()),this.polylines[0].getBounds())}destroy(){this.layer&&this.layer.remove()}toggleVisible(t){this.visible=t,this.layer&&(t?this.map.addLayer(this.layer):this.map.removeLayer(this.layer))}changeColor(t){this.options.fillColor=t,this.redraw()}pitch(t){this.polylines.forEach(e=>{e.getData().id!==t||e.fire("click")})}initPolylines(){this.dataList.forEach(t=>{this.cacheSegmentParams();const e=L.geoJSON(t.geometry).getLayers()[0];let s=this.options.fillColor;"segmented"===this.options.renderPolylineColorType&&(s=this.getSegmentedPolylineColor(t));const i=new n(e.getLatLngs(),Object.assign({},this.options,{fillColor:s}));i.setData(t),this.polylines.push(i)})}getSegmentedPolylineColor(t){const e=t[this.options.segmentedAttr];return this.options.segmentedColors[(e-this.segmentedMin)/this.segmentedStep]}polylineClickHandler(t){this.channelFunc("on-click-polyline",t)}getToolTipContent(t){return""+t[this.options.tooltipAttr]}configPolylineLayer(){return this.polylineLayer=L.layerGroup(),this.polylines.forEach(t=>{const e=Object.assign({},this.options,{color:this.getSegmentedPolylineColor(t.getData())}),s=new n(t.getLatLngs(),e);s.on("click",()=>{this.polylineClickHandler(t)}),s.setData(t.getData()),this.options.tooltipAttr&&s.bindTooltip(this.getToolTipContent(s.getData())),this.polylineLayer.addLayer(s)}),this.polylineLayer}cacheSegmentParams(){const t=this.options.segmentedColors.length;let e=-1/0,s=1/0;for(const t of this.dataList){const i=t[this.options.segmentedAttr];e=Math.max(e,i),s=Math.min(s,i)}const i=(e-s+1)/t;this.segmentedMin=s,this.segmentedStep=i}}class h extends a{constructor(t,e,s,i){super(t,e,s,i);this.type="polylineBuffer",this.map=t,this.dataList=e,this.options=s,this.channelFunc=i,this.visible=!0,this.polylines=[],this.segmentedMin=1/0,this.segmentedStep=1,this.options=Object.assign({},{renderPolylineColorType:"single",segmentedColors:["#3388FF"],corridor:100,color:"#3388FF",opacity:.5},s),this.initPolylines()}draw(t){return this.options=Object.assign(this.options,t),this.redraw()}redraw(){if(this.visible)return this.layer&&this.layer.remove(),this.layer=this.configPolylineBufferLayer(),this.map.addLayer(this.layer),this}fitBounds(){this.map.fitBounds(this.getBounds())}getBounds(){return this.polylines.length<=0?this.map.getBounds():this.polylines.reduce((t,e)=>t.extend(e.getBounds()),this.polylines[0].getBounds())}changeColor(t){this.options.color=t,this.redraw()}configPolylineBufferLayer(){return this.polylineLayer=L.layerGroup(),this.polylines.forEach(t=>{t.on("click",()=>{this.polylineClickHandler(t)});const e=Object.assign({},this.options,{color:"single"===this.options.renderPolylineColorType?this.options.color:this.getSegmentedPolylineColor(t.getData())}),s=L.corridor(t.getLatLngs().map(t=>L.latLng([t.lat,t.lng])),e);this.options.tooltipAttr&&s.bindTooltip(this.getToolTipContent(t.getData())),this.polylineLayer.addLayer(s)}),this.polylineLayer}}class l extends L.Polygon{constructor(t,e){super(t,e)}setData(t){this.__data=t}getData(){return this.__data}}class c{constructor(t,e,s,i){this.type="polygon",this.map=t,this.dataList=e,this.options=s,this.channelFunc=i,this.visible=!0,this.polygons=[],this.segmentedMin=1/0,this.segmentedStep=1,this.options=Object.assign({},{color:"#3388FF",fillColor:"#3388FF",renderPolygonColorType:"single",segmentedColors:["#3388FF"]},s),this.cacheSegmentParams(),this.initPolygons()}draw(t){return this.options=Object.assign(this.options,t),this.redraw()}redraw(){if(this.visible)return this.layer&&this.layer.remove(),this.layer=this.configPolygonLayer(),this.map.addLayer(this.layer),this}fitBounds(){this.map.fitBounds(this.getBounds())}getBounds(){return this.polygons.length<=0?this.map.getBounds():this.polygons.reduce((t,e)=>t.extend(e.getBounds()),this.polygons[0].getBounds())}destroy(){this.layer&&this.layer.remove()}toggleVisible(t){this.visible=t,this.layer&&(t?this.map.addLayer(this.layer):this.map.removeLayer(this.layer))}changeColor(t){this.options.fillColor=t,this.redraw()}pitch(t){this.polygons.forEach(e=>{e.getData().id!==t||e.fire("click")})}getToolTipContent(t){return""+t[this.options.tooltipAttr]}initPolygons(){this.dataList.forEach(t=>{this.cacheSegmentParams();const e=L.geoJSON(t.geometry).getLayers()[0],s=new l(e.getLatLngs());s.setData(t),this.polygons.push(s)})}configPolygonLayer(){return this.polygonLayer=L.layerGroup(),this.polygons.forEach(t=>{let e=this.options.color;"segmented"===this.options.renderPolygonColorType&&(e=this.getSegmentedPolygonColor(t.getData()));const s=Object.assign({},this.options,{color:e}),i=new l(t.getLatLngs(),s);i.setData(t.getData()),i.on("click",()=>{this.polygonClickHandler(t)}),this.options.tooltipAttr&&i.bindTooltip(this.getToolTipContent(i.getData())),this.polygonLayer.addLayer(i)}),this.polygonLayer}polygonClickHandler(t){this.channelFunc("on-click-polygon",t)}cacheSegmentParams(){const t=this.options.segmentedColors.length;let e=-1/0,s=1/0;for(const t of this.dataList){const i=t[this.options.segmentedAttr];e=Math.max(e,i),s=Math.min(s,i)}const i=(e-s+1)/t;this.segmentedMin=s,this.segmentedStep=i}getSegmentedPolygonColor(t){const e=t[this.options.segmentedAttr];return this.options.segmentedColors[(e-this.segmentedMin)/this.segmentedStep]}}s.d(e,"Marker",function(){return i}),s.d(e,"MarkersLayer",function(){return o}),s.d(e,"MarkersBufferLayer",function(){return r}),s.d(e,"Polyline",function(){return n}),s.d(e,"PolylinesLayer",function(){return a}),s.d(e,"PolylinesBufferLayer",function(){return h}),s.d(e,"Polygon",function(){return l}),s.d(e,"PolygonsLayer",function(){return c});e.default={Marker:i,MarkersLayer:o,MarkersBufferLayer:r,Polyline:n,PolylinesLayer:a,PolylinesBufferLayer:h,Polygon:l,PolygonsLayer:c}}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFmbGV0TWFwL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9sZWFmbGV0TWFwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2xlYWZsZXRNYXAvLi9zcmMvbWFya2VyL01hcmtlci50cyIsIndlYnBhY2s6Ly9sZWFmbGV0TWFwLy4vc3JjL21hcmtlci9NYXJrZXJzTGF5ZXIudHMiLCJ3ZWJwYWNrOi8vbGVhZmxldE1hcC8uL3NyYy9tYXJrZXIvTWFya2Vyc0J1ZmZlckxheWVyLnRzIiwid2VicGFjazovL2xlYWZsZXRNYXAvLi9zcmMvcG9seWxpbmUvUG9seWxpbmUudHMiLCJ3ZWJwYWNrOi8vbGVhZmxldE1hcC8uL3NyYy9wb2x5bGluZS9Qb2x5bGluZXNMYXllci50cyIsIndlYnBhY2s6Ly9sZWFmbGV0TWFwLy4vc3JjL3BvbHlsaW5lL1BvbHlsaW5lc0J1ZmZlckxheWVyLnRzIiwid2VicGFjazovL2xlYWZsZXRNYXAvLi9zcmMvcG9seWdvbi9Qb2x5Z29uLnRzIiwid2VicGFjazovL2xlYWZsZXRNYXAvLi9zcmMvcG9seWdvbi9Qb2x5Z29uc0xheWVyLnRzIiwid2VicGFjazovL2xlYWZsZXRNYXAvLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwid2luZG93IiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIk1hcmtlciIsIkwiLCJbb2JqZWN0IE9iamVjdF0iLCJsYXRsbmciLCJvcHRpb25zIiwic3VwZXIiLCJkYXRhIiwidGhpcyIsIl9fZGF0YSIsIk1hcmtlcnNMYXllcl9NYXJrZXJzTGF5ZXIiLCJtYXAiLCJkYXRhTGlzdCIsImNoYW5uZWxGdW5jIiwidHlwZSIsImFzc2lnbiIsInJlbmRlclR5cGUiLCJyZW5kZXJQb2ludENvbG9yVHlwZSIsImljb25UeXBlIiwiaWNvblNpemUiLCJpY29uQ2xhc3MiLCJpY29uQ29sb3IiLCJpY29uQW5jaG9yIiwic2VnbWVudGVkQ29sb3JzIiwiaGVhdE9wdGlvbnMiLCJtYXgiLCJtaW5PcGFjaXR5IiwidmlzaWJsZSIsImxheWVyIiwiZm9jdXNlZE1hcmtlciIsImhvdmVyZWRNYXJrZXIiLCJmb2N1c2VkRGlzcGxheU1hcmtlciIsIm1hcmtlcnMiLCJtYXJrZXJMYXllciIsImhlYXRMYXllciIsImNsdXN0ZXJMYXllciIsInNlZ21lbnRlZE1pbiIsIkluZmluaXR5Iiwic2VnbWVudGVkU3RlcCIsImNhY2hlU2VnbWVudFBhcmFtcyIsImluaXRNYXJrZXJzIiwicmVkcmF3IiwicmVtb3ZlIiwiY29uZmlnTWFya2VyTGF5ZXIiLCJjb25maWdDbHVzdGVyTGF5ZXIiLCJjb25maWdIZWF0TGF5ZXIiLCJFcnJvciIsImFkZExheWVyIiwiZml0Qm91bmRzIiwiZ2V0Qm91bmRzIiwibGVuZ3RoIiwibWFya2VyIiwiZ2V0TGF0TG5nIiwibGF0IiwibG5nIiwicmVtb3ZlTGF5ZXIiLCJjb2xvciIsImljb25Vbmljb2RlIiwiaWQiLCJmb3JFYWNoIiwiZ2V0RGF0YSIsImZpcmUiLCJjYW52YXNJY29uTGF5ZXIiLCJhZGRUbyIsImFkZE9uQ2xpY2tMaXN0ZW5lciIsIl8iLCJtYXJrZXJDbGlja0hhbmRsZXIiLCJhZGRPbkhvdmVyTGlzdGVuZXIiLCJjbG9zZVRvb2x0aXAiLCJnZXRUb29sdGlwIiwib3BlblRvb2x0aXAiLCJ0b29sdGlwQXR0ciIsImJpbmRUb29sdGlwIiwiYWRkTWFya2VycyIsIm9uIiwic2V0VGltZW91dCIsInBhblRvIiwiZ2V0Q2VudGVyIiwiZ2VvSlNPTiIsImdlb21ldHJ5IiwiZ2V0TGF5ZXJzIiwiaWNvbiIsImdldE1hcmtlckljb24iLCJzZXREYXRhIiwicHVzaCIsInJlbW92ZUZyb20iLCJnZXRMYXJnZXJNYXJrZXJJY29uIiwiYmluZFBvcHVwIiwiZ2V0UG9wdXBDb250ZW50Iiwib3BlblBvcHVwIiwibWFya2VyQ2x1c3Rlckdyb3VwIiwiYWRkTGF5ZXJzIiwibGF0TG5nIiwiZGltZW5zaW9uQXR0ciIsImFsdCIsInNldExhdExuZyIsIml0IiwiX2dldE1hcmtlckljb24iLCJpc0xhcmdlciIsImxhcmdlckljb25TaXplIiwibGFyZ2VySWNvbkFuY2hvciIsImRpdkljb24iLCJodG1sIiwiZ2V0Q3VzdG9tSWNvbkhUTUwiLCJjbGFzc05hbWUiLCJpY29uUmVuZGVyZXIiLCJpY29uU3ltYm9sIiwiZ2V0U2VnbWVudGVkTWFya2VyQ29sb3IiLCJzZWdtZW50ZWRMZW5ndGgiLCJtYXhWYWwiLCJtaW5WYWwiLCJ2YWwiLCJzZWdtZW50ZWRBdHRyIiwiTWF0aCIsIm1pbiIsInN0ZXAiLCJwb3B1cEF0dHIiLCJNYXJrZXJzQnVmZmVyTGF5ZXJfTWFya2Vyc0J1ZmZlckxheWVyIiwiYnVmZmVyT3B0aW9ucyIsInJhZGl1cyIsInN0cm9rZSIsIndlaWdodCIsImJ1ZmZlckxheWVyIiwiY29uZmlnQnVmZmVyTGF5ZXIiLCJncm91cExheWVyIiwibGF5ZXJHcm91cCIsImNpcmNsZUxheWVyIiwiY2lyY2xlIiwiYnVmZmVyVG9vbHRpcEF0dHIiLCJQb2x5bGluZSIsImxhdGxuZ3MiLCJQb2x5bGluZXNMYXllcl9Qb2x5bGluZXNMYXllciIsInBvbHlsaW5lcyIsInJlbmRlclBvbHlsaW5lQ29sb3JUeXBlIiwiaW5pdFBvbHlsaW5lcyIsImNvbmZpZ1BvbHlsaW5lTGF5ZXIiLCJyZWR1Y2UiLCJwcmV2IiwiY3VyciIsImV4dGVuZCIsImZpbGxDb2xvciIsInBvbHlsaW5lIiwiZ2V0U2VnbWVudGVkUG9seWxpbmVDb2xvciIsImdldExhdExuZ3MiLCJwb2x5bGluZUxheWVyIiwibmV3UG9seWxpbmUiLCJwb2x5bGluZUNsaWNrSGFuZGxlciIsImdldFRvb2xUaXBDb250ZW50IiwiUG9seWxpbmVzQnVmZmVyTGF5ZXJfUG9seWxpbmVzQnVmZmVyTGF5ZXIiLCJjb3JyaWRvciIsIm9wYWNpdHkiLCJjb25maWdQb2x5bGluZUJ1ZmZlckxheWVyIiwicG9seWxpbmVCdWZmZXIiLCJQb2x5Z29uIiwiUG9seWdvbnNMYXllcl9Qb2x5Z29uc0xheWVyIiwicG9seWdvbnMiLCJyZW5kZXJQb2x5Z29uQ29sb3JUeXBlIiwiaW5pdFBvbHlnb25zIiwiY29uZmlnUG9seWdvbkxheWVyIiwicG9seWdvbiIsInBvbHlnb25MYXllciIsImdldFNlZ21lbnRlZFBvbHlnb25Db2xvciIsIm5ld1BvbHlnb24iLCJwb2x5Z29uQ2xpY2tIYW5kbGVyIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsIk1hcmtlcnNMYXllciIsIk1hcmtlcnNCdWZmZXJMYXllciIsIlBvbHlsaW5lc0xheWVyIiwiUG9seWxpbmVzQnVmZmVyTGF5ZXIiLCJQb2x5Z29uc0xheWVyIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGlCQUFBQyxTQUFBLGlCQUFBQyxPQUNBQSxPQUFBRCxRQUFBRCxJQUNBLG1CQUFBRyxlQUFBQyxJQUNBRCxVQUFBSCxHQUNBLGlCQUFBQyxRQUNBQSxRQUFBLFdBQUFELElBRUFELEVBQUEsV0FBQUMsSUFSQSxDQVNDSyxPQUFBLFdBQ0QsbUJDVEEsSUFBQUMsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQVAsUUFHQSxJQUFBQyxFQUFBSSxFQUFBRSxJQUNBQyxFQUFBRCxFQUNBRSxHQUFBLEVBQ0FULFlBVUEsT0FOQVUsRUFBQUgsR0FBQUksS0FBQVYsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQU0sR0FHQUwsRUFBQVEsR0FBQSxFQUdBUixFQUFBRCxRQTBEQSxPQXJEQU0sRUFBQU0sRUFBQUYsRUFHQUosRUFBQU8sRUFBQVIsRUFHQUMsRUFBQVEsRUFBQSxTQUFBZCxFQUFBZSxFQUFBQyxHQUNBVixFQUFBVyxFQUFBakIsRUFBQWUsSUFDQUcsT0FBQUMsZUFBQW5CLEVBQUFlLEdBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDVixFQUFBZ0IsRUFBQSxTQUFBdEIsR0FDQSxvQkFBQXVCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFuQixFQUFBdUIsT0FBQUMsYUFBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFuQixFQUFBLGNBQWlEeUIsT0FBQSxLQVFqRG5CLEVBQUFvQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBbkIsRUFBQW1CLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFBLE1BR0EsR0FGQXhCLEVBQUFnQixFQUFBTyxHQUNBWCxPQUFBQyxlQUFBVSxFQUFBLFdBQXlDVCxZQUFBLEVBQUFLLFVBQ3pDLEVBQUFFLEdBQUEsaUJBQUFGLEVBQUEsUUFBQU0sS0FBQU4sRUFBQW5CLEVBQUFRLEVBQUFlLEVBQUFFLEVBQUEsU0FBQUEsR0FBZ0gsT0FBQU4sRUFBQU0sSUFBcUJDLEtBQUEsS0FBQUQsSUFDckksT0FBQUYsR0FJQXZCLEVBQUEyQixFQUFBLFNBQUFoQyxHQUNBLElBQUFlLEVBQUFmLEtBQUEyQixXQUNBLFdBQTJCLE9BQUEzQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFLLEVBQUFRLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVYsRUFBQVcsRUFBQSxTQUFBaUIsRUFBQUMsR0FBc0QsT0FBQWpCLE9BQUFrQixVQUFBQyxlQUFBMUIsS0FBQXVCLEVBQUFDLElBR3REN0IsRUFBQWdDLEVBQUEsR0FJQWhDLElBQUFpQyxFQUFBLCtDQ2hGcUJDLFVBQWVDLEVBQUVELE9BR3BDRSxZQUFZQyxFQUE0QkMsR0FDdENDLE1BQU1GLEVBQVFDLEdBRVRGLFFBQVFJLEdBQ2JDLEtBQUtDLE9BQVNGLEVBRVRKLFVBQ0wsT0FBT0ssS0FBS0MsY0MyQ0tDLEVBMkJuQlAsWUFDRVEsRUFDQUMsRUFDQVAsRUFDQVEsR0FnQkFMLEtBQUtNLEtBQU8sU0FDWk4sS0FBS0csSUFBTUEsRUFDWEgsS0FBS0ksU0FBV0EsRUFDaEJKLEtBQUtILFFBQVUxQixPQUFPb0MsV0FoQnBCQyxXQUFZLFFBQ1pDLHFCQUFzQixTQUN0QkMsU0FBVSxVQUNWQyxVQUFXLEdBQUksSUFDZkMsVUFBVyxXQUNYQyxVQUFXLFVBQ1hDLFlBQWEsR0FBSSxJQUNqQkMsaUJBQWtCLFdBQ2xCQyxhQUNFQyxJQUFLLEVBQ0xDLFdBQVksSUFNaUNyQixHQUNqREcsS0FBS0ssWUFBY0EsRUFFbkJMLEtBQUttQixTQUFVLEVBQ2ZuQixLQUFLb0IsTUFBUSxLQUNicEIsS0FBS3FCLGNBQWdCLEtBQ3JCckIsS0FBS3NCLGNBQWdCLEtBQ3JCdEIsS0FBS3VCLHFCQUF1QixLQUM1QnZCLEtBQUt3QixXQUNMeEIsS0FBS3lCLFlBQWMsS0FDbkJ6QixLQUFLMEIsVUFBWSxLQUNqQjFCLEtBQUsyQixhQUFlLEtBRXBCM0IsS0FBSzRCLGFBQWVDLElBQ3BCN0IsS0FBSzhCLGNBQWdCLEVBR3JCOUIsS0FBSytCLHFCQUNML0IsS0FBS2dDLGNBRUFyQyxLQUFLRSxHQUdWLE9BRkFHLEtBQUttQixTQUFVLEVBQ2ZuQixLQUFLSCxRQUFVMUIsT0FBT29DLE9BQU9QLEtBQUtILFFBQVNBLEdBQ3BDRyxLQUFLaUMsU0FFUHRDLFNBQ0wsR0FBS0ssS0FBS21CLFFBQVYsQ0FNQSxPQUhJbkIsS0FBS29CLE9BQ1BwQixLQUFLb0IsTUFBTWMsU0FFTGxDLEtBQUtILFFBQVFXLFlBQ25CLElBQUssUUFDSFIsS0FBS29CLE1BQVFwQixLQUFLbUMsb0JBQ2xCLE1BRUYsSUFBSyxVQUNIbkMsS0FBS29CLE1BQVFwQixLQUFLb0MscUJBQ2xCLE1BRUYsSUFBSyxPQUNIcEMsS0FBS29CLE1BQVFwQixLQUFLcUMsa0JBQ2xCLE1BRUYsUUFDRSxNQUFNLElBQUlDLHdCQUF3QnRDLEtBQUtILFFBQVFXLGVBSW5ELE9BREFSLEtBQUtHLElBQUlvQyxTQUFTdkMsS0FBS29CLE9BQ2hCcEIsTUFFRkwsV0FBV0UsRUFBOEJvQyxHQUFTLEdBQ3ZEakMsS0FBS0gsUUFBVTFCLE9BQU9vQyxPQUFPUCxLQUFLSCxRQUFTQSxHQUN2Q29DLEdBQ0ZqQyxLQUFLaUMsU0FHRnRDLFlBQ0xLLEtBQUtHLElBQUlxQyxVQUFVeEMsS0FBS3lDLGFBRW5COUMsWUFDTCxPQUFJSyxLQUFLd0IsUUFBUWtCLFFBQVUsRUFDbEIxQyxLQUFLRyxJQUFJc0MsWUFFWHpDLEtBQUt3QixRQUFRckIsSUFDakJ3QyxJQUNFQSxFQUFPQyxZQUFZQyxJQUFLRixFQUFPQyxZQUFZRSxNQUczQ25ELFVBRURLLEtBQUtvQixPQUNQcEIsS0FBS29CLE1BQU1jLFNBR1J2QyxjQUFjd0IsR0FDbkJuQixLQUFLbUIsUUFBVUEsRUFDVm5CLEtBQUtvQixRQUdORCxFQUNGbkIsS0FBS0csSUFBSW9DLFNBQVN2QyxLQUFLb0IsT0FFdkJwQixLQUFLRyxJQUFJNEMsWUFBWS9DLEtBQUtvQixRQUd2QnpCLFlBQVlxRCxHQUNqQmhELEtBQUtILFFBQVFnQixVQUFZbUMsRUFDekJoRCxLQUFLaUMsU0FFQXRDLFdBQVdzRCxHQUNoQmpELEtBQUtILFFBQVFvRCxZQUFjQSxFQUMzQmpELEtBQUtpQyxTQUVBdEMsTUFBTXVELEdBQ1hsRCxLQUFLd0IsUUFBUTJCLFFBQVNSLElBQ2hCQSxFQUFPUyxVQUFVRixLQUFPQSxHQUMxQlAsRUFBT1UsS0FBSyxXQU1SMUQsb0JBQ0pLLEtBQUt5QixhQUNQekIsS0FBS3lCLFlBQVlTLFNBR25CbEMsS0FBS2dDLGNBQ0wsTUFBTXNCLEVBQWtCNUQsRUFBRTRELG9CQUFvQkMsTUFBTXZELEtBQUtHLEtBMER6RCxPQXhEQW1ELEVBQWdCRSxtQkFBbUIsQ0FBQ0MsSUFBTTFELEtBQU00QyxPQUM5QzNDLEtBQUswRCxtQkFBbUJmLEtBRzFCVyxFQUFnQkssbUJBQW1CLENBQUNGLElBQU0xRCxLQUFNNEMsT0FFMUMzQyxLQUFLc0IsZUFDUHRCLEtBQUtzQixjQUFjc0MsZUFFckI1RCxLQUFLc0IsY0FBZ0JxQixFQUVqQjNDLEtBQUtzQixjQUFjdUMsYUFFckI3RCxLQUFLc0IsY0FBY3dDLGNBR2Y5RCxLQUFLSCxRQUFRa0UsYUFDZi9ELEtBQUtzQixjQUFjMEMsWUFDakIsR0FBS2hFLEtBQUtzQixjQUFjOEIsVUFBVXBELEtBQUtILFFBQVFrRSxnQkFLdkRULEVBQWdCVyxXQUFXakUsS0FBS3dCLFNBRWhDeEIsS0FBS0csSUFBSStELEdBQUcsWUFBYSxLQUNsQmxFLEtBQUttQixVQUdRLFdBQWRuQixLQUFLTSxLQUN5QixVQUE1Qk4sS0FBS0gsUUFBUVcsWUFDZlIsS0FBS0csSUFBSTRDLFlBQVkvQyxLQUFLeUIsYUFHNUJ6QixLQUFLRyxJQUFJNEMsWUFBWS9DLEtBQUt5QixnQkFHOUJ6QixLQUFLRyxJQUFJK0QsR0FBRyxVQUFXLEtBQ2hCbEUsS0FBS21CLFVBR1EsV0FBZG5CLEtBQUtNLEtBQ3lCLFVBQTVCTixLQUFLSCxRQUFRVyxZQUNmUixLQUFLRyxJQUFJb0MsU0FBU3ZDLEtBQUt5QixhQUd6QnpCLEtBQUtHLElBQUlvQyxTQUFTdkMsS0FBS3lCLGdCQUszQjBDLFdBQVcsS0FDVG5FLEtBQUtHLElBQUlpRSxNQUFNcEUsS0FBS0csSUFBSWtFLGVBRzFCckUsS0FBS3lCLFlBQWM2QixFQUNadEQsS0FBS3lCLFlBRUo5QixrQkFBa0JJLEdBQzFCLE1BQU8sR0FBS0EsRUFBS0MsS0FBS0gsUUFBUWtFLGFBRXhCcEUsY0FDTkssS0FBS3dCLFdBQ0x4QixLQUFLSSxTQUFTK0MsUUFBU3BELElBQ3JCLE1BQU1xQixFQUFRMUIsRUFBRTRFLFFBQVF2RSxFQUFLd0UsVUFBVUMsWUFBWSxHQUU3QzdCLEVBQVMsSUFBSWxELEdBRWQyQixFQUFtQndCLFlBQVlDLElBQy9CekIsRUFBbUJ3QixZQUFZRSxNQUdoQzJCLEtBQU16RSxLQUFLMEUsY0FBYzNFLEtBSzdCNEMsRUFBT2dDLFFBQVE1RSxHQUVmQyxLQUFLd0IsUUFBUW9ELEtBQUtqQyxLQUlkaEQsbUJBQW1CZ0QsR0FDekIzQyxLQUFLcUIsY0FBZ0JzQixFQUVqQjNDLEtBQUt1QixzQkFDUHZCLEtBQUt1QixxQkFBcUJzRCxXQUFXN0UsS0FBS0csS0FHNUNILEtBQUt1QixxQkFBdUIsSUFBSTlCLEVBQU9rRCxFQUFPQyxhQUM1QzZCLEtBQU16RSxLQUFLOEUsb0JBQW9CbkMsRUFBT1MsYUFFeENwRCxLQUFLdUIscUJBQXFCZ0MsTUFBTXZELEtBQUtHLEtBRXJDSCxLQUFLdUIscUJBQ0Z3RCxVQUFVL0UsS0FBS2dGLGdCQUFnQnJDLEVBQU9TLFlBQ3RDNkIsWUFDSGpGLEtBQUt1QixxQkFBcUIyQyxHQUFHLGFBQWMsS0FDekNsRSxLQUFLdUIscUJBQXFCVyxXQUc1QmxDLEtBQUtHLElBQUlpRSxNQUFNcEUsS0FBS3FCLGNBQWN1QixhQUNsQzVDLEtBQUtLLFlBQVksa0JBQW1Cc0MsR0FFOUJoRCxxQkFtQk4sT0FqQklLLEtBQUsyQixjQUNQM0IsS0FBSzJCLGFBQWFPLFNBRXBCbEMsS0FBSzJCLGFBQWVqQyxFQUFFd0YscUJBQ3RCbEYsS0FBSzJCLGFBQWF3RCxVQUNoQm5GLEtBQUt3QixRQUFRckIsSUFBS3RDLElBQ2hCLE1BQU04RSxFQUFTLElBQUlsRCxFQUFPNUIsRUFBRStFLGFBQzFCNkIsS0FBTXpFLEtBQUswRSxjQUFjN0csRUFBRXVGLGFBTzdCLE9BTEFULEVBQU9nQyxRQUFROUcsRUFBRXVGLFdBQ2pCVCxFQUFPcUIsWUFBWSxHQUFLckIsRUFBT1MsVUFBVXBELEtBQUtILFFBQVFrRSxjQUN0RHBCLEVBQU91QixHQUFHLFFBQVMsS0FDakJsRSxLQUFLMEQsbUJBQW1CZixLQUVuQkEsS0FHSjNDLEtBQUsyQixhQUlOaEMsa0JBcUJOLE9BcEJJSyxLQUFLMEIsV0FDUDFCLEtBQUswQixVQUFVUSxTQUVqQmxDLEtBQUt3QixRQUFRMkIsUUFBU1IsSUFDcEIsTUFBTXlDLEVBQVN6QyxFQUFPQyxZQUNoQnlDLEVBQ0pyRixLQUFLSCxRQUFRbUIsYUFBZWhCLEtBQUtILFFBQVFtQixZQUFZcUUsY0FDdkQsSUFBSUMsRUFDREQsR0FBaUIxQyxFQUFPUyxVQUFVaUMsSUFDbkNyRixLQUFLSCxRQUFRbUIsWUFBWUMsSUFDUixpQkFBUnFFLElBQ1RBLEVBQU10RixLQUFLSCxRQUFRbUIsWUFBWUMsS0FFakMwQixFQUFPNEMsVUFBVTdGLEVBQUUwRixPQUFPQSxFQUFPdkMsSUFBS3VDLEVBQU90QyxJQUFLd0MsTUFFcER0RixLQUFLMEIsVUFBWWhDLEVBQUVnQyxVQUNqQjFCLEtBQUt3QixRQUFRckIsSUFBS3FGLEdBQU9BLEVBQUc1QyxhQUU1QnpFLE9BQU9vQyxVQUFXUCxLQUFLSCxRQUFRbUIsYUFBZUUsV0FBWSxLQUVyRGxCLEtBQUswQixVQUdOL0Isb0JBQW9CSSxHQUMxQixPQUFPQyxLQUFLeUYsZUFBZTFGLEdBQU0sR0FHM0JKLGNBQWNJLEdBQ3BCLE9BQU9DLEtBQUt5RixlQUFlMUYsR0FBTSxHQUkzQkosZUFDTkksRUFDQTJGLEdBRUEsTUFBTS9FLEVBQVdYLEtBQUtILFFBQVFjLFNBQ3hCRyxFQUFhZCxLQUFLSCxRQUFRaUIsV0FDMUI2RSxHQUFnQyxJQUFkaEYsRUFBUyxHQUF3QixJQUFkQSxFQUFTLElBSTlDaUYsR0FBb0MsSUFBaEI5RSxFQUFXLEdBQTBCLElBQWhCQSxFQUFXLElBS3BERCxFQUFZYixLQUFLSCxRQUFRZ0IsVUFFL0IsT0FBUWIsS0FBS0gsUUFBUWEsVUFDbkIsSUFBSyxRQU9MLElBQUssYUFDTCxJQUFLLFNBQ0wsSUFBSyxVQUNILE9BQU9oQixFQUFFbUcsU0FDUEMsS0FBTTlGLEtBQUsrRixrQkFBa0JoRyxHQUMzQlksU0FBVStFLEVBQVdDLEVBQWlCaEYsRUFDdENFLGNBRUZtRixVQUFXTixFQUFXLHdCQUEwQixHQUNoRC9FLFNBQVUrRSxFQUFXQyxFQUFpQmhGLEVBQ3RDRyxXQUFZNEUsRUFBV0UsRUFBbUI5RSxJQUc5QyxRQUNFLE1BQU0sSUFBSXdCLGlCQUFpQnRDLEtBQUtILFFBQVFhLGNBSXRDZixrQkFDTkksRUFDQUYsR0FFQSxHQUFJRyxLQUFLSCxRQUFRb0csYUFFZixPQURBcEcsRUFBVTFCLE9BQU9vQyxVQUFXUCxLQUFLSCxRQUFTQSxHQUNuQ0csS0FBS0gsUUFBUW9HLGFBQWFsRyxFQUFNRixHQUV6QyxPQUFRRyxLQUFLSCxRQUFRWSxzQkFDbkIsSUFBSyxTQUNILE9BQVFULEtBQUtILFFBQVFhLFVBRW5CLElBQUssYUFDSCxtQ0FDY1YsS0FBS0gsUUFBUWUsaUVBRVpmLEVBQVFnQiw0Q0FDSmhCLEVBQVFjLFNBQVMsNkRBTXRDLElBQUssU0FDSCx3R0FFdUJYLEtBQUtILFFBQVFxRyxxREFLdEMsSUFBSyxVQUNILG9EQUVhbEcsS0FBS0gsUUFBUWUsaUVBRVhmLEVBQVFnQiw0Q0FDSmhCLEVBQVFjLFNBQVMsZ0VBRzlCWCxLQUFLSCxRQUFRb0QsZ0RBS3ZCLE1BRUYsSUFBSyxZQUNILE9BQVFqRCxLQUFLSCxRQUFRYSxVQUVuQixJQUFLLGFBQ0gsb0RBRWFWLEtBQUtILFFBQVFlLGlFQUVYWixLQUFLbUcsd0JBQXdCcEcscUNBQ3pCRixFQUFRYyxTQUFTLDZEQU10QyxJQUFLLFNBQ0gsd0dBRXVCWCxLQUFLSCxRQUFRcUcscURBS3RDLElBQUssVUFDSCxvREFFYWxHLEtBQUtILFFBQVFlLGlFQUVYWixLQUFLbUcsd0JBQXdCcEcscUNBQ3pCRixFQUFRYyxTQUFTLGdFQUc5QlgsS0FBS0gsUUFBUW9ELGdEQUt2QixNQUVGLFFBQ0UsTUFBTSxJQUFJWCxrQ0FDb0J0QyxLQUFLSCxRQUFRWSwwQkFLekNkLHFCQUNOLE1BQU15RyxFQUFrQnBHLEtBQUtILFFBQVFrQixnQkFBZ0IyQixPQUNyRCxJQUFJMkQsR0FBVXhFLElBQ1Z5RSxFQUFTekUsSUFDYixJQUFLLE1BQU05QixLQUFRQyxLQUFLSSxTQUFVLENBQ2hDLE1BQU1tRyxFQUFNeEcsRUFBS0MsS0FBS0gsUUFBUTJHLGVBQzlCSCxFQUFTSSxLQUFLeEYsSUFBSW9GLEVBQVFFLEdBQzFCRCxFQUFTRyxLQUFLQyxJQUFJSixFQUFRQyxHQUU1QixNQUFNSSxHQUFRTixFQUFTQyxFQUFTLEdBQUtGLEVBQ3JDcEcsS0FBSzRCLGFBQWUwRSxFQUNwQnRHLEtBQUs4QixjQUFnQjZFLEVBRWZoSCx3QkFBd0JJLEdBQzlCLE1BQU13RyxFQUFNeEcsRUFBS0MsS0FBS0gsUUFBUTJHLGVBSTlCLE9BSGN4RyxLQUFLSCxRQUFRa0IsaUJBQ3hCd0YsRUFBTXZHLEtBQUs0QixjQUFnQjVCLEtBQUs4QixlQUk3Qm5DLGdCQUFnQkksR0FDdEIsT0FBS0MsS0FBS0gsUUFBUStHLGFBR1I1RyxLQUFLSCxRQUFRK0csY0FBYzdHLEVBQUtDLEtBQUtILFFBQVErRyxhQUY5QyxVQ2xoQlFDLFVBQTJCM0csRUFHOUNQLFlBQ0VRLEVBQ0FDLEVBQ0FQLEVBQ0FRLEdBRUFQLE1BQU1LLEVBQUtDLEVBQVVQLEVBQVNRLEdBQzlCTCxLQUFLTSxLQUFPLGVBTVpOLEtBQUtILFFBQVUxQixPQUFPb0MsT0FDcEJQLEtBQUtILFNBQ0hpSCxlQU5GQyxPQUFRLElBQ1JDLFFBQVEsRUFDUkMsT0FBUSxJQUtScEgsR0FJR0YsS0FBS0UsR0FFVixPQURBRyxLQUFLSCxRQUFVMUIsT0FBT29DLE9BQU9QLEtBQUtILFFBQVNBLEdBQ3BDRyxLQUFLaUMsU0FHUHRDLFNBQ0wsR0FBS0ssS0FBS21CLFFBYVYsT0FWSW5CLEtBQUt5QixhQUNQekIsS0FBS0csSUFBSTRDLFlBQVkvQyxLQUFLeUIsYUFFeEJ6QixLQUFLa0gsYUFDUGxILEtBQUtHLElBQUk0QyxZQUFZL0MsS0FBS2tILGFBRTVCbEgsS0FBS3lCLFlBQWN6QixLQUFLbUMsb0JBQ3hCbkMsS0FBS2tILFlBQWNsSCxLQUFLbUgsb0JBQ3hCbkgsS0FBS0csSUFBSW9DLFNBQVN2QyxLQUFLeUIsYUFDdkJ6QixLQUFLRyxJQUFJb0MsU0FBU3ZDLEtBQUtrSCxhQUNoQmxILEtBR0RMLG9CQUNOLE1BQU15SCxFQUFhMUgsRUFBRTJILGFBYXJCLE9BWkFySCxLQUFLd0IsUUFBUTJCLFFBQVNSLElBQ3BCLE1BQU0yRSxFQUFjNUgsRUFBRTZILE9BQ3BCNUUsRUFBT0MsWUFDUDVDLEtBQUtILFFBQVFpSCxlQUVYOUcsS0FBS0gsUUFBUTJILG1CQUNmRixFQUFZdEQsWUFDVixHQUFLckIsRUFBT1MsVUFBVXBELEtBQUtILFFBQVEySCxvQkFHdkNKLEVBQVc3RSxTQUFTK0UsS0FFZkYsU0M5RFVLLFVBQWlCL0gsRUFBRStILFNBR3RDOUgsWUFBWStILEVBQTBCN0gsR0FDcENDLE1BQU00SCxFQUFTN0gsR0FFVkYsUUFBUUksR0FDYkMsS0FBS0MsT0FBU0YsRUFFVEosVUFDTCxPQUFPSyxLQUFLQyxjQ01LMEgsRUFlbkJoSSxZQUNFUSxFQUNBQyxFQUNBUCxFQUNBUSxHQU9BTCxLQUFLTSxLQUFPLFdBQ1pOLEtBQUtHLElBQU1BLEVBQ1hILEtBQUtJLFNBQVdBLEVBQ2hCSixLQUFLSCxRQUFVQSxFQUNmRyxLQUFLSyxZQUFjQSxFQUVuQkwsS0FBS21CLFNBQVUsRUFDZm5CLEtBQUs0SCxhQUNMNUgsS0FBSzRCLGFBQWVDLElBQ3BCN0IsS0FBSzhCLGNBQWdCLEVBR3JCOUIsS0FBS0gsUUFBVTFCLE9BQU9vQyxXQWhCcEJ5QyxNQUFPLFVBQ1A2RSx3QkFBeUIsU0FDekI5RyxpQkFBa0IsWUFjNkJsQixHQUdqREcsS0FBSytCLHFCQUNML0IsS0FBSzhILGdCQUVBbkksS0FBS0UsR0FFVixPQURBRyxLQUFLSCxRQUFVMUIsT0FBT29DLE9BQU9QLEtBQUtILFFBQVNBLEdBQ3BDRyxLQUFLaUMsU0FFUHRDLFNBQ0wsR0FBS0ssS0FBS21CLFFBUVYsT0FMSW5CLEtBQUtvQixPQUNQcEIsS0FBS29CLE1BQU1jLFNBRWJsQyxLQUFLb0IsTUFBUXBCLEtBQUsrSCxzQkFDbEIvSCxLQUFLRyxJQUFJb0MsU0FBU3ZDLEtBQUtvQixPQUNoQnBCLEtBRUZMLFlBQ0xLLEtBQUtHLElBQUlxQyxVQUFVeEMsS0FBS3lDLGFBRW5COUMsWUFDTCxPQUFJSyxLQUFLNEgsVUFBVWxGLFFBQVUsRUFDcEIxQyxLQUFLRyxJQUFJc0MsWUFFWHpDLEtBQUs0SCxVQUFVSSxPQUNwQixDQUFDQyxFQUFNQyxJQUFTRCxFQUFLRSxPQUFPRCxFQUFLekYsYUFDakN6QyxLQUFLNEgsVUFBVSxHQUFHbkYsYUFHZjlDLFVBQ0RLLEtBQUtvQixPQUNQcEIsS0FBS29CLE1BQU1jLFNBR1J2QyxjQUFjd0IsR0FDbkJuQixLQUFLbUIsUUFBVUEsRUFDVm5CLEtBQUtvQixRQUdORCxFQUNGbkIsS0FBS0csSUFBSW9DLFNBQVN2QyxLQUFLb0IsT0FFdkJwQixLQUFLRyxJQUFJNEMsWUFBWS9DLEtBQUtvQixRQUd2QnpCLFlBQVlxRCxHQUNqQmhELEtBQUtILFFBQVF1SSxVQUFZcEYsRUFDekJoRCxLQUFLaUMsU0FFQXRDLE1BQU11RCxHQUNYbEQsS0FBSzRILFVBQVV6RSxRQUFTa0YsSUFDbEJBLEVBQVNqRixVQUFVRixLQUFPQSxHQUM1Qm1GLEVBQVNoRixLQUFLLFdBS1YxRCxnQkFDUkssS0FBS0ksU0FBUytDLFFBQVNwRCxJQUNyQkMsS0FBSytCLHFCQUVMLE1BQU1YLEVBQVExQixFQUFFNEUsUUFBUXZFLEVBQUt3RSxVQUFVQyxZQUFZLEdBQ25ELElBQUk0RCxFQUFZcEksS0FBS0gsUUFBUXVJLFVBQ2dCLGNBQXpDcEksS0FBS0gsUUFBUWdJLDBCQUNmTyxFQUFZcEksS0FBS3NJLDBCQUEwQnZJLElBRTdDLE1BQU1zSSxFQUFXLElBQUlaLEVBQ2xCckcsRUFBcUJtSCxhQUN0QnBLLE9BQU9vQyxVQUFXUCxLQUFLSCxTQUFXdUksZUFJcENDLEVBQVMxRCxRQUFRNUUsR0FFakJDLEtBQUs0SCxVQUFVaEQsS0FBS3lELEtBR2QxSSwwQkFBMEJJLEdBQ2xDLE1BQU13RyxFQUFNeEcsRUFBS0MsS0FBS0gsUUFBUTJHLGVBSTlCLE9BSGN4RyxLQUFLSCxRQUFRa0IsaUJBQ3hCd0YsRUFBTXZHLEtBQUs0QixjQUFnQjVCLEtBQUs4QixlQUkzQm5DLHFCQUFxQjBJLEdBRTdCckksS0FBS0ssWUFBWSxvQkFBcUJnSSxHQUU5QjFJLGtCQUFrQkksR0FDMUIsTUFBTyxHQUFLQSxFQUFLQyxLQUFLSCxRQUFRa0UsYUFFeEJwRSxzQkFtQk4sT0FsQkFLLEtBQUt3SSxjQUFnQjlJLEVBQUUySCxhQUN2QnJILEtBQUs0SCxVQUFVekUsUUFBU2tGLElBQ3RCLE1BQU14SSxFQUE2QjFCLE9BQU9vQyxVQUFXUCxLQUFLSCxTQUN4RG1ELE1BQU9oRCxLQUFLc0ksMEJBQTBCRCxFQUFTakYsYUFFM0NxRixFQUFjLElBQUloQixFQUN0QlksRUFBU0UsYUFDVDFJLEdBRUY0SSxFQUFZdkUsR0FBRyxRQUFTLEtBQ3RCbEUsS0FBSzBJLHFCQUFxQkwsS0FFNUJJLEVBQVk5RCxRQUFRMEQsRUFBU2pGLFdBQ3pCcEQsS0FBS0gsUUFBUWtFLGFBQ2YwRSxFQUFZekUsWUFBWWhFLEtBQUsySSxrQkFBa0JGLEVBQVlyRixZQUU3RHBELEtBQUt3SSxjQUFjakcsU0FBU2tHLEtBRXZCekksS0FBS3dJLGNBRU43SSxxQkFDTixNQUFNeUcsRUFBa0JwRyxLQUFLSCxRQUFRa0IsZ0JBQWdCMkIsT0FDckQsSUFBSTJELEdBQVV4RSxJQUNWeUUsRUFBU3pFLElBQ2IsSUFBSyxNQUFNOUIsS0FBUUMsS0FBS0ksU0FBVSxDQUNoQyxNQUFNbUcsRUFBTXhHLEVBQUtDLEtBQUtILFFBQVEyRyxlQUM5QkgsRUFBU0ksS0FBS3hGLElBQUlvRixFQUFRRSxHQUMxQkQsRUFBU0csS0FBS0MsSUFBSUosRUFBUUMsR0FFNUIsTUFBTUksR0FBUU4sRUFBU0MsRUFBUyxHQUFLRixFQUNyQ3BHLEtBQUs0QixhQUFlMEUsRUFDcEJ0RyxLQUFLOEIsY0FBZ0I2RSxTQ3JLSmlDLFVBQTZCakIsRUFHaERoSSxZQUNFUSxFQUNBQyxFQUNBUCxFQUNBUSxHQUVBUCxNQUFNSyxFQUFLQyxFQUFVUCxFQUFTUSxHQVE5QkwsS0FBS00sS0FBTyxpQkFDWk4sS0FBS0csSUFBTUEsRUFDWEgsS0FBS0ksU0FBV0EsRUFDaEJKLEtBQUtILFFBQVVBLEVBQ2ZHLEtBQUtLLFlBQWNBLEVBRW5CTCxLQUFLbUIsU0FBVSxFQUNmbkIsS0FBSzRILGFBQ0w1SCxLQUFLNEIsYUFBZUMsSUFDcEI3QixLQUFLOEIsY0FBZ0IsRUFHckI5QixLQUFLSCxRQUFVMUIsT0FBT29DLFdBbEJwQnNILHdCQUF5QixTQUN6QjlHLGlCQUFrQixXQUNsQjhILFNBQVUsSUFDVjdGLE1BQU8sVUFDUDhGLFFBQVMsSUFjc0NqSixHQUNqREcsS0FBSzhILGdCQUVBbkksS0FBS0UsR0FFVixPQURBRyxLQUFLSCxRQUFVMUIsT0FBT29DLE9BQU9QLEtBQUtILFFBQVNBLEdBQ3BDRyxLQUFLaUMsU0FFUHRDLFNBQ0wsR0FBS0ssS0FBS21CLFFBUVYsT0FMSW5CLEtBQUtvQixPQUNQcEIsS0FBS29CLE1BQU1jLFNBRWJsQyxLQUFLb0IsTUFBUXBCLEtBQUsrSSw0QkFDbEIvSSxLQUFLRyxJQUFJb0MsU0FBU3ZDLEtBQUtvQixPQUNoQnBCLEtBRUZMLFlBQ0xLLEtBQUtHLElBQUlxQyxVQUFVeEMsS0FBS3lDLGFBRW5COUMsWUFDTCxPQUFJSyxLQUFLNEgsVUFBVWxGLFFBQVUsRUFDcEIxQyxLQUFLRyxJQUFJc0MsWUFFWHpDLEtBQUs0SCxVQUFVSSxPQUNwQixDQUFDQyxFQUFNQyxJQUFTRCxFQUFLRSxPQUFPRCxFQUFLekYsYUFDakN6QyxLQUFLNEgsVUFBVSxHQUFHbkYsYUFHZjlDLFlBQVlxRCxHQUNqQmhELEtBQUtILFFBQVFtRCxNQUFRQSxFQUNyQmhELEtBQUtpQyxTQUVDdEMsNEJBNEJOLE9BM0JBSyxLQUFLd0ksY0FBZ0I5SSxFQUFFMkgsYUFDdkJySCxLQUFLNEgsVUFBVXpFLFFBQVNrRixJQUN0QkEsRUFBU25FLEdBQUcsUUFBUyxLQUNuQmxFLEtBQUswSSxxQkFBcUJMLEtBRTVCLE1BQU14SSxFQUFzQzFCLE9BQU9vQyxVQUVqRFAsS0FBS0gsU0FFSG1ELE1BQzJDLFdBQXpDaEQsS0FBS0gsUUFBUWdJLHdCQUNUN0gsS0FBS0gsUUFBUW1ELE1BQ2JoRCxLQUFLc0ksMEJBQTBCRCxFQUFTakYsYUFJNUM0RixFQUFpQnRKLEVBQUVtSixTQUN0QlIsRUFBU0UsYUFBNEJwSSxJQUFLaUYsR0FDekMxRixFQUFFMEYsUUFBUUEsRUFBT3ZDLElBQUt1QyxFQUFPdEMsT0FFL0JqRCxHQUVFRyxLQUFLSCxRQUFRa0UsYUFDZmlGLEVBQWVoRixZQUFZaEUsS0FBSzJJLGtCQUFrQk4sRUFBU2pGLFlBRTdEcEQsS0FBS3dJLGNBQWNqRyxTQUFTeUcsS0FFdkJoSixLQUFLd0kscUJDNUdLUyxVQUFnQnZKLEVBQUV1SixRQUdyQ3RKLFlBQ0UrSCxFQUlBN0gsR0FFQUMsTUFBTTRILEVBQVM3SCxHQUVWRixRQUFRSSxHQUNiQyxLQUFLQyxPQUFTRixFQUVUSixVQUNMLE9BQU9LLEtBQUtDLGNDQ0tpSixFQWdCbkJ2SixZQUNFUSxFQUNBQyxFQUNBUCxFQUNBUSxHQVFBTCxLQUFLTSxLQUFPLFVBQ1pOLEtBQUtHLElBQU1BLEVBQ1hILEtBQUtJLFNBQVdBLEVBQ2hCSixLQUFLSCxRQUFVQSxFQUNmRyxLQUFLSyxZQUFjQSxFQUVuQkwsS0FBS21CLFNBQVUsRUFDZm5CLEtBQUttSixZQUNMbkosS0FBSzRCLGFBQWVDLElBQ3BCN0IsS0FBSzhCLGNBQWdCLEVBR3JCOUIsS0FBS0gsUUFBVTFCLE9BQU9vQyxXQWpCcEJ5QyxNQUFPLFVBQ1BvRixVQUFXLFVBQ1hnQix1QkFBd0IsU0FDeEJySSxpQkFBa0IsWUFjNkJsQixHQUdqREcsS0FBSytCLHFCQUNML0IsS0FBS3FKLGVBRUExSixLQUFLRSxHQUVWLE9BREFHLEtBQUtILFFBQVUxQixPQUFPb0MsT0FBT1AsS0FBS0gsUUFBU0EsR0FDcENHLEtBQUtpQyxTQUVQdEMsU0FDTCxHQUFLSyxLQUFLbUIsUUFRVixPQUxJbkIsS0FBS29CLE9BQ1BwQixLQUFLb0IsTUFBTWMsU0FFYmxDLEtBQUtvQixNQUFRcEIsS0FBS3NKLHFCQUNsQnRKLEtBQUtHLElBQUlvQyxTQUFTdkMsS0FBS29CLE9BQ2hCcEIsS0FFRkwsWUFDTEssS0FBS0csSUFBSXFDLFVBQVV4QyxLQUFLeUMsYUFFbkI5QyxZQUNMLE9BQUlLLEtBQUttSixTQUFTekcsUUFBVSxFQUNuQjFDLEtBQUtHLElBQUlzQyxZQUVYekMsS0FBS21KLFNBQVNuQixPQUNuQixDQUFDQyxFQUFNQyxJQUFTRCxFQUFLRSxPQUFPRCxFQUFLekYsYUFDakN6QyxLQUFLbUosU0FBUyxHQUFHMUcsYUFHZDlDLFVBQ0RLLEtBQUtvQixPQUNQcEIsS0FBS29CLE1BQU1jLFNBR1J2QyxjQUFjd0IsR0FDbkJuQixLQUFLbUIsUUFBVUEsRUFDVm5CLEtBQUtvQixRQUdORCxFQUNGbkIsS0FBS0csSUFBSW9DLFNBQVN2QyxLQUFLb0IsT0FFdkJwQixLQUFLRyxJQUFJNEMsWUFBWS9DLEtBQUtvQixRQUd2QnpCLFlBQVlxRCxHQUNqQmhELEtBQUtILFFBQVF1SSxVQUFZcEYsRUFDekJoRCxLQUFLaUMsU0FFQXRDLE1BQU11RCxHQUNYbEQsS0FBS21KLFNBQVNoRyxRQUFTb0csSUFDakJBLEVBQVFuRyxVQUFVRixLQUFPQSxHQUMzQnFHLEVBQVFsRyxLQUFLLFdBS1QxRCxrQkFBa0JJLEdBQzFCLE1BQU8sR0FBS0EsRUFBS0MsS0FBS0gsUUFBUWtFLGFBRXhCcEUsZUFDTkssS0FBS0ksU0FBUytDLFFBQVNwRCxJQUNyQkMsS0FBSytCLHFCQUVMLE1BQU1YLEVBQVExQixFQUFFNEUsUUFBUXZFLEVBQUt3RSxVQUFVQyxZQUFZLEdBQzdDK0UsRUFBVSxJQUFJTixFQUFTN0gsRUFBb0JtSCxjQUdqRGdCLEVBQVE1RSxRQUFRNUUsR0FFaEJDLEtBQUttSixTQUFTdkUsS0FBSzJFLEtBR2Y1SixxQkFzQk4sT0FyQkFLLEtBQUt3SixhQUFlOUosRUFBRTJILGFBQ3RCckgsS0FBS21KLFNBQVNoRyxRQUFTb0csSUFDckIsSUFBSXZHLEVBQVFoRCxLQUFLSCxRQUFRbUQsTUFDbUIsY0FBeENoRCxLQUFLSCxRQUFRdUoseUJBQ2ZwRyxFQUFRaEQsS0FBS3lKLHlCQUF5QkYsRUFBUW5HLFlBRWhELE1BQU12RCxFQUE2QjFCLE9BQU9vQyxVQUFXUCxLQUFLSCxTQUN4RG1ELFVBR0kwRyxFQUFhLElBQUlULEVBQVFNLEVBQVFoQixhQUFjMUksR0FDckQ2SixFQUFXL0UsUUFBUTRFLEVBQVFuRyxXQUMzQnNHLEVBQVd4RixHQUFHLFFBQVMsS0FDckJsRSxLQUFLMkosb0JBQW9CSixLQUV2QnZKLEtBQUtILFFBQVFrRSxhQUNmMkYsRUFBVzFGLFlBQVloRSxLQUFLMkksa0JBQWtCZSxFQUFXdEcsWUFHM0RwRCxLQUFLd0osYUFBYWpILFNBQVNtSCxLQUV0QjFKLEtBQUt3SixhQUVON0osb0JBQW9CNEosR0FFMUJ2SixLQUFLSyxZQUFZLG1CQUFvQmtKLEdBRS9CNUoscUJBQ04sTUFBTXlHLEVBQWtCcEcsS0FBS0gsUUFBUWtCLGdCQUFnQjJCLE9BQ3JELElBQUkyRCxHQUFVeEUsSUFDVnlFLEVBQVN6RSxJQUNiLElBQUssTUFBTTlCLEtBQVFDLEtBQUtJLFNBQVUsQ0FDaEMsTUFBTW1HLEVBQU14RyxFQUFLQyxLQUFLSCxRQUFRMkcsZUFDOUJILEVBQVNJLEtBQUt4RixJQUFJb0YsRUFBUUUsR0FDMUJELEVBQVNHLEtBQUtDLElBQUlKLEVBQVFDLEdBRTVCLE1BQU1JLEdBQVFOLEVBQVNDLEVBQVMsR0FBS0YsRUFDckNwRyxLQUFLNEIsYUFBZTBFLEVBQ3BCdEcsS0FBSzhCLGNBQWdCNkUsRUFFZmhILHlCQUF5QkksR0FDL0IsTUFBTXdHLEVBQU14RyxFQUFLQyxLQUFLSCxRQUFRMkcsZUFJOUIsT0FIY3hHLEtBQUtILFFBQVFrQixpQkFDeEJ3RixFQUFNdkcsS0FBSzRCLGNBQWdCNUIsS0FBSzhCLGdCQ3BMdkN2RSxFQUFBUSxFQUFBNkwsRUFBQSwyQkFBQW5LLElBQUFsQyxFQUFBUSxFQUFBNkwsRUFBQSxpQ0FBQTFKLElBQUEzQyxFQUFBUSxFQUFBNkwsRUFBQSx1Q0FBQS9DLElBQUF0SixFQUFBUSxFQUFBNkwsRUFBQSw2QkFBQW5DLElBQUFsSyxFQUFBUSxFQUFBNkwsRUFBQSxtQ0FBQWpDLElBQUFwSyxFQUFBUSxFQUFBNkwsRUFBQSx5Q0FBQWhCLElBQUFyTCxFQUFBUSxFQUFBNkwsRUFBQSw0QkFBQVgsSUFBQTFMLEVBQUFRLEVBQUE2TCxFQUFBLGtDQUFBVixJQVNBVSxFQUFBLFNBQ0VuSyxTQUNBb0ssYUFBQTNKLEVBQ0E0SixtQkFBQWpELEVBQ0FZLFdBQ0FzQyxlQUFBcEMsRUFDQXFDLHFCQUFBcEIsRUFDQUssVUFDQWdCLGNBQUFmIiwiZmlsZSI6ImxlYWZsZXQtbGF5ZXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wibGVhZmxldE1hcFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJsZWFmbGV0TWFwXCJdID0gZmFjdG9yeSgpO1xufSkod2luZG93LCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgeyBEYXRhTGlzdEl0ZW0gfSBmcm9tICcuLi9kZWZpbml0aW9ucydcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFya2VyIGV4dGVuZHMgTC5NYXJrZXIge1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6dmFyaWFibGUtbmFtZVxuICBwcml2YXRlIF9fZGF0YTogRGF0YUxpc3RJdGVtXG4gIGNvbnN0cnVjdG9yKGxhdGxuZzogTC5MYXRMbmdFeHByZXNzaW9uLCBvcHRpb25zPzogTC5NYXJrZXJPcHRpb25zKSB7XG4gICAgc3VwZXIobGF0bG5nLCBvcHRpb25zKVxuICB9XG4gIHB1YmxpYyBzZXREYXRhKGRhdGE6IERhdGFMaXN0SXRlbSkge1xuICAgIHRoaXMuX19kYXRhID0gZGF0YVxuICB9XG4gIHB1YmxpYyBnZXREYXRhKCkge1xuICAgIHJldHVybiB0aGlzLl9fZGF0YVxuICB9XG59XG4iLCJpbXBvcnQgeyBEYXRhTGlzdEl0ZW0sIENoYW5uZWxGdW5jIH0gZnJvbSAnLi4vZGVmaW5pdGlvbnMnXG5pbXBvcnQgTWFya2VyIGZyb20gJy4vTWFya2VyJ1xuXG4vKiog5riy5p+T5qC35byPIOaVo+eCuXzng63lipvlm74gKi9cbnR5cGUgTWFya2Vyc0xheWVyUmVuZGVyVHlwZSA9ICdwb2ludCcgfCAnaGVhdCcgfCAnY2x1c3RlcidcblxuLyoqIOa4suafk+minOiJsuagt+W8jyDljZXoibJ85YiG5q61ICovXG50eXBlIE1hcmtlcnNMYXllclJlbmRlclBvaW50Q29sb3JUeXBlID0gJ3NpbmdsZScgfCAnc2VnbWVudGVkJ1xuXG4vKiog5pWj54K55Zu+5qCH57G75Z6LIGljb25mb250fHN2Z3xpbWFnZSAqL1xudHlwZSBNYXJrZXJzTGF5ZXJJY29uVHlwZSA9ICdmb250X2NsYXNzJyB8ICd1bmljb2RlJyB8ICdzeW1ib2wnIHwgJ2ltYWdlJ1xuXG5pbnRlcmZhY2UgSWNvblJlbmRlckZ1bmNPcHRpb24ge1xuICBpY29uU2l6ZTogW251bWJlciwgbnVtYmVyXVxuICBpY29uQ29sb3I6IHN0cmluZ1xufVxudHlwZSBJY29uUmVuZGVyRnVuYyA9IChcbiAgZGF0YTogRGF0YUxpc3RJdGVtLFxuICBwYXJhbXM6IEljb25SZW5kZXJGdW5jT3B0aW9uXG4pID0+IHN0cmluZ1xuXG5leHBvcnQgaW50ZXJmYWNlIE1hcmtlcnNMYXllck9wdGlvbnMge1xuICByZW5kZXJUeXBlOiBNYXJrZXJzTGF5ZXJSZW5kZXJUeXBlXG4gIHJlbmRlclBvaW50Q29sb3JUeXBlOiBNYXJrZXJzTGF5ZXJSZW5kZXJQb2ludENvbG9yVHlwZVxuICBpY29uVHlwZTogTWFya2Vyc0xheWVySWNvblR5cGVcblxuICBpY29uSW1hZ2VVcmw/OiBzdHJpbmdcbiAgaWNvblNpemU/OiBbbnVtYmVyLCBudW1iZXJdXG4gIGljb25DbGFzcz86IHN0cmluZ1xuICBpY29uVW5pY29kZT86IHN0cmluZ1xuICBpY29uU3ltYm9sPzogc3RyaW5nXG4gIGljb25Db2xvcj86IHN0cmluZ1xuICBpY29uQW5jaG9yPzogW251bWJlciwgbnVtYmVyXVxuICBpY29uUmVuZGVyZXI/OiBJY29uUmVuZGVyRnVuY1xuXG4gIC8qKiBwb3B1cCDlsZXnpLrlrZfmrrUgKi9cbiAgcG9wdXBBdHRyPzogc3RyaW5nXG4gIC8qKiB0b29sdGlwIOWxleekuuWtl+autSAqL1xuICB0b29sdGlwQXR0cj86IHN0cmluZ1xuXG4gIG9wYWNpdHk/OiBudW1iZXJcblxuICAvKiog5YiG5q615riy5p+T57uf6K6h5a2X5q61ICovXG4gIHNlZ21lbnRlZEF0dHI/OiBzdHJpbmdcbiAgc2VnbWVudGVkQ29sb3JzPzogc3RyaW5nW11cblxuICBoZWF0T3B0aW9ucz86IE1hcmtlcnNIZWF0TGF5ZXJPcHRpb25zXG4gIGNsdXN0ZXJPcHRpb25zPzogTC5NYXJrZXJzQ2x1c3Rlck9wdGlvbnNcbn1cblxuLyoqIOi9rOWMluS4uueDreWKm+WbvueahCBvcHRpb25zICovXG5pbnRlcmZhY2UgTWFya2Vyc0hlYXRMYXllck9wdGlvbnMgZXh0ZW5kcyBMLkhlYXRMYXllck9wdGlvbnMge1xuICBkaW1lbnNpb25BdHRyPzogc3RyaW5nXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hcmtlcnNMYXllciB7XG4gIHB1YmxpYyBtYXA6IEwuTWFwXG4gIHB1YmxpYyBkYXRhTGlzdDogRGF0YUxpc3RJdGVtW11cbiAgcHVibGljIG9wdGlvbnM6IE1hcmtlcnNMYXllck9wdGlvbnNcbiAgcHVibGljIGNoYW5uZWxGdW5jOiBDaGFubmVsRnVuY1xuXG4gIHB1YmxpYyB0eXBlOiBzdHJpbmdcblxuICBwcm90ZWN0ZWQgbWFya2VyczogTWFya2VyW11cblxuICBwcm90ZWN0ZWQgZm9jdXNlZE1hcmtlcjogTWFya2VyXG4gIHByb3RlY3RlZCBob3ZlcmVkTWFya2VyOiBNYXJrZXJcbiAgLyoqIOmcgOimgeWxleekuueahOaUvuWkp+eahOWbvuaghyAqL1xuICBwcm90ZWN0ZWQgZm9jdXNlZERpc3BsYXlNYXJrZXI6IE1hcmtlclxuICBwcm90ZWN0ZWQgbWFya2VyTGF5ZXI6IEwuQ2FudmFzSWNvbkxheWVyXG5cbiAgcHJvdGVjdGVkIHZpc2libGU6IGJvb2xlYW5cbiAgcHJvdGVjdGVkIGxheWVyOlxuICAgIHwgTC5DYW52YXNJY29uTGF5ZXJcbiAgICB8IEwuSGVhdExheWVyXG4gICAgfCBMLk1hcmtlcnNDbHVzdGVyXG4gICAgfCBMLkxheWVyR3JvdXBcbiAgcHJpdmF0ZSBoZWF0TGF5ZXI6IEwuSGVhdExheWVyXG4gIHByaXZhdGUgY2x1c3RlckxheWVyOiBMLk1hcmtlcnNDbHVzdGVyXG5cbiAgcHJpdmF0ZSBzZWdtZW50ZWRNaW46IG51bWJlclxuICBwcml2YXRlIHNlZ21lbnRlZFN0ZXA6IG51bWJlclxuICBjb25zdHJ1Y3RvcihcbiAgICBtYXA6IEwuTWFwLFxuICAgIGRhdGFMaXN0OiBEYXRhTGlzdEl0ZW1bXSxcbiAgICBvcHRpb25zOiBNYXJrZXJzTGF5ZXJPcHRpb25zLFxuICAgIGNoYW5uZWxGdW5jOiBDaGFubmVsRnVuY1xuICApIHtcbiAgICBjb25zdCBkZWZhdWx0T3B0aW9uczogTWFya2Vyc0xheWVyT3B0aW9ucyA9IHtcbiAgICAgIHJlbmRlclR5cGU6ICdwb2ludCcsXG4gICAgICByZW5kZXJQb2ludENvbG9yVHlwZTogJ3NpbmdsZScsXG4gICAgICBpY29uVHlwZTogJ3VuaWNvZGUnLFxuICAgICAgaWNvblNpemU6IFsyMCwgMjBdLFxuICAgICAgaWNvbkNsYXNzOiAnaWNvbmZvbnQnLFxuICAgICAgaWNvbkNvbG9yOiAnIzMzODhGRicsXG4gICAgICBpY29uQW5jaG9yOiBbMTAsIDIwXSxcbiAgICAgIHNlZ21lbnRlZENvbG9yczogWycjMzM4OEZGJ10sXG4gICAgICBoZWF0T3B0aW9uczoge1xuICAgICAgICBtYXg6IDEsXG4gICAgICAgIG1pbk9wYWNpdHk6IDEsXG4gICAgICB9LFxuICAgIH1cbiAgICB0aGlzLnR5cGUgPSAnbWFya2VyJ1xuICAgIHRoaXMubWFwID0gbWFwXG4gICAgdGhpcy5kYXRhTGlzdCA9IGRhdGFMaXN0XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpXG4gICAgdGhpcy5jaGFubmVsRnVuYyA9IGNoYW5uZWxGdW5jXG5cbiAgICB0aGlzLnZpc2libGUgPSB0cnVlXG4gICAgdGhpcy5sYXllciA9IG51bGxcbiAgICB0aGlzLmZvY3VzZWRNYXJrZXIgPSBudWxsXG4gICAgdGhpcy5ob3ZlcmVkTWFya2VyID0gbnVsbFxuICAgIHRoaXMuZm9jdXNlZERpc3BsYXlNYXJrZXIgPSBudWxsXG4gICAgdGhpcy5tYXJrZXJzID0gW11cbiAgICB0aGlzLm1hcmtlckxheWVyID0gbnVsbFxuICAgIHRoaXMuaGVhdExheWVyID0gbnVsbFxuICAgIHRoaXMuY2x1c3RlckxheWVyID0gbnVsbFxuXG4gICAgdGhpcy5zZWdtZW50ZWRNaW4gPSBJbmZpbml0eVxuICAgIHRoaXMuc2VnbWVudGVkU3RlcCA9IDFcblxuICAgIC8vIOe8k+WtmCBzZWdtZW50IOebuOWFs+aVsOaNrlxuICAgIHRoaXMuY2FjaGVTZWdtZW50UGFyYW1zKClcbiAgICB0aGlzLmluaXRNYXJrZXJzKClcbiAgfVxuICBwdWJsaWMgZHJhdyhvcHRpb25zPzogTWFya2Vyc0xheWVyT3B0aW9ucykge1xuICAgIHRoaXMudmlzaWJsZSA9IHRydWVcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucylcbiAgICByZXR1cm4gdGhpcy5yZWRyYXcoKVxuICB9XG4gIHB1YmxpYyByZWRyYXcoKSB7XG4gICAgaWYgKCF0aGlzLnZpc2libGUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodGhpcy5sYXllcikge1xuICAgICAgdGhpcy5sYXllci5yZW1vdmUoKVxuICAgIH1cbiAgICBzd2l0Y2ggKHRoaXMub3B0aW9ucy5yZW5kZXJUeXBlKSB7XG4gICAgICBjYXNlICdwb2ludCc6IHtcbiAgICAgICAgdGhpcy5sYXllciA9IHRoaXMuY29uZmlnTWFya2VyTGF5ZXIoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnY2x1c3Rlcic6IHtcbiAgICAgICAgdGhpcy5sYXllciA9IHRoaXMuY29uZmlnQ2x1c3RlckxheWVyKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2hlYXQnOiB7XG4gICAgICAgIHRoaXMubGF5ZXIgPSB0aGlzLmNvbmZpZ0hlYXRMYXllcigpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgcmVuZGVyVHlwZSDkuI3mlK/mjIFcIiR7dGhpcy5vcHRpb25zLnJlbmRlclR5cGV9XCJgKVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLm1hcC5hZGRMYXllcih0aGlzLmxheWVyKVxuICAgIHJldHVybiB0aGlzXG4gIH1cbiAgcHVibGljIHNldE9wdGlvbnMob3B0aW9uczogTWFya2Vyc0xheWVyT3B0aW9ucywgcmVkcmF3ID0gZmFsc2UpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucylcbiAgICBpZiAocmVkcmF3KSB7XG4gICAgICB0aGlzLnJlZHJhdygpXG4gICAgfVxuICB9XG4gIHB1YmxpYyBmaXRCb3VuZHMoKSB7XG4gICAgdGhpcy5tYXAuZml0Qm91bmRzKHRoaXMuZ2V0Qm91bmRzKCkpXG4gIH1cbiAgcHVibGljIGdldEJvdW5kcygpOiBMLkxhdExuZ0JvdW5kc0V4cHJlc3Npb24ge1xuICAgIGlmICh0aGlzLm1hcmtlcnMubGVuZ3RoIDw9IDApIHtcbiAgICAgIHJldHVybiB0aGlzLm1hcC5nZXRCb3VuZHMoKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5tYXJrZXJzLm1hcChcbiAgICAgIChtYXJrZXIpID0+XG4gICAgICAgIFttYXJrZXIuZ2V0TGF0TG5nKCkubGF0LCBtYXJrZXIuZ2V0TGF0TG5nKCkubG5nXSBhcyBbbnVtYmVyLCBudW1iZXJdXG4gICAgKVxuICB9XG4gIHB1YmxpYyBkZXN0cm95KCkge1xuICAgIC8vIFRPRE86IOWwhuS6i+S7tuenu+mZpFxuICAgIGlmICh0aGlzLmxheWVyKSB7XG4gICAgICB0aGlzLmxheWVyLnJlbW92ZSgpXG4gICAgfVxuICB9XG4gIHB1YmxpYyB0b2dnbGVWaXNpYmxlKHZpc2libGU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLnZpc2libGUgPSB2aXNpYmxlXG4gICAgaWYgKCF0aGlzLmxheWVyKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKHZpc2libGUpIHtcbiAgICAgIHRoaXMubWFwLmFkZExheWVyKHRoaXMubGF5ZXIpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMubGF5ZXIpXG4gICAgfVxuICB9XG4gIHB1YmxpYyBjaGFuZ2VDb2xvcihjb2xvcjogc3RyaW5nKSB7XG4gICAgdGhpcy5vcHRpb25zLmljb25Db2xvciA9IGNvbG9yXG4gICAgdGhpcy5yZWRyYXcoKVxuICB9XG4gIHB1YmxpYyBjaGFuZ2VJY29uKGljb25Vbmljb2RlOiBzdHJpbmcpIHtcbiAgICB0aGlzLm9wdGlvbnMuaWNvblVuaWNvZGUgPSBpY29uVW5pY29kZVxuICAgIHRoaXMucmVkcmF3KClcbiAgfVxuICBwdWJsaWMgcGl0Y2goaWQ6IHN0cmluZykge1xuICAgIHRoaXMubWFya2Vycy5mb3JFYWNoKChtYXJrZXIpID0+IHtcbiAgICAgIGlmIChtYXJrZXIuZ2V0RGF0YSgpLmlkID09PSBpZCkge1xuICAgICAgICBtYXJrZXIuZmlyZSgnY2xpY2snKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9KVxuICB9XG4gIC8qKiDmuLLmn5PkuLrmlaPngrnlm74gKi9cbiAgcHJvdGVjdGVkIGNvbmZpZ01hcmtlckxheWVyKCkge1xuICAgIGlmICh0aGlzLm1hcmtlckxheWVyKSB7XG4gICAgICB0aGlzLm1hcmtlckxheWVyLnJlbW92ZSgpXG4gICAgfVxuICAgIC8vIFRPRE86IOS8mOWMllxuICAgIHRoaXMuaW5pdE1hcmtlcnMoKVxuICAgIGNvbnN0IGNhbnZhc0ljb25MYXllciA9IEwuY2FudmFzSWNvbkxheWVyKHt9KS5hZGRUbyh0aGlzLm1hcClcbiAgICAvLyDmt7vliqDngrnlh7vkuovku7ZcbiAgICBjYW52YXNJY29uTGF5ZXIuYWRkT25DbGlja0xpc3RlbmVyKChfLCBbeyBkYXRhOiBtYXJrZXIgfV0pID0+IHtcbiAgICAgIHRoaXMubWFya2VyQ2xpY2tIYW5kbGVyKG1hcmtlciBhcyBNYXJrZXIpXG4gICAgfSlcbiAgICAvLyDmt7vliqAgaG92ZXIg5LqL5Lu2XG4gICAgY2FudmFzSWNvbkxheWVyLmFkZE9uSG92ZXJMaXN0ZW5lcigoXywgW3sgZGF0YTogbWFya2VyIH1dKSA9PiB7XG4gICAgICAvLyDkuYvliY3mnIkgaG92ZXIg55qE5YWz6ZetIHRvb2x0aXBcbiAgICAgIGlmICh0aGlzLmhvdmVyZWRNYXJrZXIpIHtcbiAgICAgICAgdGhpcy5ob3ZlcmVkTWFya2VyLmNsb3NlVG9vbHRpcCgpXG4gICAgICB9XG4gICAgICB0aGlzLmhvdmVyZWRNYXJrZXIgPSBtYXJrZXIgYXMgTWFya2VyXG5cbiAgICAgIGlmICh0aGlzLmhvdmVyZWRNYXJrZXIuZ2V0VG9vbHRpcCgpKSB7XG4gICAgICAgIC8vIOWmguaenOW3sue7j+iuvue9riB0b29sdGlwIOebtOaOpeWxleekuiB0b29sdGlwXG4gICAgICAgIHRoaXMuaG92ZXJlZE1hcmtlci5vcGVuVG9vbHRpcCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyDlkKbliJnnu5HlrpogdG9vbHRpcCDlubblsZXnpLpcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50b29sdGlwQXR0cikge1xuICAgICAgICAgIHRoaXMuaG92ZXJlZE1hcmtlci5iaW5kVG9vbHRpcChcbiAgICAgICAgICAgICcnICsgdGhpcy5ob3ZlcmVkTWFya2VyLmdldERhdGEoKVt0aGlzLm9wdGlvbnMudG9vbHRpcEF0dHJdXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICBjYW52YXNJY29uTGF5ZXIuYWRkTWFya2Vycyh0aGlzLm1hcmtlcnMpXG5cbiAgICB0aGlzLm1hcC5vbignem9vbXN0YXJ0JywgKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnZpc2libGUpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZiAodGhpcy50eXBlID09PSAnbWFya2VyJykge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnJlbmRlclR5cGUgPT09ICdwb2ludCcpIHtcbiAgICAgICAgICB0aGlzLm1hcC5yZW1vdmVMYXllcih0aGlzLm1hcmtlckxheWVyKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm1hcC5yZW1vdmVMYXllcih0aGlzLm1hcmtlckxheWVyKVxuICAgICAgfVxuICAgIH0pXG4gICAgdGhpcy5tYXAub24oJ3pvb21lbmQnLCAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMudmlzaWJsZSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdtYXJrZXInKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMucmVuZGVyVHlwZSA9PT0gJ3BvaW50Jykge1xuICAgICAgICAgIHRoaXMubWFwLmFkZExheWVyKHRoaXMubWFya2VyTGF5ZXIpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubWFwLmFkZExheWVyKHRoaXMubWFya2VyTGF5ZXIpXG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIOino+WGs+WIneasoea4suafk+S4jeWHuuWbvuagh+mXrumimFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5tYXAucGFuVG8odGhpcy5tYXAuZ2V0Q2VudGVyKCkpXG4gICAgfSlcblxuICAgIHRoaXMubWFya2VyTGF5ZXIgPSBjYW52YXNJY29uTGF5ZXJcbiAgICByZXR1cm4gdGhpcy5tYXJrZXJMYXllclxuICB9XG4gIHByb3RlY3RlZCBnZXRUb29sVGlwQ29udGVudChkYXRhOiBEYXRhTGlzdEl0ZW0pIHtcbiAgICByZXR1cm4gJycgKyBkYXRhW3RoaXMub3B0aW9ucy50b29sdGlwQXR0cl1cbiAgfVxuICBwcml2YXRlIGluaXRNYXJrZXJzKCkge1xuICAgIHRoaXMubWFya2VycyA9IFtdXG4gICAgdGhpcy5kYXRhTGlzdC5mb3JFYWNoKChkYXRhKSA9PiB7XG4gICAgICBjb25zdCBsYXllciA9IEwuZ2VvSlNPTihkYXRhLmdlb21ldHJ5KS5nZXRMYXllcnMoKVswXVxuXG4gICAgICBjb25zdCBtYXJrZXIgPSBuZXcgTWFya2VyKFxuICAgICAgICBbXG4gICAgICAgICAgKGxheWVyIGFzIEwuTWFya2VyKS5nZXRMYXRMbmcoKS5sYXQsXG4gICAgICAgICAgKGxheWVyIGFzIEwuTWFya2VyKS5nZXRMYXRMbmcoKS5sbmcsXG4gICAgICAgIF0sXG4gICAgICAgIHtcbiAgICAgICAgICBpY29uOiB0aGlzLmdldE1hcmtlckljb24oZGF0YSksXG4gICAgICAgIH1cbiAgICAgIClcblxuICAgICAgLy8g5bCG55u45YWz5YC857uR5a6a5YiwIG1hcmtlcuS4ilxuICAgICAgbWFya2VyLnNldERhdGEoZGF0YSlcblxuICAgICAgdGhpcy5tYXJrZXJzLnB1c2gobWFya2VyKVxuICAgIH0pXG4gIH1cbiAgLy8g5aSE55CGIG1hcmtlciDngrnlh7vkuovku7ZcbiAgcHJpdmF0ZSBtYXJrZXJDbGlja0hhbmRsZXIobWFya2VyOiBNYXJrZXIpIHtcbiAgICB0aGlzLmZvY3VzZWRNYXJrZXIgPSBtYXJrZXJcbiAgICAvLyDliKDpmaTliY3kuIDkuKrmlL7lpKflm77moIdcbiAgICBpZiAodGhpcy5mb2N1c2VkRGlzcGxheU1hcmtlcikge1xuICAgICAgdGhpcy5mb2N1c2VkRGlzcGxheU1hcmtlci5yZW1vdmVGcm9tKHRoaXMubWFwKVxuICAgIH1cbiAgICAvLyDnlJ/miJDlvZPliY3mlL7lpKflm77moIdcbiAgICB0aGlzLmZvY3VzZWREaXNwbGF5TWFya2VyID0gbmV3IE1hcmtlcihtYXJrZXIuZ2V0TGF0TG5nKCksIHtcbiAgICAgIGljb246IHRoaXMuZ2V0TGFyZ2VyTWFya2VySWNvbihtYXJrZXIuZ2V0RGF0YSgpKSxcbiAgICB9KVxuICAgIHRoaXMuZm9jdXNlZERpc3BsYXlNYXJrZXIuYWRkVG8odGhpcy5tYXApXG5cbiAgICB0aGlzLmZvY3VzZWREaXNwbGF5TWFya2VyXG4gICAgICAuYmluZFBvcHVwKHRoaXMuZ2V0UG9wdXBDb250ZW50KG1hcmtlci5nZXREYXRhKCkpKVxuICAgICAgLm9wZW5Qb3B1cCgpXG4gICAgdGhpcy5mb2N1c2VkRGlzcGxheU1hcmtlci5vbigncG9wdXBjbG9zZScsICgpID0+IHtcbiAgICAgIHRoaXMuZm9jdXNlZERpc3BsYXlNYXJrZXIucmVtb3ZlKClcbiAgICB9KVxuXG4gICAgdGhpcy5tYXAucGFuVG8odGhpcy5mb2N1c2VkTWFya2VyLmdldExhdExuZygpKVxuICAgIHRoaXMuY2hhbm5lbEZ1bmMoJ29uLWNsaWNrLW1hcmtlcicsIG1hcmtlcilcbiAgfVxuICBwcml2YXRlIGNvbmZpZ0NsdXN0ZXJMYXllcigpIHtcbiAgICAvLyDlsZXnpLrogZrlkIjlm77lsYJcbiAgICBpZiAodGhpcy5jbHVzdGVyTGF5ZXIpIHtcbiAgICAgIHRoaXMuY2x1c3RlckxheWVyLnJlbW92ZSgpXG4gICAgfVxuICAgIHRoaXMuY2x1c3RlckxheWVyID0gTC5tYXJrZXJDbHVzdGVyR3JvdXAoKVxuICAgIHRoaXMuY2x1c3RlckxheWVyLmFkZExheWVycyhcbiAgICAgIHRoaXMubWFya2Vycy5tYXAoKG0pID0+IHtcbiAgICAgICAgY29uc3QgbWFya2VyID0gbmV3IE1hcmtlcihtLmdldExhdExuZygpLCB7XG4gICAgICAgICAgaWNvbjogdGhpcy5nZXRNYXJrZXJJY29uKG0uZ2V0RGF0YSgpKSxcbiAgICAgICAgfSlcbiAgICAgICAgbWFya2VyLnNldERhdGEobS5nZXREYXRhKCkpXG4gICAgICAgIG1hcmtlci5iaW5kVG9vbHRpcCgnJyArIG1hcmtlci5nZXREYXRhKClbdGhpcy5vcHRpb25zLnRvb2x0aXBBdHRyXSlcbiAgICAgICAgbWFya2VyLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICB0aGlzLm1hcmtlckNsaWNrSGFuZGxlcihtYXJrZXIpXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBtYXJrZXJcbiAgICAgIH0pXG4gICAgKVxuICAgIHJldHVybiB0aGlzLmNsdXN0ZXJMYXllclxuICB9XG5cbiAgLyoqIOa4suafk+S4uueDreWKm+WbviAqL1xuICBwcml2YXRlIGNvbmZpZ0hlYXRMYXllcigpIHtcbiAgICBpZiAodGhpcy5oZWF0TGF5ZXIpIHtcbiAgICAgIHRoaXMuaGVhdExheWVyLnJlbW92ZSgpXG4gICAgfVxuICAgIHRoaXMubWFya2Vycy5mb3JFYWNoKChtYXJrZXIpID0+IHtcbiAgICAgIGNvbnN0IGxhdExuZyA9IG1hcmtlci5nZXRMYXRMbmcoKVxuICAgICAgY29uc3QgZGltZW5zaW9uQXR0ciA9XG4gICAgICAgIHRoaXMub3B0aW9ucy5oZWF0T3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMuaGVhdE9wdGlvbnMuZGltZW5zaW9uQXR0clxuICAgICAgbGV0IGFsdCA9XG4gICAgICAgIChkaW1lbnNpb25BdHRyICYmIG1hcmtlci5nZXREYXRhKClbZGltZW5zaW9uQXR0cl0pIHx8XG4gICAgICAgIHRoaXMub3B0aW9ucy5oZWF0T3B0aW9ucy5tYXhcbiAgICAgIGlmICh0eXBlb2YgYWx0ICE9PSAnbnVtYmVyJykge1xuICAgICAgICBhbHQgPSB0aGlzLm9wdGlvbnMuaGVhdE9wdGlvbnMubWF4XG4gICAgICB9XG4gICAgICBtYXJrZXIuc2V0TGF0TG5nKEwubGF0TG5nKGxhdExuZy5sYXQsIGxhdExuZy5sbmcsIGFsdCkpXG4gICAgfSlcbiAgICB0aGlzLmhlYXRMYXllciA9IEwuaGVhdExheWVyKFxuICAgICAgdGhpcy5tYXJrZXJzLm1hcCgoaXQpID0+IGl0LmdldExhdExuZygpKSxcbiAgICAgIC8vIFRPRE86IOS9v+eUqCBtZXJnZUNvbmZpZyDnroDljJZcbiAgICAgIE9iamVjdC5hc3NpZ24oe30sIHRoaXMub3B0aW9ucy5oZWF0T3B0aW9ucywgeyBtaW5PcGFjaXR5OiAxIH0pXG4gICAgKVxuICAgIHJldHVybiB0aGlzLmhlYXRMYXllclxuICB9XG5cbiAgcHJpdmF0ZSBnZXRMYXJnZXJNYXJrZXJJY29uKGRhdGE6IERhdGFMaXN0SXRlbSkge1xuICAgIHJldHVybiB0aGlzLl9nZXRNYXJrZXJJY29uKGRhdGEsIHRydWUpXG4gIH1cblxuICBwcml2YXRlIGdldE1hcmtlckljb24oZGF0YTogRGF0YUxpc3RJdGVtKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldE1hcmtlckljb24oZGF0YSwgZmFsc2UpXG4gIH1cblxuICAvKiog6I635Y+W5b2T5YmNIG1hcmtlciDpnIDopoHlsZXnpLrnmoQgaWNvbiAqL1xuICBwcml2YXRlIF9nZXRNYXJrZXJJY29uKFxuICAgIGRhdGE6IERhdGFMaXN0SXRlbSxcbiAgICBpc0xhcmdlcjogYm9vbGVhblxuICApOiBMLkljb24gfCBMLkRpdkljb24ge1xuICAgIGNvbnN0IGljb25TaXplID0gdGhpcy5vcHRpb25zLmljb25TaXplXG4gICAgY29uc3QgaWNvbkFuY2hvciA9IHRoaXMub3B0aW9ucy5pY29uQW5jaG9yXG4gICAgY29uc3QgbGFyZ2VySWNvblNpemUgPSBbaWNvblNpemVbMF0gKiAxLjUsIGljb25TaXplWzFdICogMS41XSBhcyBbXG4gICAgICBudW1iZXIsXG4gICAgICBudW1iZXJcbiAgICBdXG4gICAgY29uc3QgbGFyZ2VySWNvbkFuY2hvciA9IFtpY29uQW5jaG9yWzBdICogMS41LCBpY29uQW5jaG9yWzFdICogMS41XSBhcyBbXG4gICAgICBudW1iZXIsXG4gICAgICBudW1iZXJcbiAgICBdXG5cbiAgICBjb25zdCBpY29uQ29sb3IgPSB0aGlzLm9wdGlvbnMuaWNvbkNvbG9yXG5cbiAgICBzd2l0Y2ggKHRoaXMub3B0aW9ucy5pY29uVHlwZSkge1xuICAgICAgY2FzZSAnaW1hZ2UnOiB7XG4gICAgICAgIC8vIHJldHVybiBMLmljb24oe1xuICAgICAgICAvLyAgIGljb25Vcmw6IHRoaXMub3B0aW9ucy5pY29uSW1hZ2VVcmwsXG4gICAgICAgIC8vICAgaWNvblNpemU6IGlzTGFyZ2VyID8gbGFyZ2VySWNvblNpemUgOiBpY29uU2l6ZSxcbiAgICAgICAgLy8gICBpY29uQW5jaG9yLFxuICAgICAgICAvLyB9KVxuICAgICAgfVxuICAgICAgY2FzZSAnZm9udF9jbGFzcyc6XG4gICAgICBjYXNlICdzeW1ib2wnOlxuICAgICAgY2FzZSAndW5pY29kZSc6IHtcbiAgICAgICAgcmV0dXJuIEwuZGl2SWNvbih7XG4gICAgICAgICAgaHRtbDogdGhpcy5nZXRDdXN0b21JY29uSFRNTChkYXRhLCB7XG4gICAgICAgICAgICBpY29uU2l6ZTogaXNMYXJnZXIgPyBsYXJnZXJJY29uU2l6ZSA6IGljb25TaXplLFxuICAgICAgICAgICAgaWNvbkNvbG9yLFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGNsYXNzTmFtZTogaXNMYXJnZXIgPyAnbGFyZ2UtZGl2LWljb24tbWFya2VyJyA6ICcnLFxuICAgICAgICAgIGljb25TaXplOiBpc0xhcmdlciA/IGxhcmdlckljb25TaXplIDogaWNvblNpemUsXG4gICAgICAgICAgaWNvbkFuY2hvcjogaXNMYXJnZXIgPyBsYXJnZXJJY29uQW5jaG9yIDogaWNvbkFuY2hvcixcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDlm77moIfnsbvlnovkuI3mlK/mjIFcIiR7dGhpcy5vcHRpb25zLmljb25UeXBlfVwiYClcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcHJpdmF0ZSBnZXRDdXN0b21JY29uSFRNTChcbiAgICBkYXRhOiBEYXRhTGlzdEl0ZW0sXG4gICAgb3B0aW9ucz86IEljb25SZW5kZXJGdW5jT3B0aW9uXG4gICk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5pY29uUmVuZGVyZXIpIHtcbiAgICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmljb25SZW5kZXJlcihkYXRhLCBvcHRpb25zKVxuICAgIH1cbiAgICBzd2l0Y2ggKHRoaXMub3B0aW9ucy5yZW5kZXJQb2ludENvbG9yVHlwZSkge1xuICAgICAgY2FzZSAnc2luZ2xlJzoge1xuICAgICAgICBzd2l0Y2ggKHRoaXMub3B0aW9ucy5pY29uVHlwZSkge1xuICAgICAgICAgIC8vIOS9v+eUqCBjbGFzc1xuICAgICAgICAgIGNhc2UgJ2ZvbnRfY2xhc3MnOiB7XG4gICAgICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgICA8aSBjbGFzcz1cIiR7dGhpcy5vcHRpb25zLmljb25DbGFzc31cIlxuICAgICAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgICBjb2xvcjogJHtvcHRpb25zLmljb25Db2xvcn07XG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6ICR7b3B0aW9ucy5pY29uU2l6ZVswXX1weDtcbiAgICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIOS9v+eUqCBzdmdcbiAgICAgICAgICBjYXNlICdzeW1ib2wnOiB7XG4gICAgICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgICA8c3ZnIGNsYXNzPVwiaWNvbi1zeW1ib2xcIiBhcmlhLWhpZGRlbj1cInRydWVcIj5cbiAgICAgICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9XCIke3RoaXMub3B0aW9ucy5pY29uU3ltYm9sfVwiIC8+XG4gICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgYFxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyDkvb/nlKggdW5pY29kZVxuICAgICAgICAgIGNhc2UgJ3VuaWNvZGUnOiB7XG4gICAgICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgICA8aVxuICAgICAgICAgICAgICAgIGNsYXNzPVwiJHt0aGlzLm9wdGlvbnMuaWNvbkNsYXNzfVwiXG4gICAgICAgICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiAke29wdGlvbnMuaWNvbkNvbG9yfTtcbiAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogJHtvcHRpb25zLmljb25TaXplWzBdfXB4O1xuICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICR7dGhpcy5vcHRpb25zLmljb25Vbmljb2RlfVxuICAgICAgICAgICAgICA8L2k+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdzZWdtZW50ZWQnOiB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5vcHRpb25zLmljb25UeXBlKSB7XG4gICAgICAgICAgLy8g5L2/55SoIGNsYXNzXG4gICAgICAgICAgY2FzZSAnZm9udF9jbGFzcyc6IHtcbiAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAgIDxpXG4gICAgICAgICAgICAgICAgY2xhc3M9XCIke3RoaXMub3B0aW9ucy5pY29uQ2xhc3N9XCJcbiAgICAgICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICAgICAgY29sb3I6ICR7dGhpcy5nZXRTZWdtZW50ZWRNYXJrZXJDb2xvcihkYXRhKX07XG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6ICR7b3B0aW9ucy5pY29uU2l6ZVswXX1weDtcbiAgICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIOS9v+eUqCBzdmdcbiAgICAgICAgICBjYXNlICdzeW1ib2wnOiB7XG4gICAgICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgICA8c3ZnIGNsYXNzPVwiaWNvbi1zeW1ib2xcIiBhcmlhLWhpZGRlbj1cInRydWVcIj5cbiAgICAgICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9XCIke3RoaXMub3B0aW9ucy5pY29uU3ltYm9sfVwiIC8+XG4gICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgYFxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyDkvb/nlKggdW5pY29kZVxuICAgICAgICAgIGNhc2UgJ3VuaWNvZGUnOiB7XG4gICAgICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgICA8aVxuICAgICAgICAgICAgICAgIGNsYXNzPVwiJHt0aGlzLm9wdGlvbnMuaWNvbkNsYXNzfVwiXG4gICAgICAgICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiAke3RoaXMuZ2V0U2VnbWVudGVkTWFya2VyQ29sb3IoZGF0YSl9O1xuICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAke29wdGlvbnMuaWNvblNpemVbMF19cHg7XG4gICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgJHt0aGlzLm9wdGlvbnMuaWNvblVuaWNvZGV9XG4gICAgICAgICAgICAgIDwvaT5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGByZW5kZXJQb2ludENvbG9yVHlwZSDkuI3mlK/mjIFcIiR7dGhpcy5vcHRpb25zLnJlbmRlclBvaW50Q29sb3JUeXBlfVwiYFxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICB9XG4gIHByaXZhdGUgY2FjaGVTZWdtZW50UGFyYW1zKCkge1xuICAgIGNvbnN0IHNlZ21lbnRlZExlbmd0aCA9IHRoaXMub3B0aW9ucy5zZWdtZW50ZWRDb2xvcnMubGVuZ3RoXG4gICAgbGV0IG1heFZhbCA9IC1JbmZpbml0eVxuICAgIGxldCBtaW5WYWwgPSBJbmZpbml0eVxuICAgIGZvciAoY29uc3QgZGF0YSBvZiB0aGlzLmRhdGFMaXN0KSB7XG4gICAgICBjb25zdCB2YWwgPSBkYXRhW3RoaXMub3B0aW9ucy5zZWdtZW50ZWRBdHRyXVxuICAgICAgbWF4VmFsID0gTWF0aC5tYXgobWF4VmFsLCB2YWwpXG4gICAgICBtaW5WYWwgPSBNYXRoLm1pbihtaW5WYWwsIHZhbClcbiAgICB9XG4gICAgY29uc3Qgc3RlcCA9IChtYXhWYWwgLSBtaW5WYWwgKyAxKSAvIHNlZ21lbnRlZExlbmd0aFxuICAgIHRoaXMuc2VnbWVudGVkTWluID0gbWluVmFsXG4gICAgdGhpcy5zZWdtZW50ZWRTdGVwID0gc3RlcFxuICB9XG4gIHByaXZhdGUgZ2V0U2VnbWVudGVkTWFya2VyQ29sb3IoZGF0YTogRGF0YUxpc3RJdGVtKTogc3RyaW5nIHtcbiAgICBjb25zdCB2YWwgPSBkYXRhW3RoaXMub3B0aW9ucy5zZWdtZW50ZWRBdHRyXVxuICAgIGNvbnN0IGNvbG9yID0gdGhpcy5vcHRpb25zLnNlZ21lbnRlZENvbG9yc1tcbiAgICAgICh2YWwgLSB0aGlzLnNlZ21lbnRlZE1pbikgLyB0aGlzLnNlZ21lbnRlZFN0ZXBcbiAgICBdXG4gICAgcmV0dXJuIGNvbG9yXG4gIH1cbiAgcHJpdmF0ZSBnZXRQb3B1cENvbnRlbnQoZGF0YTogRGF0YUxpc3RJdGVtKSB7XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMucG9wdXBBdHRyKSB7XG4gICAgICByZXR1cm4gJydcbiAgICB9XG4gICAgcmV0dXJuIGAke3RoaXMub3B0aW9ucy5wb3B1cEF0dHJ9OiAke2RhdGFbdGhpcy5vcHRpb25zLnBvcHVwQXR0cl19YFxuICB9XG59XG4iLCJpbXBvcnQgeyBEYXRhTGlzdEl0ZW0sIENoYW5uZWxGdW5jIH0gZnJvbSAnLi4vZGVmaW5pdGlvbnMnXG5pbXBvcnQgTWFya2Vyc0xheWVyLCB7IE1hcmtlcnNMYXllck9wdGlvbnMgfSBmcm9tICcuL01hcmtlcnNMYXllcidcbmludGVyZmFjZSBNYXJrZXJzQnVmZmVyTGF5ZXJPcHRpb25zIGV4dGVuZHMgTWFya2Vyc0xheWVyT3B0aW9ucyB7XG4gIGJ1ZmZlclRvb2x0aXBBdHRyOiBzdHJpbmdcbiAgYnVmZmVyT3B0aW9uczogTC5DaXJjbGVNYXJrZXJPcHRpb25zXG59XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXJrZXJzQnVmZmVyTGF5ZXIgZXh0ZW5kcyBNYXJrZXJzTGF5ZXIge1xuICBwdWJsaWMgb3B0aW9uczogTWFya2Vyc0J1ZmZlckxheWVyT3B0aW9uc1xuICBwcml2YXRlIGJ1ZmZlckxheWVyOiBMLkxheWVyR3JvdXBcbiAgY29uc3RydWN0b3IoXG4gICAgbWFwOiBMLk1hcCxcbiAgICBkYXRhTGlzdDogRGF0YUxpc3RJdGVtW10sXG4gICAgb3B0aW9uczogTWFya2Vyc0J1ZmZlckxheWVyT3B0aW9ucyxcbiAgICBjaGFubmVsRnVuYzogQ2hhbm5lbEZ1bmNcbiAgKSB7XG4gICAgc3VwZXIobWFwLCBkYXRhTGlzdCwgb3B0aW9ucywgY2hhbm5lbEZ1bmMpXG4gICAgdGhpcy50eXBlID0gJ21hcmtlckJ1ZmZlcidcbiAgICBjb25zdCBkZWZhdWx0QnVmZmVyT3B0aW9uczogTC5DaXJjbGVNYXJrZXJPcHRpb25zID0ge1xuICAgICAgcmFkaXVzOiAxMDAwLFxuICAgICAgc3Ryb2tlOiB0cnVlLFxuICAgICAgd2VpZ2h0OiAxLFxuICAgIH1cbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKFxuICAgICAgdGhpcy5vcHRpb25zLFxuICAgICAgeyBidWZmZXJPcHRpb25zOiBkZWZhdWx0QnVmZmVyT3B0aW9ucyB9LFxuICAgICAgb3B0aW9uc1xuICAgIClcbiAgfVxuXG4gIHB1YmxpYyBkcmF3KG9wdGlvbnM/OiBNYXJrZXJzQnVmZmVyTGF5ZXJPcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXG4gICAgcmV0dXJuIHRoaXMucmVkcmF3KClcbiAgfVxuXG4gIHB1YmxpYyByZWRyYXcoKSB7XG4gICAgaWYgKCF0aGlzLnZpc2libGUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodGhpcy5tYXJrZXJMYXllcikge1xuICAgICAgdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcy5tYXJrZXJMYXllcilcbiAgICB9XG4gICAgaWYgKHRoaXMuYnVmZmVyTGF5ZXIpIHtcbiAgICAgIHRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMuYnVmZmVyTGF5ZXIpXG4gICAgfVxuICAgIHRoaXMubWFya2VyTGF5ZXIgPSB0aGlzLmNvbmZpZ01hcmtlckxheWVyKClcbiAgICB0aGlzLmJ1ZmZlckxheWVyID0gdGhpcy5jb25maWdCdWZmZXJMYXllcigpXG4gICAgdGhpcy5tYXAuYWRkTGF5ZXIodGhpcy5tYXJrZXJMYXllcilcbiAgICB0aGlzLm1hcC5hZGRMYXllcih0aGlzLmJ1ZmZlckxheWVyKVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBwcml2YXRlIGNvbmZpZ0J1ZmZlckxheWVyKCkge1xuICAgIGNvbnN0IGdyb3VwTGF5ZXIgPSBMLmxheWVyR3JvdXAoKVxuICAgIHRoaXMubWFya2Vycy5mb3JFYWNoKChtYXJrZXIpID0+IHtcbiAgICAgIGNvbnN0IGNpcmNsZUxheWVyID0gTC5jaXJjbGUoXG4gICAgICAgIG1hcmtlci5nZXRMYXRMbmcoKSxcbiAgICAgICAgdGhpcy5vcHRpb25zLmJ1ZmZlck9wdGlvbnNcbiAgICAgIClcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuYnVmZmVyVG9vbHRpcEF0dHIpIHtcbiAgICAgICAgY2lyY2xlTGF5ZXIuYmluZFRvb2x0aXAoXG4gICAgICAgICAgJycgKyBtYXJrZXIuZ2V0RGF0YSgpW3RoaXMub3B0aW9ucy5idWZmZXJUb29sdGlwQXR0cl1cbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgZ3JvdXBMYXllci5hZGRMYXllcihjaXJjbGVMYXllcilcbiAgICB9KVxuICAgIHJldHVybiBncm91cExheWVyXG4gIH1cbn1cbiIsImltcG9ydCB7IERhdGFMaXN0SXRlbSB9IGZyb20gJy4uL2RlZmluaXRpb25zJ1xuXG5leHBvcnQgdHlwZSBQb2x5bGluZU9wdGlvbnMgPSBMLkxhdExuZ0V4cHJlc3Npb25bXSB8IEwuTGF0TG5nRXhwcmVzc2lvbltdW11cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvbHlsaW5lIGV4dGVuZHMgTC5Qb2x5bGluZSB7XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp2YXJpYWJsZS1uYW1lXG4gIHByaXZhdGUgX19kYXRhOiBEYXRhTGlzdEl0ZW1cbiAgY29uc3RydWN0b3IobGF0bG5nczogUG9seWxpbmVPcHRpb25zLCBvcHRpb25zPzogTC5Qb2x5bGluZU9wdGlvbnMpIHtcbiAgICBzdXBlcihsYXRsbmdzLCBvcHRpb25zKVxuICB9XG4gIHB1YmxpYyBzZXREYXRhKGRhdGE6IERhdGFMaXN0SXRlbSkge1xuICAgIHRoaXMuX19kYXRhID0gZGF0YVxuICB9XG4gIHB1YmxpYyBnZXREYXRhKCkge1xuICAgIHJldHVybiB0aGlzLl9fZGF0YVxuICB9XG59XG4iLCJpbXBvcnQgeyBEYXRhTGlzdEl0ZW0sIENoYW5uZWxGdW5jIH0gZnJvbSAnLi4vZGVmaW5pdGlvbnMnXG5pbXBvcnQgUG9seWxpbmUsIHsgUG9seWxpbmVPcHRpb25zIH0gZnJvbSAnLi9Qb2x5bGluZSdcblxuLyoqIOa4suafk+minOiJsuagt+W8jyDljZXoibJ85YiG5q61ICovXG50eXBlIFBvbHlsaW5lTGF5ZXJSZW5kZXJDb2xvclR5cGUgPSAnc2luZ2xlJyB8ICdzZWdtZW50ZWQnXG5pbnRlcmZhY2UgUG9seWxpbmVMYXllck9wdGlvbnMgZXh0ZW5kcyBMLlBvbHlsaW5lT3B0aW9ucyB7XG4gIHJlbmRlclBvbHlsaW5lQ29sb3JUeXBlOiBQb2x5bGluZUxheWVyUmVuZGVyQ29sb3JUeXBlXG5cbiAgLyoqIHBvcHVwIOWxleekuuWtl+autSAqL1xuICBwb3B1cEF0dHI/OiBzdHJpbmdcbiAgLyoqIHRvb2x0aXAg5bGV56S65a2X5q61ICovXG4gIHRvb2x0aXBBdHRyPzogc3RyaW5nXG5cbiAgb3BhY2l0eT86IG51bWJlclxuXG4gIC8qKiDliIbmrrXmuLLmn5Pnu5/orqHlrZfmrrUgKi9cbiAgc2VnbWVudGVkQXR0cj86IHN0cmluZ1xuICBzZWdtZW50ZWRDb2xvcnM/OiBzdHJpbmdbXVxufVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9seWxpbmVzTGF5ZXIge1xuICBwdWJsaWMgdHlwZTogc3RyaW5nXG5cbiAgcHJvdGVjdGVkIHZpc2libGU6IGJvb2xlYW5cbiAgcHJvdGVjdGVkIGxheWVyOiBMLkxheWVyR3JvdXBcblxuICBwcm90ZWN0ZWQgbWFwOiBMLk1hcFxuICBwcm90ZWN0ZWQgZGF0YUxpc3Q6IERhdGFMaXN0SXRlbVtdXG4gIHByb3RlY3RlZCBvcHRpb25zOiBQb2x5bGluZUxheWVyT3B0aW9uc1xuICBwcm90ZWN0ZWQgY2hhbm5lbEZ1bmM6IENoYW5uZWxGdW5jXG4gIHByb3RlY3RlZCBwb2x5bGluZXM6IFBvbHlsaW5lW11cbiAgcHJvdGVjdGVkIHNlZ21lbnRlZE1pbjogbnVtYmVyXG4gIHByb3RlY3RlZCBzZWdtZW50ZWRTdGVwOiBudW1iZXJcbiAgLy8gcHJpdmF0ZSBmb2N1c2VkUG9seWxpbmU6IFBvbHlsaW5lXG4gIHByb3RlY3RlZCBwb2x5bGluZUxheWVyOiBMLkxheWVyR3JvdXBcbiAgY29uc3RydWN0b3IoXG4gICAgbWFwOiBMLk1hcCxcbiAgICBkYXRhTGlzdDogRGF0YUxpc3RJdGVtW10sXG4gICAgb3B0aW9uczogUG9seWxpbmVMYXllck9wdGlvbnMsXG4gICAgY2hhbm5lbEZ1bmM6IENoYW5uZWxGdW5jXG4gICkge1xuICAgIGNvbnN0IGRlZmF1bHRPcHRpb25zOiBQb2x5bGluZUxheWVyT3B0aW9ucyA9IHtcbiAgICAgIGNvbG9yOiAnIzMzODhGRicsXG4gICAgICByZW5kZXJQb2x5bGluZUNvbG9yVHlwZTogJ3NpbmdsZScsXG4gICAgICBzZWdtZW50ZWRDb2xvcnM6IFsnIzMzODhGRiddLFxuICAgIH1cbiAgICB0aGlzLnR5cGUgPSAncG9seWxpbmUnXG4gICAgdGhpcy5tYXAgPSBtYXBcbiAgICB0aGlzLmRhdGFMaXN0ID0gZGF0YUxpc3RcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgdGhpcy5jaGFubmVsRnVuYyA9IGNoYW5uZWxGdW5jXG5cbiAgICB0aGlzLnZpc2libGUgPSB0cnVlXG4gICAgdGhpcy5wb2x5bGluZXMgPSBbXVxuICAgIHRoaXMuc2VnbWVudGVkTWluID0gSW5maW5pdHlcbiAgICB0aGlzLnNlZ21lbnRlZFN0ZXAgPSAxXG4gICAgLy8gdGhpcy5mb2N1c2VkUG9seWxpbmUgPSBudWxsXG5cbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucywgb3B0aW9ucylcblxuICAgIC8vIOe8k+WtmCBzZWdtZW50IOebuOWFs+aVsOaNrlxuICAgIHRoaXMuY2FjaGVTZWdtZW50UGFyYW1zKClcbiAgICB0aGlzLmluaXRQb2x5bGluZXMoKVxuICB9XG4gIHB1YmxpYyBkcmF3KG9wdGlvbnM/OiBQb2x5bGluZUxheWVyT3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKVxuICAgIHJldHVybiB0aGlzLnJlZHJhdygpXG4gIH1cbiAgcHVibGljIHJlZHJhdygpIHtcbiAgICBpZiAoIXRoaXMudmlzaWJsZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh0aGlzLmxheWVyKSB7XG4gICAgICB0aGlzLmxheWVyLnJlbW92ZSgpXG4gICAgfVxuICAgIHRoaXMubGF5ZXIgPSB0aGlzLmNvbmZpZ1BvbHlsaW5lTGF5ZXIoKVxuICAgIHRoaXMubWFwLmFkZExheWVyKHRoaXMubGF5ZXIpXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuICBwdWJsaWMgZml0Qm91bmRzKCkge1xuICAgIHRoaXMubWFwLmZpdEJvdW5kcyh0aGlzLmdldEJvdW5kcygpKVxuICB9XG4gIHB1YmxpYyBnZXRCb3VuZHMoKTogTC5MYXRMbmdCb3VuZHNFeHByZXNzaW9uIHtcbiAgICBpZiAodGhpcy5wb2x5bGluZXMubGVuZ3RoIDw9IDApIHtcbiAgICAgIHJldHVybiB0aGlzLm1hcC5nZXRCb3VuZHMoKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5wb2x5bGluZXMucmVkdWNlKFxuICAgICAgKHByZXYsIGN1cnIpID0+IHByZXYuZXh0ZW5kKGN1cnIuZ2V0Qm91bmRzKCkpLFxuICAgICAgdGhpcy5wb2x5bGluZXNbMF0uZ2V0Qm91bmRzKClcbiAgICApXG4gIH1cbiAgcHVibGljIGRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMubGF5ZXIpIHtcbiAgICAgIHRoaXMubGF5ZXIucmVtb3ZlKClcbiAgICB9XG4gIH1cbiAgcHVibGljIHRvZ2dsZVZpc2libGUodmlzaWJsZTogYm9vbGVhbikge1xuICAgIHRoaXMudmlzaWJsZSA9IHZpc2libGVcbiAgICBpZiAoIXRoaXMubGF5ZXIpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodmlzaWJsZSkge1xuICAgICAgdGhpcy5tYXAuYWRkTGF5ZXIodGhpcy5sYXllcilcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcy5sYXllcilcbiAgICB9XG4gIH1cbiAgcHVibGljIGNoYW5nZUNvbG9yKGNvbG9yOiBzdHJpbmcpIHtcbiAgICB0aGlzLm9wdGlvbnMuZmlsbENvbG9yID0gY29sb3JcbiAgICB0aGlzLnJlZHJhdygpXG4gIH1cbiAgcHVibGljIHBpdGNoKGlkOiBzdHJpbmcpIHtcbiAgICB0aGlzLnBvbHlsaW5lcy5mb3JFYWNoKChwb2x5bGluZSkgPT4ge1xuICAgICAgaWYgKHBvbHlsaW5lLmdldERhdGEoKS5pZCA9PT0gaWQpIHtcbiAgICAgICAgcG9seWxpbmUuZmlyZSgnY2xpY2snKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9KVxuICB9XG4gIHByb3RlY3RlZCBpbml0UG9seWxpbmVzKCkge1xuICAgIHRoaXMuZGF0YUxpc3QuZm9yRWFjaCgoZGF0YSkgPT4ge1xuICAgICAgdGhpcy5jYWNoZVNlZ21lbnRQYXJhbXMoKVxuXG4gICAgICBjb25zdCBsYXllciA9IEwuZ2VvSlNPTihkYXRhLmdlb21ldHJ5KS5nZXRMYXllcnMoKVswXVxuICAgICAgbGV0IGZpbGxDb2xvciA9IHRoaXMub3B0aW9ucy5maWxsQ29sb3JcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMucmVuZGVyUG9seWxpbmVDb2xvclR5cGUgPT09ICdzZWdtZW50ZWQnKSB7XG4gICAgICAgIGZpbGxDb2xvciA9IHRoaXMuZ2V0U2VnbWVudGVkUG9seWxpbmVDb2xvcihkYXRhKVxuICAgICAgfVxuICAgICAgY29uc3QgcG9seWxpbmUgPSBuZXcgUG9seWxpbmUoXG4gICAgICAgIChsYXllciBhcyBMLlBvbHlsaW5lKS5nZXRMYXRMbmdzKCkgYXMgUG9seWxpbmVPcHRpb25zLFxuICAgICAgICBPYmplY3QuYXNzaWduKHt9LCB0aGlzLm9wdGlvbnMsIHsgZmlsbENvbG9yIH0pXG4gICAgICApXG5cbiAgICAgIC8vIOWwhuebuOWFs+WAvOe7keWumuWIsCBtYXJrZXLkuIpcbiAgICAgIHBvbHlsaW5lLnNldERhdGEoZGF0YSlcblxuICAgICAgdGhpcy5wb2x5bGluZXMucHVzaChwb2x5bGluZSlcbiAgICB9KVxuICB9XG4gIHByb3RlY3RlZCBnZXRTZWdtZW50ZWRQb2x5bGluZUNvbG9yKGRhdGE6IERhdGFMaXN0SXRlbSk6IHN0cmluZyB7XG4gICAgY29uc3QgdmFsID0gZGF0YVt0aGlzLm9wdGlvbnMuc2VnbWVudGVkQXR0cl1cbiAgICBjb25zdCBjb2xvciA9IHRoaXMub3B0aW9ucy5zZWdtZW50ZWRDb2xvcnNbXG4gICAgICAodmFsIC0gdGhpcy5zZWdtZW50ZWRNaW4pIC8gdGhpcy5zZWdtZW50ZWRTdGVwXG4gICAgXVxuICAgIHJldHVybiBjb2xvclxuICB9XG4gIHByb3RlY3RlZCBwb2x5bGluZUNsaWNrSGFuZGxlcihwb2x5bGluZTogUG9seWxpbmUpIHtcbiAgICAvLyB0aGlzLmZvY3VzZWRQb2x5bGluZSA9IHBvbHlsaW5lXG4gICAgdGhpcy5jaGFubmVsRnVuYygnb24tY2xpY2stcG9seWxpbmUnLCBwb2x5bGluZSlcbiAgfVxuICBwcm90ZWN0ZWQgZ2V0VG9vbFRpcENvbnRlbnQoZGF0YTogRGF0YUxpc3RJdGVtKSB7XG4gICAgcmV0dXJuICcnICsgZGF0YVt0aGlzLm9wdGlvbnMudG9vbHRpcEF0dHJdXG4gIH1cbiAgcHJpdmF0ZSBjb25maWdQb2x5bGluZUxheWVyKCkge1xuICAgIHRoaXMucG9seWxpbmVMYXllciA9IEwubGF5ZXJHcm91cCgpXG4gICAgdGhpcy5wb2x5bGluZXMuZm9yRWFjaCgocG9seWxpbmUpID0+IHtcbiAgICAgIGNvbnN0IG9wdGlvbnM6IEwuUG9seWxpbmVPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcHRpb25zLCB7XG4gICAgICAgIGNvbG9yOiB0aGlzLmdldFNlZ21lbnRlZFBvbHlsaW5lQ29sb3IocG9seWxpbmUuZ2V0RGF0YSgpKSxcbiAgICAgIH0pXG4gICAgICBjb25zdCBuZXdQb2x5bGluZSA9IG5ldyBQb2x5bGluZShcbiAgICAgICAgcG9seWxpbmUuZ2V0TGF0TG5ncygpIGFzIFBvbHlsaW5lT3B0aW9ucyxcbiAgICAgICAgb3B0aW9uc1xuICAgICAgKVxuICAgICAgbmV3UG9seWxpbmUub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLnBvbHlsaW5lQ2xpY2tIYW5kbGVyKHBvbHlsaW5lKVxuICAgICAgfSlcbiAgICAgIG5ld1BvbHlsaW5lLnNldERhdGEocG9seWxpbmUuZ2V0RGF0YSgpKVxuICAgICAgaWYgKHRoaXMub3B0aW9ucy50b29sdGlwQXR0cikge1xuICAgICAgICBuZXdQb2x5bGluZS5iaW5kVG9vbHRpcCh0aGlzLmdldFRvb2xUaXBDb250ZW50KG5ld1BvbHlsaW5lLmdldERhdGEoKSkpXG4gICAgICB9XG4gICAgICB0aGlzLnBvbHlsaW5lTGF5ZXIuYWRkTGF5ZXIobmV3UG9seWxpbmUpXG4gICAgfSlcbiAgICByZXR1cm4gdGhpcy5wb2x5bGluZUxheWVyXG4gIH1cbiAgcHJpdmF0ZSBjYWNoZVNlZ21lbnRQYXJhbXMoKSB7XG4gICAgY29uc3Qgc2VnbWVudGVkTGVuZ3RoID0gdGhpcy5vcHRpb25zLnNlZ21lbnRlZENvbG9ycy5sZW5ndGhcbiAgICBsZXQgbWF4VmFsID0gLUluZmluaXR5XG4gICAgbGV0IG1pblZhbCA9IEluZmluaXR5XG4gICAgZm9yIChjb25zdCBkYXRhIG9mIHRoaXMuZGF0YUxpc3QpIHtcbiAgICAgIGNvbnN0IHZhbCA9IGRhdGFbdGhpcy5vcHRpb25zLnNlZ21lbnRlZEF0dHJdXG4gICAgICBtYXhWYWwgPSBNYXRoLm1heChtYXhWYWwsIHZhbClcbiAgICAgIG1pblZhbCA9IE1hdGgubWluKG1pblZhbCwgdmFsKVxuICAgIH1cbiAgICBjb25zdCBzdGVwID0gKG1heFZhbCAtIG1pblZhbCArIDEpIC8gc2VnbWVudGVkTGVuZ3RoXG4gICAgdGhpcy5zZWdtZW50ZWRNaW4gPSBtaW5WYWxcbiAgICB0aGlzLnNlZ21lbnRlZFN0ZXAgPSBzdGVwXG4gIH1cbn1cbiIsImltcG9ydCB7IERhdGFMaXN0SXRlbSwgQ2hhbm5lbEZ1bmMgfSBmcm9tICcuLi9kZWZpbml0aW9ucydcbmltcG9ydCBQb2x5bGluZXNMYXllciBmcm9tICcuL1BvbHlsaW5lc0xheWVyJ1xuXG4vKiog5riy5p+T6aKc6Imy5qC35byPIOWNleiJsnzliIbmrrUgKi9cbnR5cGUgUG9seWxpbmVMYXllclJlbmRlckNvbG9yVHlwZSA9ICdzaW5nbGUnIHwgJ3NlZ21lbnRlZCdcbmludGVyZmFjZSBQb2x5bGluZUJ1ZmZlckxheWVyT3B0aW9ucyBleHRlbmRzIEwuQ29ycmlkb3JPcHRpb25zIHtcbiAgcmVuZGVyUG9seWxpbmVDb2xvclR5cGU6IFBvbHlsaW5lTGF5ZXJSZW5kZXJDb2xvclR5cGVcblxuICAvKiogcG9wdXAg5bGV56S65a2X5q61ICovXG4gIHBvcHVwQXR0cj86IHN0cmluZ1xuICAvKiogdG9vbHRpcCDlsZXnpLrlrZfmrrUgKi9cbiAgdG9vbHRpcEF0dHI/OiBzdHJpbmdcblxuICBvcGFjaXR5PzogbnVtYmVyXG5cbiAgLyoqIOWIhuautea4suafk+e7n+iuoeWtl+autSAqL1xuICBzZWdtZW50ZWRBdHRyPzogc3RyaW5nXG4gIHNlZ21lbnRlZENvbG9ycz86IHN0cmluZ1tdXG59XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb2x5bGluZXNCdWZmZXJMYXllciBleHRlbmRzIFBvbHlsaW5lc0xheWVyIHtcbiAgcHVibGljIHR5cGU6IHN0cmluZ1xuICBwcm90ZWN0ZWQgb3B0aW9uczogUG9seWxpbmVCdWZmZXJMYXllck9wdGlvbnNcbiAgY29uc3RydWN0b3IoXG4gICAgbWFwOiBMLk1hcCxcbiAgICBkYXRhTGlzdDogRGF0YUxpc3RJdGVtW10sXG4gICAgb3B0aW9uczogUG9seWxpbmVCdWZmZXJMYXllck9wdGlvbnMsXG4gICAgY2hhbm5lbEZ1bmM6IENoYW5uZWxGdW5jXG4gICkge1xuICAgIHN1cGVyKG1hcCwgZGF0YUxpc3QsIG9wdGlvbnMsIGNoYW5uZWxGdW5jKVxuICAgIGNvbnN0IGRlZmF1bHRPcHRpb25zOiBQb2x5bGluZUJ1ZmZlckxheWVyT3B0aW9ucyA9IHtcbiAgICAgIHJlbmRlclBvbHlsaW5lQ29sb3JUeXBlOiAnc2luZ2xlJyxcbiAgICAgIHNlZ21lbnRlZENvbG9yczogWycjMzM4OEZGJ10sXG4gICAgICBjb3JyaWRvcjogMTAwLFxuICAgICAgY29sb3I6ICcjMzM4OEZGJyxcbiAgICAgIG9wYWNpdHk6IDAuNSxcbiAgICB9XG4gICAgdGhpcy50eXBlID0gJ3BvbHlsaW5lQnVmZmVyJ1xuICAgIHRoaXMubWFwID0gbWFwXG4gICAgdGhpcy5kYXRhTGlzdCA9IGRhdGFMaXN0XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9uc1xuICAgIHRoaXMuY2hhbm5lbEZ1bmMgPSBjaGFubmVsRnVuY1xuXG4gICAgdGhpcy52aXNpYmxlID0gdHJ1ZVxuICAgIHRoaXMucG9seWxpbmVzID0gW11cbiAgICB0aGlzLnNlZ21lbnRlZE1pbiA9IEluZmluaXR5XG4gICAgdGhpcy5zZWdtZW50ZWRTdGVwID0gMVxuICAgIC8vIHRoaXMuZm9jdXNlZFBvbHlsaW5lID0gbnVsbFxuXG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpXG4gICAgdGhpcy5pbml0UG9seWxpbmVzKClcbiAgfVxuICBwdWJsaWMgZHJhdyhvcHRpb25zPzogUG9seWxpbmVCdWZmZXJMYXllck9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucylcbiAgICByZXR1cm4gdGhpcy5yZWRyYXcoKVxuICB9XG4gIHB1YmxpYyByZWRyYXcoKSB7XG4gICAgaWYgKCF0aGlzLnZpc2libGUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodGhpcy5sYXllcikge1xuICAgICAgdGhpcy5sYXllci5yZW1vdmUoKVxuICAgIH1cbiAgICB0aGlzLmxheWVyID0gdGhpcy5jb25maWdQb2x5bGluZUJ1ZmZlckxheWVyKClcbiAgICB0aGlzLm1hcC5hZGRMYXllcih0aGlzLmxheWVyKVxuICAgIHJldHVybiB0aGlzXG4gIH1cbiAgcHVibGljIGZpdEJvdW5kcygpIHtcbiAgICB0aGlzLm1hcC5maXRCb3VuZHModGhpcy5nZXRCb3VuZHMoKSlcbiAgfVxuICBwdWJsaWMgZ2V0Qm91bmRzKCk6IEwuTGF0TG5nQm91bmRzRXhwcmVzc2lvbiB7XG4gICAgaWYgKHRoaXMucG9seWxpbmVzLmxlbmd0aCA8PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5tYXAuZ2V0Qm91bmRzKClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucG9seWxpbmVzLnJlZHVjZShcbiAgICAgIChwcmV2LCBjdXJyKSA9PiBwcmV2LmV4dGVuZChjdXJyLmdldEJvdW5kcygpKSxcbiAgICAgIHRoaXMucG9seWxpbmVzWzBdLmdldEJvdW5kcygpXG4gICAgKVxuICB9XG4gIHB1YmxpYyBjaGFuZ2VDb2xvcihjb2xvcjogc3RyaW5nKSB7XG4gICAgdGhpcy5vcHRpb25zLmNvbG9yID0gY29sb3JcbiAgICB0aGlzLnJlZHJhdygpXG4gIH1cbiAgcHJpdmF0ZSBjb25maWdQb2x5bGluZUJ1ZmZlckxheWVyKCkge1xuICAgIHRoaXMucG9seWxpbmVMYXllciA9IEwubGF5ZXJHcm91cCgpXG4gICAgdGhpcy5wb2x5bGluZXMuZm9yRWFjaCgocG9seWxpbmUpID0+IHtcbiAgICAgIHBvbHlsaW5lLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5wb2x5bGluZUNsaWNrSGFuZGxlcihwb2x5bGluZSlcbiAgICAgIH0pXG4gICAgICBjb25zdCBvcHRpb25zOiBQb2x5bGluZUJ1ZmZlckxheWVyT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgIHt9LFxuICAgICAgICB0aGlzLm9wdGlvbnMsXG4gICAgICAgIHtcbiAgICAgICAgICBjb2xvcjpcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5yZW5kZXJQb2x5bGluZUNvbG9yVHlwZSA9PT0gJ3NpbmdsZSdcbiAgICAgICAgICAgICAgPyB0aGlzLm9wdGlvbnMuY29sb3JcbiAgICAgICAgICAgICAgOiB0aGlzLmdldFNlZ21lbnRlZFBvbHlsaW5lQ29sb3IocG9seWxpbmUuZ2V0RGF0YSgpKSxcbiAgICAgICAgfVxuICAgICAgKVxuXG4gICAgICBjb25zdCBwb2x5bGluZUJ1ZmZlciA9IEwuY29ycmlkb3IoXG4gICAgICAgIChwb2x5bGluZS5nZXRMYXRMbmdzKCkgYXMgTC5MYXRMbmdbXSkubWFwKChsYXRMbmcpID0+XG4gICAgICAgICAgTC5sYXRMbmcoW2xhdExuZy5sYXQsIGxhdExuZy5sbmddKVxuICAgICAgICApLFxuICAgICAgICBvcHRpb25zXG4gICAgICApXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnRvb2x0aXBBdHRyKSB7XG4gICAgICAgIHBvbHlsaW5lQnVmZmVyLmJpbmRUb29sdGlwKHRoaXMuZ2V0VG9vbFRpcENvbnRlbnQocG9seWxpbmUuZ2V0RGF0YSgpKSlcbiAgICAgIH1cbiAgICAgIHRoaXMucG9seWxpbmVMYXllci5hZGRMYXllcihwb2x5bGluZUJ1ZmZlcilcbiAgICB9KVxuICAgIHJldHVybiB0aGlzLnBvbHlsaW5lTGF5ZXJcbiAgfVxufVxuIiwiaW1wb3J0IHsgRGF0YUxpc3RJdGVtIH0gZnJvbSAnLi4vZGVmaW5pdGlvbnMnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvbHlnb24gZXh0ZW5kcyBMLlBvbHlnb24ge1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6dmFyaWFibGUtbmFtZVxuICBwcml2YXRlIF9fZGF0YTogRGF0YUxpc3RJdGVtXG4gIGNvbnN0cnVjdG9yKFxuICAgIGxhdGxuZ3M6XG4gICAgICB8IEwuTGF0TG5nRXhwcmVzc2lvbltdXG4gICAgICB8IEwuTGF0TG5nRXhwcmVzc2lvbltdW11cbiAgICAgIHwgTC5MYXRMbmdFeHByZXNzaW9uW11bXVtdLFxuICAgIG9wdGlvbnM/OiBMLlBvbHlsaW5lT3B0aW9uc1xuICApIHtcbiAgICBzdXBlcihsYXRsbmdzLCBvcHRpb25zKVxuICB9XG4gIHB1YmxpYyBzZXREYXRhKGRhdGE6IERhdGFMaXN0SXRlbSkge1xuICAgIHRoaXMuX19kYXRhID0gZGF0YVxuICB9XG4gIHB1YmxpYyBnZXREYXRhKCkge1xuICAgIHJldHVybiB0aGlzLl9fZGF0YVxuICB9XG59XG4iLCJpbXBvcnQgeyBEYXRhTGlzdEl0ZW0sIENoYW5uZWxGdW5jIH0gZnJvbSAnLi4vZGVmaW5pdGlvbnMnXG5pbXBvcnQgUG9seWdvbiBmcm9tICcuL1BvbHlnb24nXG5cbi8qKiDmuLLmn5PpopzoibLmoLflvI8g5Y2V6ImyfOWIhuautSAqL1xudHlwZSBQb2x5Z29uTGF5ZXJSZW5kZXJDb2xvclR5cGUgPSAnc2luZ2xlJyB8ICdzZWdtZW50ZWQnXG5pbnRlcmZhY2UgUG9seWdvbkxheWVyT3B0aW9ucyBleHRlbmRzIEwuUG9seWxpbmVPcHRpb25zIHtcbiAgcmVuZGVyUG9seWdvbkNvbG9yVHlwZTogUG9seWdvbkxheWVyUmVuZGVyQ29sb3JUeXBlXG5cbiAgLyoqIHBvcHVwIOWxleekuuWtl+autSAqL1xuICBwb3B1cEF0dHI/OiBzdHJpbmdcbiAgLyoqIHRvb2x0aXAg5bGV56S65a2X5q61ICovXG4gIHRvb2x0aXBBdHRyPzogc3RyaW5nXG5cbiAgb3BhY2l0eT86IG51bWJlclxuXG4gIC8qKiDliIbmrrXmuLLmn5Pnu5/orqHlrZfmrrUgKi9cbiAgc2VnbWVudGVkQXR0cj86IHN0cmluZ1xuICBzZWdtZW50ZWRDb2xvcnM/OiBzdHJpbmdbXVxufVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9seWdvbnNMYXllciB7XG4gIHB1YmxpYyB0eXBlOiBzdHJpbmdcblxuICBwcm90ZWN0ZWQgdmlzaWJsZTogYm9vbGVhblxuICBwcm90ZWN0ZWQgbGF5ZXI6IEwuTGF5ZXJHcm91cFxuXG4gIHByaXZhdGUgbWFwOiBMLk1hcFxuICBwcml2YXRlIGRhdGFMaXN0OiBEYXRhTGlzdEl0ZW1bXVxuICBwcml2YXRlIG9wdGlvbnM6IFBvbHlnb25MYXllck9wdGlvbnNcbiAgcHJpdmF0ZSBjaGFubmVsRnVuYzogQ2hhbm5lbEZ1bmNcbiAgcHJpdmF0ZSBwb2x5Z29uczogUG9seWdvbltdXG4gIHByaXZhdGUgc2VnbWVudGVkTWluOiBudW1iZXJcbiAgcHJpdmF0ZSBzZWdtZW50ZWRTdGVwOiBudW1iZXJcbiAgLy8gcHJpdmF0ZSBmb2N1c2VkUG9seWdvbjogUG9seWdvblxuICBwcml2YXRlIHBvbHlnb25MYXllcjogTC5MYXllckdyb3VwXG5cbiAgY29uc3RydWN0b3IoXG4gICAgbWFwOiBMLk1hcCxcbiAgICBkYXRhTGlzdDogRGF0YUxpc3RJdGVtW10sXG4gICAgb3B0aW9uczogUG9seWdvbkxheWVyT3B0aW9ucyxcbiAgICBjaGFubmVsRnVuYzogQ2hhbm5lbEZ1bmNcbiAgKSB7XG4gICAgY29uc3QgZGVmYXVsdE9wdGlvbnM6IFBvbHlnb25MYXllck9wdGlvbnMgPSB7XG4gICAgICBjb2xvcjogJyMzMzg4RkYnLFxuICAgICAgZmlsbENvbG9yOiAnIzMzODhGRicsXG4gICAgICByZW5kZXJQb2x5Z29uQ29sb3JUeXBlOiAnc2luZ2xlJyxcbiAgICAgIHNlZ21lbnRlZENvbG9yczogWycjMzM4OEZGJ10sXG4gICAgfVxuICAgIHRoaXMudHlwZSA9ICdwb2x5Z29uJ1xuICAgIHRoaXMubWFwID0gbWFwXG4gICAgdGhpcy5kYXRhTGlzdCA9IGRhdGFMaXN0XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9uc1xuICAgIHRoaXMuY2hhbm5lbEZ1bmMgPSBjaGFubmVsRnVuY1xuXG4gICAgdGhpcy52aXNpYmxlID0gdHJ1ZVxuICAgIHRoaXMucG9seWdvbnMgPSBbXVxuICAgIHRoaXMuc2VnbWVudGVkTWluID0gSW5maW5pdHlcbiAgICB0aGlzLnNlZ21lbnRlZFN0ZXAgPSAxXG4gICAgLy8gdGhpcy5mb2N1c2VkUG9seWdvbiA9IG51bGxcblxuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKVxuXG4gICAgLy8g57yT5a2YIHNlZ21lbnQg55u45YWz5pWw5o2uXG4gICAgdGhpcy5jYWNoZVNlZ21lbnRQYXJhbXMoKVxuICAgIHRoaXMuaW5pdFBvbHlnb25zKClcbiAgfVxuICBwdWJsaWMgZHJhdyhvcHRpb25zPzogUG9seWdvbkxheWVyT3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKVxuICAgIHJldHVybiB0aGlzLnJlZHJhdygpXG4gIH1cbiAgcHVibGljIHJlZHJhdygpIHtcbiAgICBpZiAoIXRoaXMudmlzaWJsZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh0aGlzLmxheWVyKSB7XG4gICAgICB0aGlzLmxheWVyLnJlbW92ZSgpXG4gICAgfVxuICAgIHRoaXMubGF5ZXIgPSB0aGlzLmNvbmZpZ1BvbHlnb25MYXllcigpXG4gICAgdGhpcy5tYXAuYWRkTGF5ZXIodGhpcy5sYXllcilcbiAgICByZXR1cm4gdGhpc1xuICB9XG4gIHB1YmxpYyBmaXRCb3VuZHMoKSB7XG4gICAgdGhpcy5tYXAuZml0Qm91bmRzKHRoaXMuZ2V0Qm91bmRzKCkpXG4gIH1cbiAgcHVibGljIGdldEJvdW5kcygpOiBMLkxhdExuZ0JvdW5kc0V4cHJlc3Npb24ge1xuICAgIGlmICh0aGlzLnBvbHlnb25zLmxlbmd0aCA8PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5tYXAuZ2V0Qm91bmRzKClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucG9seWdvbnMucmVkdWNlKFxuICAgICAgKHByZXYsIGN1cnIpID0+IHByZXYuZXh0ZW5kKGN1cnIuZ2V0Qm91bmRzKCkpLFxuICAgICAgdGhpcy5wb2x5Z29uc1swXS5nZXRCb3VuZHMoKVxuICAgIClcbiAgfVxuICBwdWJsaWMgZGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5sYXllcikge1xuICAgICAgdGhpcy5sYXllci5yZW1vdmUoKVxuICAgIH1cbiAgfVxuICBwdWJsaWMgdG9nZ2xlVmlzaWJsZSh2aXNpYmxlOiBib29sZWFuKSB7XG4gICAgdGhpcy52aXNpYmxlID0gdmlzaWJsZVxuICAgIGlmICghdGhpcy5sYXllcikge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh2aXNpYmxlKSB7XG4gICAgICB0aGlzLm1hcC5hZGRMYXllcih0aGlzLmxheWVyKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1hcC5yZW1vdmVMYXllcih0aGlzLmxheWVyKVxuICAgIH1cbiAgfVxuICBwdWJsaWMgY2hhbmdlQ29sb3IoY29sb3I6IHN0cmluZykge1xuICAgIHRoaXMub3B0aW9ucy5maWxsQ29sb3IgPSBjb2xvclxuICAgIHRoaXMucmVkcmF3KClcbiAgfVxuICBwdWJsaWMgcGl0Y2goaWQ6IHN0cmluZykge1xuICAgIHRoaXMucG9seWdvbnMuZm9yRWFjaCgocG9seWdvbikgPT4ge1xuICAgICAgaWYgKHBvbHlnb24uZ2V0RGF0YSgpLmlkID09PSBpZCkge1xuICAgICAgICBwb2x5Z29uLmZpcmUoJ2NsaWNrJylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgfSlcbiAgfVxuICBwcm90ZWN0ZWQgZ2V0VG9vbFRpcENvbnRlbnQoZGF0YTogRGF0YUxpc3RJdGVtKSB7XG4gICAgcmV0dXJuICcnICsgZGF0YVt0aGlzLm9wdGlvbnMudG9vbHRpcEF0dHJdXG4gIH1cbiAgcHJpdmF0ZSBpbml0UG9seWdvbnMoKSB7XG4gICAgdGhpcy5kYXRhTGlzdC5mb3JFYWNoKChkYXRhKSA9PiB7XG4gICAgICB0aGlzLmNhY2hlU2VnbWVudFBhcmFtcygpXG5cbiAgICAgIGNvbnN0IGxheWVyID0gTC5nZW9KU09OKGRhdGEuZ2VvbWV0cnkpLmdldExheWVycygpWzBdXG4gICAgICBjb25zdCBwb2x5Z29uID0gbmV3IFBvbHlnb24oKGxheWVyIGFzIEwuUG9seWdvbikuZ2V0TGF0TG5ncygpKVxuXG4gICAgICAvLyDlsIbnm7jlhbPlgLznu5HlrprliLAgbWFya2Vy5LiKXG4gICAgICBwb2x5Z29uLnNldERhdGEoZGF0YSlcblxuICAgICAgdGhpcy5wb2x5Z29ucy5wdXNoKHBvbHlnb24pXG4gICAgfSlcbiAgfVxuICBwcml2YXRlIGNvbmZpZ1BvbHlnb25MYXllcigpIHtcbiAgICB0aGlzLnBvbHlnb25MYXllciA9IEwubGF5ZXJHcm91cCgpXG4gICAgdGhpcy5wb2x5Z29ucy5mb3JFYWNoKChwb2x5Z29uKSA9PiB7XG4gICAgICBsZXQgY29sb3IgPSB0aGlzLm9wdGlvbnMuY29sb3JcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMucmVuZGVyUG9seWdvbkNvbG9yVHlwZSA9PT0gJ3NlZ21lbnRlZCcpIHtcbiAgICAgICAgY29sb3IgPSB0aGlzLmdldFNlZ21lbnRlZFBvbHlnb25Db2xvcihwb2x5Z29uLmdldERhdGEoKSlcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9wdGlvbnM6IEwuUG9seWxpbmVPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcHRpb25zLCB7XG4gICAgICAgIGNvbG9yLFxuICAgICAgfSlcbiAgICAgIC8vIOmHjeaWsOW6lOeUqCBvcHRpb25zXG4gICAgICBjb25zdCBuZXdQb2x5Z29uID0gbmV3IFBvbHlnb24ocG9seWdvbi5nZXRMYXRMbmdzKCksIG9wdGlvbnMpXG4gICAgICBuZXdQb2x5Z29uLnNldERhdGEocG9seWdvbi5nZXREYXRhKCkpXG4gICAgICBuZXdQb2x5Z29uLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5wb2x5Z29uQ2xpY2tIYW5kbGVyKHBvbHlnb24pXG4gICAgICB9KVxuICAgICAgaWYgKHRoaXMub3B0aW9ucy50b29sdGlwQXR0cikge1xuICAgICAgICBuZXdQb2x5Z29uLmJpbmRUb29sdGlwKHRoaXMuZ2V0VG9vbFRpcENvbnRlbnQobmV3UG9seWdvbi5nZXREYXRhKCkpKVxuICAgICAgfVxuXG4gICAgICB0aGlzLnBvbHlnb25MYXllci5hZGRMYXllcihuZXdQb2x5Z29uKVxuICAgIH0pXG4gICAgcmV0dXJuIHRoaXMucG9seWdvbkxheWVyXG4gIH1cbiAgcHJpdmF0ZSBwb2x5Z29uQ2xpY2tIYW5kbGVyKHBvbHlnb246IFBvbHlnb24pIHtcbiAgICAvLyB0aGlzLmZvY3VzZWRQb2x5Z29uID0gcG9seWdvblxuICAgIHRoaXMuY2hhbm5lbEZ1bmMoJ29uLWNsaWNrLXBvbHlnb24nLCBwb2x5Z29uKVxuICB9XG4gIHByaXZhdGUgY2FjaGVTZWdtZW50UGFyYW1zKCkge1xuICAgIGNvbnN0IHNlZ21lbnRlZExlbmd0aCA9IHRoaXMub3B0aW9ucy5zZWdtZW50ZWRDb2xvcnMubGVuZ3RoXG4gICAgbGV0IG1heFZhbCA9IC1JbmZpbml0eVxuICAgIGxldCBtaW5WYWwgPSBJbmZpbml0eVxuICAgIGZvciAoY29uc3QgZGF0YSBvZiB0aGlzLmRhdGFMaXN0KSB7XG4gICAgICBjb25zdCB2YWwgPSBkYXRhW3RoaXMub3B0aW9ucy5zZWdtZW50ZWRBdHRyXVxuICAgICAgbWF4VmFsID0gTWF0aC5tYXgobWF4VmFsLCB2YWwpXG4gICAgICBtaW5WYWwgPSBNYXRoLm1pbihtaW5WYWwsIHZhbClcbiAgICB9XG4gICAgY29uc3Qgc3RlcCA9IChtYXhWYWwgLSBtaW5WYWwgKyAxKSAvIHNlZ21lbnRlZExlbmd0aFxuICAgIHRoaXMuc2VnbWVudGVkTWluID0gbWluVmFsXG4gICAgdGhpcy5zZWdtZW50ZWRTdGVwID0gc3RlcFxuICB9XG4gIHByaXZhdGUgZ2V0U2VnbWVudGVkUG9seWdvbkNvbG9yKGRhdGE6IERhdGFMaXN0SXRlbSk6IHN0cmluZyB7XG4gICAgY29uc3QgdmFsID0gZGF0YVt0aGlzLm9wdGlvbnMuc2VnbWVudGVkQXR0cl1cbiAgICBjb25zdCBjb2xvciA9IHRoaXMub3B0aW9ucy5zZWdtZW50ZWRDb2xvcnNbXG4gICAgICAodmFsIC0gdGhpcy5zZWdtZW50ZWRNaW4pIC8gdGhpcy5zZWdtZW50ZWRTdGVwXG4gICAgXVxuICAgIHJldHVybiBjb2xvclxuICB9XG59XG4iLCJpbXBvcnQgTWFya2VyIGZyb20gJy4vbWFya2VyL01hcmtlcidcbmltcG9ydCBNYXJrZXJzTGF5ZXIgZnJvbSAnLi9tYXJrZXIvTWFya2Vyc0xheWVyJ1xuaW1wb3J0IE1hcmtlcnNCdWZmZXJMYXllciBmcm9tICcuL21hcmtlci9NYXJrZXJzQnVmZmVyTGF5ZXInXG5pbXBvcnQgUG9seWxpbmUgZnJvbSAnLi9wb2x5bGluZS9Qb2x5bGluZSdcbmltcG9ydCBQb2x5bGluZXNMYXllciBmcm9tICcuL3BvbHlsaW5lL1BvbHlsaW5lc0xheWVyJ1xuaW1wb3J0IFBvbHlsaW5lc0J1ZmZlckxheWVyIGZyb20gJy4vcG9seWxpbmUvUG9seWxpbmVzQnVmZmVyTGF5ZXInXG5pbXBvcnQgUG9seWdvbiBmcm9tICcuL3BvbHlnb24vUG9seWdvbidcbmltcG9ydCBQb2x5Z29uc0xheWVyIGZyb20gJy4vcG9seWdvbi9Qb2x5Z29uc0xheWVyJ1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIE1hcmtlcixcbiAgTWFya2Vyc0xheWVyLFxuICBNYXJrZXJzQnVmZmVyTGF5ZXIsXG4gIFBvbHlsaW5lLFxuICBQb2x5bGluZXNMYXllcixcbiAgUG9seWxpbmVzQnVmZmVyTGF5ZXIsXG4gIFBvbHlnb24sXG4gIFBvbHlnb25zTGF5ZXIsXG59XG5leHBvcnQge1xuICBNYXJrZXIsXG4gIE1hcmtlcnNMYXllcixcbiAgTWFya2Vyc0J1ZmZlckxheWVyLFxuICBQb2x5bGluZSxcbiAgUG9seWxpbmVzTGF5ZXIsXG4gIFBvbHlsaW5lc0J1ZmZlckxheWVyLFxuICBQb2x5Z29uLFxuICBQb2x5Z29uc0xheWVyLFxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==