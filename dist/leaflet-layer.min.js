!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.leafletMap=e():t.leafletMap=e()}(window,function(){return function(t){var e={};function s(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);class n extends L.Marker{constructor(t,e){super(t,e)}setData(t){this.__data=t}getData(){return this.__data}}class r{constructor(t,e,s,n){this.map=t,this.dataList=e,this.options=Object.assign({},{renderType:"point",renderPointColorType:"single",iconType:"unicode",iconSize:[20,20],iconClass:"iconfont",iconColor:"#3388FF",iconAnchor:[10,10]},s),this.channelFunc=n,this.layer=null,this.focusedMarker=null,this.hoveredMarker=null,this.focusedDisplayMarker=null,this.markers=[],this.markerLayer=null,this.heatLayer=null,this.clusterLayer=null,this.segmentedMin=1/0,this.segmentedStep=1,this.cacheSegmentParams(),this.initMarkers()}draw(t){return this.options=Object.assign(this.options,t),this.redraw()}redraw(){switch(this.layer&&this.map.removeLayer(this.layer),this.options.renderType){case"point":this.layer=this.configMarkerLayer();break;case"cluster":this.layer=this.configClusterLayer();break;case"heat":this.layer=this.configHeatLayer();break;default:throw new Error(`renderType 不支持"${this.options.renderType}"`)}return this.map.addLayer(this.layer),this}setOptions(t,e=!1){this.options=Object.assign(this.options,t),e&&this.redraw()}configMarkerLayer(){const t=L.canvasIconLayer({}).addTo(this.map);return t.addOnClickListener((t,[{data:e}])=>{this.markerClickHandler(e)}),t.addOnHoverListener((t,[{data:e}])=>{this.hoveredMarker&&this.hoveredMarker.closeTooltip(),this.hoveredMarker=e,this.hoveredMarker.getTooltip()?this.hoveredMarker.openTooltip():this.options.tooltipAttr&&this.hoveredMarker.bindTooltip(""+this.hoveredMarker.getData()[this.options.tooltipAttr])}),t.addMarkers(this.markers),this.map.on("zoomstart",()=>{this.map.removeLayer(this.markerLayer)}),this.map.on("zoomend",()=>{this.map.addLayer(this.markerLayer)}),setTimeout(()=>{this.map.panTo(this.map.getCenter())}),this.markerLayer=t,this.markerLayer}initMarkers(){this.dataList.forEach(t=>{const e=L.geoJSON(t.geometry).getLayers()[0],s=new n([e.getLatLng().lng,e.getLatLng().lat],{icon:this.getMarkerIcon(t)});s.setData(t),this.markers.push(s)})}markerClickHandler(t){this.focusedMarker=t,this.focusedDisplayMarker&&this.focusedDisplayMarker.removeFrom(this.map),this.focusedDisplayMarker=new n(t.getLatLng(),{icon:this.getLargerMarkerIcon(t.getData())}),this.focusedDisplayMarker.addTo(this.map),this.focusedDisplayMarker.bindPopup(this.getPopupContent(t.getData())).openPopup(),this.focusedDisplayMarker.on("popupclose",()=>{this.focusedDisplayMarker.remove()}),this.map.panTo(this.focusedMarker.getLatLng()),this.channelFunc("on-click-marker",t)}configClusterLayer(){return this.clusterLayer=L.markerClusterGroup(),this.clusterLayer.addLayers(this.markers.map(t=>{const e=new n(t.getLatLng(),{icon:this.getMarkerIcon(t.getData())});return e.setData(t.getData()),e.bindTooltip(""+e.getData()[this.options.tooltipAttr]),e.on("click",()=>{this.markerClickHandler(e)}),e})),this.clusterLayer}configHeatLayer(){return this.markers.forEach(t=>{const e=t.getLatLng();let s=t.getData()[this.options.heatOptions.dimensionAttr];"number"!=typeof s&&(s=this.options.heatOptions.max),t.setLatLng(L.latLng(e.lat,e.lng,s))}),this.heatLayer=L.heatLayer(this.markers.map(t=>t.getLatLng()),this.options.heatOptions),this.heatLayer}getLargerMarkerIcon(t){return this._getMarkerIcon(t,!0)}getMarkerIcon(t){return this._getMarkerIcon(t,!1)}_getMarkerIcon(t,e){let s=this.options.iconSize,n=this.options.iconAnchor;s=e?[1.5*s[0],1.5*s[1]]:s,n=e?[1.5*n[0],1.5*n[1]]:n;const r=this.options.iconColor;switch(this.options.iconType){case"image":return L.icon({iconUrl:this.options.iconImageUrl,iconSize:s,iconAnchor:n});case"font_class":case"symbol":case"unicode":return L.divIcon({html:this.getCustomIconHTML(t,{iconSize:s,iconColor:r}),className:e?"large-div-icon-marker":"",iconSize:s,iconAnchor:n});default:throw new Error(`图标类型不支持"${this.options.iconType}"`)}}getCustomIconHTML(t,e){if(this.options.iconRenderer)return e=Object.assign({},this.options,e),this.options.iconRenderer(t,e);switch(this.options.renderPointColorType){case"single":switch(this.options.iconType){case"font_class":return`\n              <i class="${this.options.iconClass}"\n                style="\n                  color: ${e.iconColor};\n                  font-size: ${e.iconSize[0]}px;\n                "\n                />\n            `;case"symbol":return`\n              <svg class="icon-symbol" aria-hidden="true">\n                <use xlink:href="${this.options.iconSymbol}" />\n              </svg>\n            `;case"unicode":return`\n              <i\n                class="${this.options.iconClass}"\n                style="\n                  color: ${e.iconColor};\n                  font-size: ${e.iconSize[0]}px;\n                "\n                >\n                ${this.options.iconUnicode}\n              </i>\n            `}break;case"segmented":switch(this.options.iconType){case"font_class":return`\n              <i\n                class="${this.options.iconClass}"\n                style="\n                  color: ${this.getSegmentedMarkerColor(t)};\n                  font-size: ${e.iconSize[0]}px;\n                "\n                />\n            `;case"symbol":return`\n              <svg class="icon-symbol" aria-hidden="true">\n                <use xlink:href="${this.options.iconSymbol}" />\n              </svg>\n            `;case"unicode":return`\n              <i\n                class="${this.options.iconClass}"\n                style="\n                  color: ${this.getSegmentedMarkerColor(t)};\n                  font-size: ${e.iconSize[0]}px;\n                "\n                >\n                ${this.options.iconUnicode}\n              </i>\n            `}break;default:throw new Error(`renderPointColorType 不支持"${this.options.renderPointColorType}"`)}}cacheSegmentParams(){const t=this.options.segmentedColors.length;let e=-1/0,s=1/0;for(const t of this.dataList){const n=t[this.options.segmentedAttr];e=Math.max(e,n),s=Math.min(s,n)}const n=(e-s+1)/t;this.segmentedMin=s,this.segmentedStep=n}getSegmentedMarkerColor(t){const e=t[this.options.segmentedAttr];return this.options.segmentedColors[(e-this.segmentedMin)/this.segmentedStep]}getPopupContent(t){return this.options.popupAttr?`${this.options.popupAttr}: ${t[this.options.popupAttr]}`:""}}class o extends r{constructor(t,e,s,n){super(t,e,s,n);this.options=Object.assign(this.options,{bufferOptions:{radius:1e3,stroke:!1}},s)}draw(t){return this.options=Object.assign(this.options,t),this.redraw()}redraw(){return this.markerLayer&&this.map.removeLayer(this.markerLayer),this.bufferLayer&&this.map.removeLayer(this.bufferLayer),this.markerLayer=this.configMarkerLayer(),this.bufferLayer=this.configBufferLayer(),this.map.addLayer(this.markerLayer),this.map.addLayer(this.bufferLayer),this}configBufferLayer(){const t=L.layerGroup();return this.markers.forEach(e=>{const s=L.circle(e.getLatLng(),this.options.bufferOptions);t.addLayer(s)}),t}}class i extends L.Polyline{constructor(t,e){super(t,e)}setData(t){this.__data=t}getData(){return this.__data}}class a{constructor(t,e,s,n){this.map=t,this.dataList=e,this.options=s,this.channelFunc=n,this.segmentedMin=1/0,this.segmentedStep=1,this.options=Object.assign({},{renderPolylineColorType:"single"},s),this.cacheSegmentParams(),this.initPolylines()}draw(t){return this.options=Object.assign(this.options,t),this.redraw()}redraw(){return this.layer&&this.map.removeLayer(this.layer),this.layer=this.configPolylineLayer(),this.map.addLayer(this.layer),this}initPolylines(){this.dataList.forEach(t=>{this.cacheSegmentParams();const e=L.geoJSON(t.geometry).getLayers()[0],s=new i(e.getLatLngs());s.setData(t),this.polylines.push(s)})}configPolylineLayer(){return this.polylineLayer=L.layerGroup(),this.polylines.forEach(t=>{t.on("click",()=>{this.polylineClickHandler(t)});const e=Object.assign({},this.options,{color:this.getSegmentedPolylineColor(t.getData())}),s=new i(t.getLatLngs(),e);this.polylineLayer.addLayer(s)}),this.polylineLayer}polylineClickHandler(t){this.channelFunc("on-click-polyline",t)}cacheSegmentParams(){const t=this.options.segmentedColors.length;let e=-1/0,s=1/0;for(const t of this.dataList){const n=t[this.options.segmentedAttr];e=Math.max(e,n),s=Math.min(s,n)}const n=(e-s+1)/t;this.segmentedMin=s,this.segmentedStep=n}getSegmentedPolylineColor(t){const e=t[this.options.segmentedAttr];return this.options.segmentedColors[(e-this.segmentedMin)/this.segmentedStep]}}class h extends L.Polygon{constructor(t,e){super(t,e)}setData(t){this.__data=t}getData(){return this.__data}}class c{constructor(t,e,s,n){this.map=t,this.dataList=e,this.options=s,this.channelFunc=n,this.segmentedMin=1/0,this.segmentedStep=1,this.options=Object.assign({},{renderPolygonColorType:"single"},s),this.cacheSegmentParams(),this.initPolygons()}draw(t){return this.options=Object.assign(this.options,t),this.redraw()}redraw(){return this.layer&&this.map.removeLayer(this.layer),this.layer=this.configPolygonLayer(),this.map.addLayer(this.layer),this}initPolygons(){this.dataList.forEach(t=>{this.cacheSegmentParams();const e=L.geoJSON(t.geometry).getLayers()[0],s=new h(e.getLatLngs());s.setData(t),this.polygons.push(s)})}configPolygonLayer(){return this.polygonLayer=L.layerGroup(),this.polygons.forEach(t=>{t.on("click",()=>{this.polygonClickHandler(t)});const e=Object.assign({},this.options,{color:this.getSegmentedPolygonColor(t.getData())}),s=new h(t.getLatLngs(),e);this.polygonLayer.addLayer(s)}),this.polygonLayer}polygonClickHandler(t){this.channelFunc("on-click-polygon",t)}cacheSegmentParams(){const t=this.options.segmentedColors.length;let e=-1/0,s=1/0;for(const t of this.dataList){const n=t[this.options.segmentedAttr];e=Math.max(e,n),s=Math.min(s,n)}const n=(e-s+1)/t;this.segmentedMin=s,this.segmentedStep=n}getSegmentedPolygonColor(t){const e=t[this.options.segmentedAttr];return this.options.segmentedColors[(e-this.segmentedMin)/this.segmentedStep]}}s.d(e,"Marker",function(){return n}),s.d(e,"MarkersLayer",function(){return r}),s.d(e,"MarkersBufferLayer",function(){return o}),s.d(e,"Polyline",function(){return i}),s.d(e,"PolylinesLayer",function(){return a}),s.d(e,"Polygon",function(){return h}),s.d(e,"PolygonsLayer",function(){return c});e.default={Marker:n,MarkersLayer:r,MarkersBufferLayer:o,Polyline:i,PolylinesLayer:a,Polygon:h,PolygonsLayer:c}}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFmbGV0TWFwL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9sZWFmbGV0TWFwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2xlYWZsZXRNYXAvLi9zcmMvbWFya2VyL01hcmtlci50cyIsIndlYnBhY2s6Ly9sZWFmbGV0TWFwLy4vc3JjL21hcmtlci9NYXJrZXJzTGF5ZXIudHMiLCJ3ZWJwYWNrOi8vbGVhZmxldE1hcC8uL3NyYy9tYXJrZXIvTWFya2Vyc0J1ZmZlckxheWVyLnRzIiwid2VicGFjazovL2xlYWZsZXRNYXAvLi9zcmMvcG9seWxpbmUvUG9seWxpbmUudHMiLCJ3ZWJwYWNrOi8vbGVhZmxldE1hcC8uL3NyYy9wb2x5bGluZS9Qb2x5bGluZXNMYXllci50cyIsIndlYnBhY2s6Ly9sZWFmbGV0TWFwLy4vc3JjL3BvbHlnb24vUG9seWdvbi50cyIsIndlYnBhY2s6Ly9sZWFmbGV0TWFwLy4vc3JjL3BvbHlnb24vUG9seWdvbnNMYXllci50cyIsIndlYnBhY2s6Ly9sZWFmbGV0TWFwLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsIndpbmRvdyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJNYXJrZXIiLCJMIiwiW29iamVjdCBPYmplY3RdIiwibGF0bG5nIiwib3B0aW9ucyIsInN1cGVyIiwiZGF0YSIsInRoaXMiLCJfX2RhdGEiLCJNYXJrZXJzTGF5ZXJfTWFya2Vyc0xheWVyIiwibWFwIiwiZGF0YUxpc3QiLCJjaGFubmVsRnVuYyIsImFzc2lnbiIsInJlbmRlclR5cGUiLCJyZW5kZXJQb2ludENvbG9yVHlwZSIsImljb25UeXBlIiwiaWNvblNpemUiLCJpY29uQ2xhc3MiLCJpY29uQ29sb3IiLCJpY29uQW5jaG9yIiwibGF5ZXIiLCJmb2N1c2VkTWFya2VyIiwiaG92ZXJlZE1hcmtlciIsImZvY3VzZWREaXNwbGF5TWFya2VyIiwibWFya2VycyIsIm1hcmtlckxheWVyIiwiaGVhdExheWVyIiwiY2x1c3RlckxheWVyIiwic2VnbWVudGVkTWluIiwiSW5maW5pdHkiLCJzZWdtZW50ZWRTdGVwIiwiY2FjaGVTZWdtZW50UGFyYW1zIiwiaW5pdE1hcmtlcnMiLCJyZWRyYXciLCJyZW1vdmVMYXllciIsImNvbmZpZ01hcmtlckxheWVyIiwiY29uZmlnQ2x1c3RlckxheWVyIiwiY29uZmlnSGVhdExheWVyIiwiRXJyb3IiLCJhZGRMYXllciIsImNhbnZhc0ljb25MYXllciIsImFkZFRvIiwiYWRkT25DbGlja0xpc3RlbmVyIiwiXyIsIm1hcmtlciIsIm1hcmtlckNsaWNrSGFuZGxlciIsImFkZE9uSG92ZXJMaXN0ZW5lciIsImNsb3NlVG9vbHRpcCIsImdldFRvb2x0aXAiLCJvcGVuVG9vbHRpcCIsInRvb2x0aXBBdHRyIiwiYmluZFRvb2x0aXAiLCJnZXREYXRhIiwiYWRkTWFya2VycyIsIm9uIiwic2V0VGltZW91dCIsInBhblRvIiwiZ2V0Q2VudGVyIiwiZm9yRWFjaCIsImdlb0pTT04iLCJnZW9tZXRyeSIsImdldExheWVycyIsImdldExhdExuZyIsImxuZyIsImxhdCIsImljb24iLCJnZXRNYXJrZXJJY29uIiwic2V0RGF0YSIsInB1c2giLCJyZW1vdmVGcm9tIiwiZ2V0TGFyZ2VyTWFya2VySWNvbiIsImJpbmRQb3B1cCIsImdldFBvcHVwQ29udGVudCIsIm9wZW5Qb3B1cCIsInJlbW92ZSIsIm1hcmtlckNsdXN0ZXJHcm91cCIsImFkZExheWVycyIsImxhdExuZyIsImFsdCIsImhlYXRPcHRpb25zIiwiZGltZW5zaW9uQXR0ciIsIm1heCIsInNldExhdExuZyIsIml0IiwiX2dldE1hcmtlckljb24iLCJpc0xhcmdlciIsImljb25VcmwiLCJpY29uSW1hZ2VVcmwiLCJkaXZJY29uIiwiaHRtbCIsImdldEN1c3RvbUljb25IVE1MIiwiY2xhc3NOYW1lIiwiaWNvblJlbmRlcmVyIiwiaWNvblN5bWJvbCIsImljb25Vbmljb2RlIiwiZ2V0U2VnbWVudGVkTWFya2VyQ29sb3IiLCJzZWdtZW50ZWRMZW5ndGgiLCJzZWdtZW50ZWRDb2xvcnMiLCJsZW5ndGgiLCJtYXhWYWwiLCJtaW5WYWwiLCJ2YWwiLCJzZWdtZW50ZWRBdHRyIiwiTWF0aCIsIm1pbiIsInN0ZXAiLCJwb3B1cEF0dHIiLCJNYXJrZXJzQnVmZmVyTGF5ZXJfTWFya2Vyc0J1ZmZlckxheWVyIiwiYnVmZmVyT3B0aW9ucyIsInJhZGl1cyIsInN0cm9rZSIsImJ1ZmZlckxheWVyIiwiY29uZmlnQnVmZmVyTGF5ZXIiLCJncm91cExheWVyIiwibGF5ZXJHcm91cCIsImNpcmNsZUxheWVyIiwiY2lyY2xlIiwiUG9seWxpbmUiLCJsYXRsbmdzIiwiUG9seWxpbmVzTGF5ZXJfUG9seWxpbmVzTGF5ZXIiLCJyZW5kZXJQb2x5bGluZUNvbG9yVHlwZSIsImluaXRQb2x5bGluZXMiLCJjb25maWdQb2x5bGluZUxheWVyIiwicG9seWxpbmUiLCJnZXRMYXRMbmdzIiwicG9seWxpbmVzIiwicG9seWxpbmVMYXllciIsInBvbHlsaW5lQ2xpY2tIYW5kbGVyIiwiY29sb3IiLCJnZXRTZWdtZW50ZWRQb2x5bGluZUNvbG9yIiwibmV3UG9seWxpbmUiLCJQb2x5Z29uIiwiUG9seWdvbnNMYXllcl9Qb2x5Z29uc0xheWVyIiwicmVuZGVyUG9seWdvbkNvbG9yVHlwZSIsImluaXRQb2x5Z29ucyIsImNvbmZpZ1BvbHlnb25MYXllciIsInBvbHlnb24iLCJwb2x5Z29ucyIsInBvbHlnb25MYXllciIsInBvbHlnb25DbGlja0hhbmRsZXIiLCJnZXRTZWdtZW50ZWRQb2x5Z29uQ29sb3IiLCJuZXdQb2x5Z29uIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsIk1hcmtlcnNMYXllciIsIk1hcmtlcnNCdWZmZXJMYXllciIsIlBvbHlsaW5lc0xheWVyIiwiUG9seWdvbnNMYXllciJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxpQkFBQUMsU0FBQSxpQkFBQUMsT0FDQUEsT0FBQUQsUUFBQUQsSUFDQSxtQkFBQUcsZUFBQUMsSUFDQUQsVUFBQUgsR0FDQSxpQkFBQUMsUUFDQUEsUUFBQSxXQUFBRCxJQUVBRCxFQUFBLFdBQUFDLElBUkEsQ0FTQ0ssT0FBQSxXQUNELG1CQ1RBLElBQUFDLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFQLFFBR0EsSUFBQUMsRUFBQUksRUFBQUUsSUFDQUMsRUFBQUQsRUFDQUUsR0FBQSxFQUNBVCxZQVVBLE9BTkFVLEVBQUFILEdBQUFJLEtBQUFWLEVBQUFELFFBQUFDLElBQUFELFFBQUFNLEdBR0FMLEVBQUFRLEdBQUEsRUFHQVIsRUFBQUQsUUEwREEsT0FyREFNLEVBQUFNLEVBQUFGLEVBR0FKLEVBQUFPLEVBQUFSLEVBR0FDLEVBQUFRLEVBQUEsU0FBQWQsRUFBQWUsRUFBQUMsR0FDQVYsRUFBQVcsRUFBQWpCLEVBQUFlLElBQ0FHLE9BQUFDLGVBQUFuQixFQUFBZSxHQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1YsRUFBQWdCLEVBQUEsU0FBQXRCLEdBQ0Esb0JBQUF1QixlQUFBQyxhQUNBTixPQUFBQyxlQUFBbkIsRUFBQXVCLE9BQUFDLGFBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBbkIsRUFBQSxjQUFpRHlCLE9BQUEsS0FRakRuQixFQUFBb0Is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SyxFQUFBUSxFQUFBeUssRUFBQSxrQ0FBQVYsSUFRQVUsRUFBQSxTQUNFL0ksU0FDQWdKLGFBQUF2SSxFQUNBd0ksbUJBQUFyQyxFQUNBVSxXQUNBNEIsZUFBQTFCLEVBQ0FZLFVBQ0FlLGNBQUFkIiwiZmlsZSI6ImxlYWZsZXQtbGF5ZXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wibGVhZmxldE1hcFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJsZWFmbGV0TWFwXCJdID0gZmFjdG9yeSgpO1xufSkod2luZG93LCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgeyBEYXRhTGlzdEl0ZW0gfSBmcm9tICcuLi9kZWZpbml0aW9ucydcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFya2VyIGV4dGVuZHMgTC5NYXJrZXIge1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6dmFyaWFibGUtbmFtZVxuICBwcml2YXRlIF9fZGF0YTogRGF0YUxpc3RJdGVtXG4gIGNvbnN0cnVjdG9yKGxhdGxuZzogTC5MYXRMbmdFeHByZXNzaW9uLCBvcHRpb25zPzogTC5NYXJrZXJPcHRpb25zKSB7XG4gICAgc3VwZXIobGF0bG5nLCBvcHRpb25zKVxuICB9XG4gIHB1YmxpYyBzZXREYXRhKGRhdGE6IERhdGFMaXN0SXRlbSkge1xuICAgIHRoaXMuX19kYXRhID0gZGF0YVxuICB9XG4gIHB1YmxpYyBnZXREYXRhKCkge1xuICAgIHJldHVybiB0aGlzLl9fZGF0YVxuICB9XG59XG4iLCJpbXBvcnQgeyBEYXRhTGlzdEl0ZW0sIENoYW5uZWxGdW5jIH0gZnJvbSAnLi4vZGVmaW5pdGlvbnMnXG5pbXBvcnQgTWFya2VyIGZyb20gJy4vTWFya2VyJ1xuXG4vKiog5riy5p+T5qC35byPIOaVo+eCuXzng63lipvlm74gKi9cbnR5cGUgTWFya2Vyc0xheWVyUmVuZGVyVHlwZSA9ICdwb2ludCcgfCAnaGVhdCcgfCAnY2x1c3RlcidcblxuLyoqIOa4suafk+minOiJsuagt+W8jyDljZXoibJ85YiG5q61ICovXG50eXBlIE1hcmtlcnNMYXllclJlbmRlclBvaW50Q29sb3JUeXBlID0gJ3NpbmdsZScgfCAnc2VnbWVudGVkJ1xuXG4vKiog5pWj54K55Zu+5qCH57G75Z6LIGljb25mb250fHN2Z3xpbWFnZSAqL1xudHlwZSBNYXJrZXJzTGF5ZXJJY29uVHlwZSA9ICdmb250X2NsYXNzJyB8ICd1bmljb2RlJyB8ICdzeW1ib2wnIHwgJ2ltYWdlJ1xuXG5pbnRlcmZhY2UgSWNvblJlbmRlckZ1bmNPcHRpb24ge1xuICBpY29uU2l6ZTogW251bWJlciwgbnVtYmVyXVxuICBpY29uQ29sb3I6IHN0cmluZ1xufVxudHlwZSBJY29uUmVuZGVyRnVuYyA9IChcbiAgZGF0YTogRGF0YUxpc3RJdGVtLFxuICBwYXJhbXM6IEljb25SZW5kZXJGdW5jT3B0aW9uXG4pID0+IHN0cmluZ1xuXG5leHBvcnQgaW50ZXJmYWNlIE1hcmtlcnNMYXllck9wdGlvbnMge1xuICByZW5kZXJUeXBlOiBNYXJrZXJzTGF5ZXJSZW5kZXJUeXBlXG4gIHJlbmRlclBvaW50Q29sb3JUeXBlOiBNYXJrZXJzTGF5ZXJSZW5kZXJQb2ludENvbG9yVHlwZVxuICBpY29uVHlwZTogTWFya2Vyc0xheWVySWNvblR5cGVcblxuICBpY29uSW1hZ2VVcmw/OiBzdHJpbmdcbiAgaWNvblNpemU/OiBbbnVtYmVyLCBudW1iZXJdXG4gIGljb25DbGFzcz86IHN0cmluZ1xuICBpY29uVW5pY29kZT86IHN0cmluZ1xuICBpY29uU3ltYm9sPzogc3RyaW5nXG4gIGljb25Db2xvcj86IHN0cmluZ1xuICBpY29uQW5jaG9yPzogW251bWJlciwgbnVtYmVyXVxuICBpY29uUmVuZGVyZXI/OiBJY29uUmVuZGVyRnVuY1xuXG4gIC8qKiBwb3B1cCDlsZXnpLrlrZfmrrUgKi9cbiAgcG9wdXBBdHRyPzogc3RyaW5nXG4gIC8qKiB0b29sdGlwIOWxleekuuWtl+autSAqL1xuICB0b29sdGlwQXR0cj86IHN0cmluZ1xuXG4gIG9wYWNpdHk/OiBudW1iZXJcblxuICAvKiog5YiG5q615riy5p+T57uf6K6h5a2X5q61ICovXG4gIHNlZ21lbnRlZEF0dHI/OiBzdHJpbmdcbiAgc2VnbWVudGVkQ29sb3JzPzogc3RyaW5nW11cblxuICBoZWF0T3B0aW9ucz86IE1hcmtlcnNIZWF0TGF5ZXJPcHRpb25zXG4gIGNsdXN0ZXJPcHRpb25zPzogTC5NYXJrZXJzQ2x1c3Rlck9wdGlvbnNcbn1cblxuLyoqIOi9rOWMluS4uueDreWKm+WbvueahCBvcHRpb25zICovXG5pbnRlcmZhY2UgTWFya2Vyc0hlYXRMYXllck9wdGlvbnMgZXh0ZW5kcyBMLkhlYXRMYXllck9wdGlvbnMge1xuICBkaW1lbnNpb25BdHRyOiBzdHJpbmdcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFya2Vyc0xheWVyIHtcbiAgcHVibGljIG1hcDogTC5NYXBcbiAgcHVibGljIGRhdGFMaXN0OiBEYXRhTGlzdEl0ZW1bXVxuICBwdWJsaWMgb3B0aW9uczogTWFya2Vyc0xheWVyT3B0aW9uc1xuICBwdWJsaWMgY2hhbm5lbEZ1bmM6IENoYW5uZWxGdW5jXG5cbiAgcHJvdGVjdGVkIG1hcmtlcnM6IE1hcmtlcltdXG5cbiAgcHJvdGVjdGVkIGZvY3VzZWRNYXJrZXI6IE1hcmtlclxuICBwcm90ZWN0ZWQgaG92ZXJlZE1hcmtlcjogTWFya2VyXG4gIC8qKiDpnIDopoHlsZXnpLrnmoTmlL7lpKfnmoTlm77moIcgKi9cbiAgcHJvdGVjdGVkIGZvY3VzZWREaXNwbGF5TWFya2VyOiBNYXJrZXJcbiAgcHJvdGVjdGVkIG1hcmtlckxheWVyOiBMLkNhbnZhc0ljb25MYXllclxuXG4gIHByaXZhdGUgbGF5ZXI6XG4gICAgfCBMLkNhbnZhc0ljb25MYXllclxuICAgIHwgTC5IZWF0TGF5ZXJcbiAgICB8IEwuTWFya2Vyc0NsdXN0ZXJcbiAgICB8IEwuTGF5ZXJHcm91cFxuICBwcml2YXRlIGhlYXRMYXllcjogTC5IZWF0TGF5ZXJcbiAgcHJpdmF0ZSBjbHVzdGVyTGF5ZXI6IEwuTWFya2Vyc0NsdXN0ZXJcblxuICBwcml2YXRlIHNlZ21lbnRlZE1pbjogbnVtYmVyXG4gIHByaXZhdGUgc2VnbWVudGVkU3RlcDogbnVtYmVyXG4gIGNvbnN0cnVjdG9yKFxuICAgIG1hcDogTC5NYXAsXG4gICAgZGF0YUxpc3Q6IERhdGFMaXN0SXRlbVtdLFxuICAgIG9wdGlvbnM6IE1hcmtlcnNMYXllck9wdGlvbnMsXG4gICAgY2hhbm5lbEZ1bmM6IENoYW5uZWxGdW5jXG4gICkge1xuICAgIGNvbnN0IGRlZmF1bHRPcHRpb25zOiBNYXJrZXJzTGF5ZXJPcHRpb25zID0ge1xuICAgICAgcmVuZGVyVHlwZTogJ3BvaW50JyxcbiAgICAgIHJlbmRlclBvaW50Q29sb3JUeXBlOiAnc2luZ2xlJyxcbiAgICAgIGljb25UeXBlOiAndW5pY29kZScsXG4gICAgICBpY29uU2l6ZTogWzIwLCAyMF0sXG4gICAgICBpY29uQ2xhc3M6ICdpY29uZm9udCcsXG4gICAgICBpY29uQ29sb3I6ICcjMzM4OEZGJyxcbiAgICAgIGljb25BbmNob3I6IFsxMCwgMTBdLFxuICAgIH1cbiAgICB0aGlzLm1hcCA9IG1hcFxuICAgIHRoaXMuZGF0YUxpc3QgPSBkYXRhTGlzdFxuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKVxuICAgIHRoaXMuY2hhbm5lbEZ1bmMgPSBjaGFubmVsRnVuY1xuXG4gICAgdGhpcy5sYXllciA9IG51bGxcbiAgICB0aGlzLmZvY3VzZWRNYXJrZXIgPSBudWxsXG4gICAgdGhpcy5ob3ZlcmVkTWFya2VyID0gbnVsbFxuICAgIHRoaXMuZm9jdXNlZERpc3BsYXlNYXJrZXIgPSBudWxsXG4gICAgdGhpcy5tYXJrZXJzID0gW11cbiAgICB0aGlzLm1hcmtlckxheWVyID0gbnVsbFxuICAgIHRoaXMuaGVhdExheWVyID0gbnVsbFxuICAgIHRoaXMuY2x1c3RlckxheWVyID0gbnVsbFxuXG4gICAgdGhpcy5zZWdtZW50ZWRNaW4gPSBJbmZpbml0eVxuICAgIHRoaXMuc2VnbWVudGVkU3RlcCA9IDFcblxuICAgIC8vIOe8k+WtmCBzZWdtZW50IOebuOWFs+aVsOaNrlxuICAgIHRoaXMuY2FjaGVTZWdtZW50UGFyYW1zKClcbiAgICB0aGlzLmluaXRNYXJrZXJzKClcbiAgfVxuICBwdWJsaWMgZHJhdyhvcHRpb25zPzogTWFya2Vyc0xheWVyT3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKVxuICAgIHJldHVybiB0aGlzLnJlZHJhdygpXG4gIH1cbiAgcHVibGljIHJlZHJhdygpIHtcbiAgICBpZiAodGhpcy5sYXllcikge1xuICAgICAgdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcy5sYXllcilcbiAgICB9XG4gICAgc3dpdGNoICh0aGlzLm9wdGlvbnMucmVuZGVyVHlwZSkge1xuICAgICAgY2FzZSAncG9pbnQnOiB7XG4gICAgICAgIHRoaXMubGF5ZXIgPSB0aGlzLmNvbmZpZ01hcmtlckxheWVyKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2NsdXN0ZXInOiB7XG4gICAgICAgIHRoaXMubGF5ZXIgPSB0aGlzLmNvbmZpZ0NsdXN0ZXJMYXllcigpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdoZWF0Jzoge1xuICAgICAgICB0aGlzLmxheWVyID0gdGhpcy5jb25maWdIZWF0TGF5ZXIoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHJlbmRlclR5cGUg5LiN5pSv5oyBXCIke3RoaXMub3B0aW9ucy5yZW5kZXJUeXBlfVwiYClcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5tYXAuYWRkTGF5ZXIodGhpcy5sYXllcilcbiAgICByZXR1cm4gdGhpc1xuICB9XG4gIHB1YmxpYyBzZXRPcHRpb25zKG9wdGlvbnM6IE1hcmtlcnNMYXllck9wdGlvbnMsIHJlZHJhdyA9IGZhbHNlKSB7XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXG4gICAgaWYgKHJlZHJhdykge1xuICAgICAgdGhpcy5yZWRyYXcoKVxuICAgIH1cbiAgfVxuICAvKiog5riy5p+T5Li65pWj54K55Zu+ICovXG4gIHByb3RlY3RlZCBjb25maWdNYXJrZXJMYXllcigpIHtcbiAgICBjb25zdCBjYW52YXNJY29uTGF5ZXIgPSBMLmNhbnZhc0ljb25MYXllcih7fSkuYWRkVG8odGhpcy5tYXApXG4gICAgLy8g5re75Yqg54K55Ye75LqL5Lu2XG4gICAgY2FudmFzSWNvbkxheWVyLmFkZE9uQ2xpY2tMaXN0ZW5lcigoXywgW3sgZGF0YTogbWFya2VyIH1dKSA9PiB7XG4gICAgICB0aGlzLm1hcmtlckNsaWNrSGFuZGxlcihtYXJrZXIgYXMgTWFya2VyKVxuICAgIH0pXG4gICAgLy8g5re75YqgIGhvdmVyIOS6i+S7tlxuICAgIGNhbnZhc0ljb25MYXllci5hZGRPbkhvdmVyTGlzdGVuZXIoKF8sIFt7IGRhdGE6IG1hcmtlciB9XSkgPT4ge1xuICAgICAgLy8g5LmL5YmN5pyJIGhvdmVyIOeahOWFs+mXrSB0b29sdGlwXG4gICAgICBpZiAodGhpcy5ob3ZlcmVkTWFya2VyKSB7XG4gICAgICAgIHRoaXMuaG92ZXJlZE1hcmtlci5jbG9zZVRvb2x0aXAoKVxuICAgICAgfVxuICAgICAgdGhpcy5ob3ZlcmVkTWFya2VyID0gbWFya2VyIGFzIE1hcmtlclxuXG4gICAgICBpZiAodGhpcy5ob3ZlcmVkTWFya2VyLmdldFRvb2x0aXAoKSkge1xuICAgICAgICAvLyDlpoLmnpzlt7Lnu4/orr7nva4gdG9vbHRpcCDnm7TmjqXlsZXnpLogdG9vbHRpcFxuICAgICAgICB0aGlzLmhvdmVyZWRNYXJrZXIub3BlblRvb2x0aXAoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g5ZCm5YiZ57uR5a6aIHRvb2x0aXAg5bm25bGV56S6XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMudG9vbHRpcEF0dHIpIHtcbiAgICAgICAgICB0aGlzLmhvdmVyZWRNYXJrZXIuYmluZFRvb2x0aXAoXG4gICAgICAgICAgICAnJyArIHRoaXMuaG92ZXJlZE1hcmtlci5nZXREYXRhKClbdGhpcy5vcHRpb25zLnRvb2x0aXBBdHRyXVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgY2FudmFzSWNvbkxheWVyLmFkZE1hcmtlcnModGhpcy5tYXJrZXJzKVxuXG4gICAgdGhpcy5tYXAub24oJ3pvb21zdGFydCcsICgpID0+IHtcbiAgICAgIHRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMubWFya2VyTGF5ZXIpXG4gICAgfSlcbiAgICB0aGlzLm1hcC5vbignem9vbWVuZCcsICgpID0+IHtcbiAgICAgIHRoaXMubWFwLmFkZExheWVyKHRoaXMubWFya2VyTGF5ZXIpXG4gICAgfSlcblxuICAgIC8vIOino+WGs+WIneasoea4suafk+S4jeWHuuWbvuagh+mXrumimFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5tYXAucGFuVG8odGhpcy5tYXAuZ2V0Q2VudGVyKCkpXG4gICAgfSlcblxuICAgIHRoaXMubWFya2VyTGF5ZXIgPSBjYW52YXNJY29uTGF5ZXJcbiAgICByZXR1cm4gdGhpcy5tYXJrZXJMYXllclxuICB9XG4gIHByaXZhdGUgaW5pdE1hcmtlcnMoKSB7XG4gICAgdGhpcy5kYXRhTGlzdC5mb3JFYWNoKChkYXRhKSA9PiB7XG4gICAgICBjb25zdCBsYXllciA9IEwuZ2VvSlNPTihkYXRhLmdlb21ldHJ5KS5nZXRMYXllcnMoKVswXVxuXG4gICAgICBjb25zdCBtYXJrZXIgPSBuZXcgTWFya2VyKFxuICAgICAgICBbXG4gICAgICAgICAgKGxheWVyIGFzIEwuTWFya2VyKS5nZXRMYXRMbmcoKS5sbmcsXG4gICAgICAgICAgKGxheWVyIGFzIEwuTWFya2VyKS5nZXRMYXRMbmcoKS5sYXQsXG4gICAgICAgIF0sXG4gICAgICAgIHtcbiAgICAgICAgICBpY29uOiB0aGlzLmdldE1hcmtlckljb24oZGF0YSksXG4gICAgICAgIH1cbiAgICAgIClcblxuICAgICAgLy8g5bCG55u45YWz5YC857uR5a6a5YiwIG1hcmtlcuS4ilxuICAgICAgbWFya2VyLnNldERhdGEoZGF0YSlcblxuICAgICAgdGhpcy5tYXJrZXJzLnB1c2gobWFya2VyKVxuICAgIH0pXG4gIH1cbiAgLy8g5aSE55CGIG1hcmtlciDngrnlh7vkuovku7ZcbiAgcHJpdmF0ZSBtYXJrZXJDbGlja0hhbmRsZXIobWFya2VyOiBNYXJrZXIpIHtcbiAgICB0aGlzLmZvY3VzZWRNYXJrZXIgPSBtYXJrZXJcbiAgICAvLyDliKDpmaTliY3kuIDkuKrmlL7lpKflm77moIdcbiAgICBpZiAodGhpcy5mb2N1c2VkRGlzcGxheU1hcmtlcikge1xuICAgICAgdGhpcy5mb2N1c2VkRGlzcGxheU1hcmtlci5yZW1vdmVGcm9tKHRoaXMubWFwKVxuICAgIH1cbiAgICAvLyDnlJ/miJDlvZPliY3mlL7lpKflm77moIdcbiAgICB0aGlzLmZvY3VzZWREaXNwbGF5TWFya2VyID0gbmV3IE1hcmtlcihtYXJrZXIuZ2V0TGF0TG5nKCksIHtcbiAgICAgIGljb246IHRoaXMuZ2V0TGFyZ2VyTWFya2VySWNvbihtYXJrZXIuZ2V0RGF0YSgpKSxcbiAgICB9KVxuICAgIHRoaXMuZm9jdXNlZERpc3BsYXlNYXJrZXIuYWRkVG8odGhpcy5tYXApXG5cbiAgICB0aGlzLmZvY3VzZWREaXNwbGF5TWFya2VyXG4gICAgICAuYmluZFBvcHVwKHRoaXMuZ2V0UG9wdXBDb250ZW50KG1hcmtlci5nZXREYXRhKCkpKVxuICAgICAgLm9wZW5Qb3B1cCgpXG4gICAgdGhpcy5mb2N1c2VkRGlzcGxheU1hcmtlci5vbigncG9wdXBjbG9zZScsICgpID0+IHtcbiAgICAgIHRoaXMuZm9jdXNlZERpc3BsYXlNYXJrZXIucmVtb3ZlKClcbiAgICB9KVxuXG4gICAgdGhpcy5tYXAucGFuVG8odGhpcy5mb2N1c2VkTWFya2VyLmdldExhdExuZygpKVxuICAgIHRoaXMuY2hhbm5lbEZ1bmMoJ29uLWNsaWNrLW1hcmtlcicsIG1hcmtlcilcbiAgfVxuICBwcml2YXRlIGNvbmZpZ0NsdXN0ZXJMYXllcigpIHtcbiAgICAvLyDlsZXnpLrogZrlkIjlm77lsYJcbiAgICB0aGlzLmNsdXN0ZXJMYXllciA9IEwubWFya2VyQ2x1c3Rlckdyb3VwKClcbiAgICB0aGlzLmNsdXN0ZXJMYXllci5hZGRMYXllcnMoXG4gICAgICB0aGlzLm1hcmtlcnMubWFwKChtKSA9PiB7XG4gICAgICAgIGNvbnN0IG1hcmtlciA9IG5ldyBNYXJrZXIobS5nZXRMYXRMbmcoKSwge1xuICAgICAgICAgIGljb246IHRoaXMuZ2V0TWFya2VySWNvbihtLmdldERhdGEoKSksXG4gICAgICAgIH0pXG4gICAgICAgIG1hcmtlci5zZXREYXRhKG0uZ2V0RGF0YSgpKVxuICAgICAgICBtYXJrZXIuYmluZFRvb2x0aXAoJycgKyBtYXJrZXIuZ2V0RGF0YSgpW3RoaXMub3B0aW9ucy50b29sdGlwQXR0cl0pXG4gICAgICAgIG1hcmtlci5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5tYXJrZXJDbGlja0hhbmRsZXIobWFya2VyKVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gbWFya2VyXG4gICAgICB9KVxuICAgIClcbiAgICByZXR1cm4gdGhpcy5jbHVzdGVyTGF5ZXJcbiAgfVxuXG4gIC8qKiDmuLLmn5PkuLrng63lipvlm74gKi9cbiAgcHJpdmF0ZSBjb25maWdIZWF0TGF5ZXIoKSB7XG4gICAgdGhpcy5tYXJrZXJzLmZvckVhY2goKG1hcmtlcikgPT4ge1xuICAgICAgY29uc3QgbGF0TG5nID0gbWFya2VyLmdldExhdExuZygpXG4gICAgICBsZXQgYWx0ID0gbWFya2VyLmdldERhdGEoKVt0aGlzLm9wdGlvbnMuaGVhdE9wdGlvbnMuZGltZW5zaW9uQXR0cl1cbiAgICAgIGlmICh0eXBlb2YgYWx0ICE9PSAnbnVtYmVyJykge1xuICAgICAgICBhbHQgPSB0aGlzLm9wdGlvbnMuaGVhdE9wdGlvbnMubWF4XG4gICAgICB9XG4gICAgICBtYXJrZXIuc2V0TGF0TG5nKEwubGF0TG5nKGxhdExuZy5sYXQsIGxhdExuZy5sbmcsIGFsdCkpXG4gICAgfSlcbiAgICB0aGlzLmhlYXRMYXllciA9IEwuaGVhdExheWVyKFxuICAgICAgdGhpcy5tYXJrZXJzLm1hcCgoaXQpID0+IGl0LmdldExhdExuZygpKSxcbiAgICAgIHRoaXMub3B0aW9ucy5oZWF0T3B0aW9uc1xuICAgIClcbiAgICByZXR1cm4gdGhpcy5oZWF0TGF5ZXJcbiAgfVxuXG4gIHByaXZhdGUgZ2V0TGFyZ2VyTWFya2VySWNvbihkYXRhOiBEYXRhTGlzdEl0ZW0pIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0TWFya2VySWNvbihkYXRhLCB0cnVlKVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRNYXJrZXJJY29uKGRhdGE6IERhdGFMaXN0SXRlbSkge1xuICAgIHJldHVybiB0aGlzLl9nZXRNYXJrZXJJY29uKGRhdGEsIGZhbHNlKVxuICB9XG5cbiAgLyoqIOiOt+WPluW9k+WJjSBtYXJrZXIg6ZyA6KaB5bGV56S655qEIGljb24gKi9cbiAgcHJpdmF0ZSBfZ2V0TWFya2VySWNvbihcbiAgICBkYXRhOiBEYXRhTGlzdEl0ZW0sXG4gICAgaXNMYXJnZXI6IGJvb2xlYW5cbiAgKTogTC5JY29uIHwgTC5EaXZJY29uIHtcbiAgICBsZXQgaWNvblNpemUgPSB0aGlzLm9wdGlvbnMuaWNvblNpemVcbiAgICBsZXQgaWNvbkFuY2hvciA9IHRoaXMub3B0aW9ucy5pY29uQW5jaG9yXG4gICAgaWNvblNpemUgPSBpc0xhcmdlciA/IFtpY29uU2l6ZVswXSAqIDEuNSwgaWNvblNpemVbMV0gKiAxLjVdIDogaWNvblNpemVcbiAgICBpY29uQW5jaG9yID0gaXNMYXJnZXJcbiAgICAgID8gW2ljb25BbmNob3JbMF0gKiAxLjUsIGljb25BbmNob3JbMV0gKiAxLjVdXG4gICAgICA6IGljb25BbmNob3JcblxuICAgIGNvbnN0IGljb25Db2xvciA9IHRoaXMub3B0aW9ucy5pY29uQ29sb3JcblxuICAgIHN3aXRjaCAodGhpcy5vcHRpb25zLmljb25UeXBlKSB7XG4gICAgICBjYXNlICdpbWFnZSc6IHtcbiAgICAgICAgcmV0dXJuIEwuaWNvbih7XG4gICAgICAgICAgaWNvblVybDogdGhpcy5vcHRpb25zLmljb25JbWFnZVVybCxcbiAgICAgICAgICBpY29uU2l6ZSxcbiAgICAgICAgICBpY29uQW5jaG9yLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgY2FzZSAnZm9udF9jbGFzcyc6XG4gICAgICBjYXNlICdzeW1ib2wnOlxuICAgICAgY2FzZSAndW5pY29kZSc6IHtcbiAgICAgICAgcmV0dXJuIEwuZGl2SWNvbih7XG4gICAgICAgICAgaHRtbDogdGhpcy5nZXRDdXN0b21JY29uSFRNTChkYXRhLCB7XG4gICAgICAgICAgICBpY29uU2l6ZSxcbiAgICAgICAgICAgIGljb25Db2xvcixcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBjbGFzc05hbWU6IGlzTGFyZ2VyID8gJ2xhcmdlLWRpdi1pY29uLW1hcmtlcicgOiAnJyxcbiAgICAgICAgICBpY29uU2l6ZSxcbiAgICAgICAgICBpY29uQW5jaG9yLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYOWbvuagh+exu+Wei+S4jeaUr+aMgVwiJHt0aGlzLm9wdGlvbnMuaWNvblR5cGV9XCJgKVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBwcml2YXRlIGdldEN1c3RvbUljb25IVE1MKFxuICAgIGRhdGE6IERhdGFMaXN0SXRlbSxcbiAgICBvcHRpb25zPzogSWNvblJlbmRlckZ1bmNPcHRpb25cbiAgKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLmljb25SZW5kZXJlcikge1xuICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMub3B0aW9ucywgb3B0aW9ucylcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuaWNvblJlbmRlcmVyKGRhdGEsIG9wdGlvbnMpXG4gICAgfVxuICAgIHN3aXRjaCAodGhpcy5vcHRpb25zLnJlbmRlclBvaW50Q29sb3JUeXBlKSB7XG4gICAgICBjYXNlICdzaW5nbGUnOiB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5vcHRpb25zLmljb25UeXBlKSB7XG4gICAgICAgICAgLy8g5L2/55SoIGNsYXNzXG4gICAgICAgICAgY2FzZSAnZm9udF9jbGFzcyc6IHtcbiAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAgIDxpIGNsYXNzPVwiJHt0aGlzLm9wdGlvbnMuaWNvbkNsYXNzfVwiXG4gICAgICAgICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiAke29wdGlvbnMuaWNvbkNvbG9yfTtcbiAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogJHtvcHRpb25zLmljb25TaXplWzBdfXB4O1xuICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8g5L2/55SoIHN2Z1xuICAgICAgICAgIGNhc2UgJ3N5bWJvbCc6IHtcbiAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAgIDxzdmcgY2xhc3M9XCJpY29uLXN5bWJvbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPlxuICAgICAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj1cIiR7dGhpcy5vcHRpb25zLmljb25TeW1ib2x9XCIgLz5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIOS9v+eUqCB1bmljb2RlXG4gICAgICAgICAgY2FzZSAndW5pY29kZSc6IHtcbiAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAgIDxpXG4gICAgICAgICAgICAgICAgY2xhc3M9XCIke3RoaXMub3B0aW9ucy5pY29uQ2xhc3N9XCJcbiAgICAgICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICAgICAgY29sb3I6ICR7b3B0aW9ucy5pY29uQ29sb3J9O1xuICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAke29wdGlvbnMuaWNvblNpemVbMF19cHg7XG4gICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgJHt0aGlzLm9wdGlvbnMuaWNvblVuaWNvZGV9XG4gICAgICAgICAgICAgIDwvaT5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3NlZ21lbnRlZCc6IHtcbiAgICAgICAgc3dpdGNoICh0aGlzLm9wdGlvbnMuaWNvblR5cGUpIHtcbiAgICAgICAgICAvLyDkvb/nlKggY2xhc3NcbiAgICAgICAgICBjYXNlICdmb250X2NsYXNzJzoge1xuICAgICAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICAgICAgPGlcbiAgICAgICAgICAgICAgICBjbGFzcz1cIiR7dGhpcy5vcHRpb25zLmljb25DbGFzc31cIlxuICAgICAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgICBjb2xvcjogJHt0aGlzLmdldFNlZ21lbnRlZE1hcmtlckNvbG9yKGRhdGEpfTtcbiAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogJHtvcHRpb25zLmljb25TaXplWzBdfXB4O1xuICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8g5L2/55SoIHN2Z1xuICAgICAgICAgIGNhc2UgJ3N5bWJvbCc6IHtcbiAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAgIDxzdmcgY2xhc3M9XCJpY29uLXN5bWJvbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPlxuICAgICAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj1cIiR7dGhpcy5vcHRpb25zLmljb25TeW1ib2x9XCIgLz5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIOS9v+eUqCB1bmljb2RlXG4gICAgICAgICAgY2FzZSAndW5pY29kZSc6IHtcbiAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAgIDxpXG4gICAgICAgICAgICAgICAgY2xhc3M9XCIke3RoaXMub3B0aW9ucy5pY29uQ2xhc3N9XCJcbiAgICAgICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICAgICAgY29sb3I6ICR7dGhpcy5nZXRTZWdtZW50ZWRNYXJrZXJDb2xvcihkYXRhKX07XG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6ICR7b3B0aW9ucy5pY29uU2l6ZVswXX1weDtcbiAgICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAke3RoaXMub3B0aW9ucy5pY29uVW5pY29kZX1cbiAgICAgICAgICAgICAgPC9pPlxuICAgICAgICAgICAgYFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYHJlbmRlclBvaW50Q29sb3JUeXBlIOS4jeaUr+aMgVwiJHt0aGlzLm9wdGlvbnMucmVuZGVyUG9pbnRDb2xvclR5cGV9XCJgXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcHJpdmF0ZSBjYWNoZVNlZ21lbnRQYXJhbXMoKSB7XG4gICAgY29uc3Qgc2VnbWVudGVkTGVuZ3RoID0gdGhpcy5vcHRpb25zLnNlZ21lbnRlZENvbG9ycy5sZW5ndGhcbiAgICBsZXQgbWF4VmFsID0gLUluZmluaXR5XG4gICAgbGV0IG1pblZhbCA9IEluZmluaXR5XG4gICAgZm9yIChjb25zdCBkYXRhIG9mIHRoaXMuZGF0YUxpc3QpIHtcbiAgICAgIGNvbnN0IHZhbCA9IGRhdGFbdGhpcy5vcHRpb25zLnNlZ21lbnRlZEF0dHJdXG4gICAgICBtYXhWYWwgPSBNYXRoLm1heChtYXhWYWwsIHZhbClcbiAgICAgIG1pblZhbCA9IE1hdGgubWluKG1pblZhbCwgdmFsKVxuICAgIH1cbiAgICBjb25zdCBzdGVwID0gKG1heFZhbCAtIG1pblZhbCArIDEpIC8gc2VnbWVudGVkTGVuZ3RoXG4gICAgdGhpcy5zZWdtZW50ZWRNaW4gPSBtaW5WYWxcbiAgICB0aGlzLnNlZ21lbnRlZFN0ZXAgPSBzdGVwXG4gIH1cbiAgcHJpdmF0ZSBnZXRTZWdtZW50ZWRNYXJrZXJDb2xvcihkYXRhOiBEYXRhTGlzdEl0ZW0pOiBzdHJpbmcge1xuICAgIGNvbnN0IHZhbCA9IGRhdGFbdGhpcy5vcHRpb25zLnNlZ21lbnRlZEF0dHJdXG4gICAgY29uc3QgY29sb3IgPSB0aGlzLm9wdGlvbnMuc2VnbWVudGVkQ29sb3JzW1xuICAgICAgKHZhbCAtIHRoaXMuc2VnbWVudGVkTWluKSAvIHRoaXMuc2VnbWVudGVkU3RlcFxuICAgIF1cbiAgICByZXR1cm4gY29sb3JcbiAgfVxuICBwcml2YXRlIGdldFBvcHVwQ29udGVudChkYXRhOiBEYXRhTGlzdEl0ZW0pIHtcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5wb3B1cEF0dHIpIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICByZXR1cm4gYCR7dGhpcy5vcHRpb25zLnBvcHVwQXR0cn06ICR7ZGF0YVt0aGlzLm9wdGlvbnMucG9wdXBBdHRyXX1gXG4gIH1cbn1cbiIsImltcG9ydCB7IERhdGFMaXN0SXRlbSwgQ2hhbm5lbEZ1bmMgfSBmcm9tICcuLi9kZWZpbml0aW9ucydcbmltcG9ydCBNYXJrZXJzTGF5ZXIsIHsgTWFya2Vyc0xheWVyT3B0aW9ucyB9IGZyb20gJy4vTWFya2Vyc0xheWVyJ1xuaW50ZXJmYWNlIE1hcmtlcnNCdWZmZXJMYXllck9wdGlvbnMgZXh0ZW5kcyBNYXJrZXJzTGF5ZXJPcHRpb25zIHtcbiAgYnVmZmVyT3B0aW9uczogTC5DaXJjbGVNYXJrZXJPcHRpb25zXG59XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXJrZXJzQnVmZmVyTGF5ZXIgZXh0ZW5kcyBNYXJrZXJzTGF5ZXIge1xuICBwdWJsaWMgb3B0aW9uczogTWFya2Vyc0J1ZmZlckxheWVyT3B0aW9uc1xuICBwcml2YXRlIGJ1ZmZlckxheWVyOiBMLkxheWVyR3JvdXBcbiAgY29uc3RydWN0b3IoXG4gICAgbWFwOiBMLk1hcCxcbiAgICBkYXRhTGlzdDogRGF0YUxpc3RJdGVtW10sXG4gICAgb3B0aW9uczogTWFya2Vyc0J1ZmZlckxheWVyT3B0aW9ucyxcbiAgICBjaGFubmVsRnVuYzogQ2hhbm5lbEZ1bmNcbiAgKSB7XG4gICAgc3VwZXIobWFwLCBkYXRhTGlzdCwgb3B0aW9ucywgY2hhbm5lbEZ1bmMpXG4gICAgY29uc3QgZGVmYXVsdEJ1ZmZlck9wdGlvbnM6IEwuQ2lyY2xlTWFya2VyT3B0aW9ucyA9IHtcbiAgICAgIHJhZGl1czogMTAwMCxcbiAgICAgIHN0cm9rZTogZmFsc2UsXG4gICAgfVxuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oXG4gICAgICB0aGlzLm9wdGlvbnMsXG4gICAgICB7IGJ1ZmZlck9wdGlvbnM6IGRlZmF1bHRCdWZmZXJPcHRpb25zIH0sXG4gICAgICBvcHRpb25zXG4gICAgKVxuICB9XG5cbiAgcHVibGljIGRyYXcob3B0aW9ucz86IE1hcmtlcnNCdWZmZXJMYXllck9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucylcbiAgICByZXR1cm4gdGhpcy5yZWRyYXcoKVxuICB9XG5cbiAgcHVibGljIHJlZHJhdygpIHtcbiAgICBpZiAodGhpcy5tYXJrZXJMYXllcikge1xuICAgICAgdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcy5tYXJrZXJMYXllcilcbiAgICB9XG4gICAgaWYgKHRoaXMuYnVmZmVyTGF5ZXIpIHtcbiAgICAgIHRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMuYnVmZmVyTGF5ZXIpXG4gICAgfVxuICAgIHRoaXMubWFya2VyTGF5ZXIgPSB0aGlzLmNvbmZpZ01hcmtlckxheWVyKClcbiAgICB0aGlzLmJ1ZmZlckxheWVyID0gdGhpcy5jb25maWdCdWZmZXJMYXllcigpXG4gICAgdGhpcy5tYXAuYWRkTGF5ZXIodGhpcy5tYXJrZXJMYXllcilcbiAgICB0aGlzLm1hcC5hZGRMYXllcih0aGlzLmJ1ZmZlckxheWVyKVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBwcml2YXRlIGNvbmZpZ0J1ZmZlckxheWVyKCkge1xuICAgIGNvbnN0IGdyb3VwTGF5ZXIgPSBMLmxheWVyR3JvdXAoKVxuICAgIHRoaXMubWFya2Vycy5mb3JFYWNoKChtYXJrZXIpID0+IHtcbiAgICAgIGNvbnN0IGNpcmNsZUxheWVyID0gTC5jaXJjbGUoXG4gICAgICAgIG1hcmtlci5nZXRMYXRMbmcoKSxcbiAgICAgICAgdGhpcy5vcHRpb25zLmJ1ZmZlck9wdGlvbnNcbiAgICAgIClcbiAgICAgIGdyb3VwTGF5ZXIuYWRkTGF5ZXIoY2lyY2xlTGF5ZXIpXG4gICAgfSlcbiAgICByZXR1cm4gZ3JvdXBMYXllclxuICB9XG59XG4iLCJpbXBvcnQgeyBEYXRhTGlzdEl0ZW0gfSBmcm9tICcuLi9kZWZpbml0aW9ucydcblxuZXhwb3J0IHR5cGUgUG9seWxpbmVPcHRpb25zID0gTC5MYXRMbmdFeHByZXNzaW9uW10gfCBMLkxhdExuZ0V4cHJlc3Npb25bXVtdXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb2x5bGluZSBleHRlbmRzIEwuUG9seWxpbmUge1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6dmFyaWFibGUtbmFtZVxuICBwcml2YXRlIF9fZGF0YTogRGF0YUxpc3RJdGVtXG4gIGNvbnN0cnVjdG9yKGxhdGxuZ3M6IFBvbHlsaW5lT3B0aW9ucywgb3B0aW9ucz86IEwuUG9seWxpbmVPcHRpb25zKSB7XG4gICAgc3VwZXIobGF0bG5ncywgb3B0aW9ucylcbiAgfVxuICBwdWJsaWMgc2V0RGF0YShkYXRhOiBEYXRhTGlzdEl0ZW0pIHtcbiAgICB0aGlzLl9fZGF0YSA9IGRhdGFcbiAgfVxuICBwdWJsaWMgZ2V0RGF0YSgpIHtcbiAgICByZXR1cm4gdGhpcy5fX2RhdGFcbiAgfVxufVxuIiwiaW1wb3J0IHsgRGF0YUxpc3RJdGVtLCBDaGFubmVsRnVuYyB9IGZyb20gJy4uL2RlZmluaXRpb25zJ1xuaW1wb3J0IFBvbHlsaW5lLCB7IFBvbHlsaW5lT3B0aW9ucyB9IGZyb20gJy4vUG9seWxpbmUnXG5cbi8qKiDmuLLmn5PpopzoibLmoLflvI8g5Y2V6ImyfOWIhuautSAqL1xudHlwZSBQb2x5bGluZUxheWVyUmVuZGVyQ29sb3JUeXBlID0gJ3NpbmdsZScgfCAnc2VnbWVudGVkJ1xuaW50ZXJmYWNlIFBvbHlsaW5lTGF5ZXJPcHRpb25zIGV4dGVuZHMgTC5Qb2x5bGluZU9wdGlvbnMge1xuICByZW5kZXJQb2x5bGluZUNvbG9yVHlwZTogUG9seWxpbmVMYXllclJlbmRlckNvbG9yVHlwZVxuXG4gIC8qKiBwb3B1cCDlsZXnpLrlrZfmrrUgKi9cbiAgcG9wdXBBdHRyPzogc3RyaW5nXG4gIC8qKiB0b29sdGlwIOWxleekuuWtl+autSAqL1xuICB0b29sdGlwQXR0cj86IHN0cmluZ1xuXG4gIG9wYWNpdHk/OiBudW1iZXJcblxuICAvKiog5YiG5q615riy5p+T57uf6K6h5a2X5q61ICovXG4gIHNlZ21lbnRlZEF0dHI/OiBzdHJpbmdcbiAgc2VnbWVudGVkQ29sb3JzPzogc3RyaW5nW11cbn1cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvbHlsaW5lc0xheWVyIHtcbiAgcHJpdmF0ZSBtYXA6IEwuTWFwXG4gIHByaXZhdGUgZGF0YUxpc3Q6IERhdGFMaXN0SXRlbVtdXG4gIHByaXZhdGUgb3B0aW9uczogUG9seWxpbmVMYXllck9wdGlvbnNcbiAgcHJpdmF0ZSBjaGFubmVsRnVuYzogQ2hhbm5lbEZ1bmNcbiAgcHJpdmF0ZSBwb2x5bGluZXM6IFBvbHlsaW5lW11cbiAgcHJpdmF0ZSBzZWdtZW50ZWRNaW46IG51bWJlclxuICBwcml2YXRlIHNlZ21lbnRlZFN0ZXA6IG51bWJlclxuICAvLyBwcml2YXRlIGZvY3VzZWRQb2x5bGluZTogUG9seWxpbmVcbiAgcHJpdmF0ZSBsYXllcjogTC5MYXllckdyb3VwXG4gIHByaXZhdGUgcG9seWxpbmVMYXllcjogTC5MYXllckdyb3VwXG4gIGNvbnN0cnVjdG9yKFxuICAgIG1hcDogTC5NYXAsXG4gICAgZGF0YUxpc3Q6IERhdGFMaXN0SXRlbVtdLFxuICAgIG9wdGlvbnM6IFBvbHlsaW5lTGF5ZXJPcHRpb25zLFxuICAgIGNoYW5uZWxGdW5jOiBDaGFubmVsRnVuY1xuICApIHtcbiAgICBjb25zdCBkZWZhdWx0T3B0aW9uczogUG9seWxpbmVMYXllck9wdGlvbnMgPSB7XG4gICAgICByZW5kZXJQb2x5bGluZUNvbG9yVHlwZTogJ3NpbmdsZScsXG4gICAgfVxuICAgIHRoaXMubWFwID0gbWFwXG4gICAgdGhpcy5kYXRhTGlzdCA9IGRhdGFMaXN0XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9uc1xuICAgIHRoaXMuY2hhbm5lbEZ1bmMgPSBjaGFubmVsRnVuY1xuXG4gICAgdGhpcy5zZWdtZW50ZWRNaW4gPSBJbmZpbml0eVxuICAgIHRoaXMuc2VnbWVudGVkU3RlcCA9IDFcbiAgICAvLyB0aGlzLmZvY3VzZWRQb2x5bGluZSA9IG51bGxcblxuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKVxuXG4gICAgLy8g57yT5a2YIHNlZ21lbnQg55u45YWz5pWw5o2uXG4gICAgdGhpcy5jYWNoZVNlZ21lbnRQYXJhbXMoKVxuICAgIHRoaXMuaW5pdFBvbHlsaW5lcygpXG4gIH1cbiAgcHVibGljIGRyYXcob3B0aW9ucz86IFBvbHlsaW5lTGF5ZXJPcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXG4gICAgcmV0dXJuIHRoaXMucmVkcmF3KClcbiAgfVxuICBwdWJsaWMgcmVkcmF3KCkge1xuICAgIGlmICh0aGlzLmxheWVyKSB7XG4gICAgICB0aGlzLm1hcC5yZW1vdmVMYXllcih0aGlzLmxheWVyKVxuICAgIH1cbiAgICB0aGlzLmxheWVyID0gdGhpcy5jb25maWdQb2x5bGluZUxheWVyKClcbiAgICB0aGlzLm1hcC5hZGRMYXllcih0aGlzLmxheWVyKVxuICAgIHJldHVybiB0aGlzXG4gIH1cbiAgcHJpdmF0ZSBpbml0UG9seWxpbmVzKCkge1xuICAgIHRoaXMuZGF0YUxpc3QuZm9yRWFjaCgoZGF0YSkgPT4ge1xuICAgICAgdGhpcy5jYWNoZVNlZ21lbnRQYXJhbXMoKVxuXG4gICAgICBjb25zdCBsYXllciA9IEwuZ2VvSlNPTihkYXRhLmdlb21ldHJ5KS5nZXRMYXllcnMoKVswXVxuICAgICAgY29uc3QgcG9seWxpbmUgPSBuZXcgUG9seWxpbmUoXG4gICAgICAgIChsYXllciBhcyBMLlBvbHlsaW5lKS5nZXRMYXRMbmdzKCkgYXMgUG9seWxpbmVPcHRpb25zXG4gICAgICApXG5cbiAgICAgIC8vIOWwhuebuOWFs+WAvOe7keWumuWIsCBtYXJrZXLkuIpcbiAgICAgIHBvbHlsaW5lLnNldERhdGEoZGF0YSlcblxuICAgICAgdGhpcy5wb2x5bGluZXMucHVzaChwb2x5bGluZSlcbiAgICB9KVxuICB9XG4gIHByaXZhdGUgY29uZmlnUG9seWxpbmVMYXllcigpIHtcbiAgICB0aGlzLnBvbHlsaW5lTGF5ZXIgPSBMLmxheWVyR3JvdXAoKVxuICAgIHRoaXMucG9seWxpbmVzLmZvckVhY2goKHBvbHlsaW5lKSA9PiB7XG4gICAgICBwb2x5bGluZS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMucG9seWxpbmVDbGlja0hhbmRsZXIocG9seWxpbmUpXG4gICAgICB9KVxuICAgICAgY29uc3Qgb3B0aW9uczogTC5Qb2x5bGluZU9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLm9wdGlvbnMsIHtcbiAgICAgICAgY29sb3I6IHRoaXMuZ2V0U2VnbWVudGVkUG9seWxpbmVDb2xvcihwb2x5bGluZS5nZXREYXRhKCkpLFxuICAgICAgfSlcbiAgICAgIGNvbnN0IG5ld1BvbHlsaW5lID0gbmV3IFBvbHlsaW5lKFxuICAgICAgICBwb2x5bGluZS5nZXRMYXRMbmdzKCkgYXMgUG9seWxpbmVPcHRpb25zLFxuICAgICAgICBvcHRpb25zXG4gICAgICApXG4gICAgICB0aGlzLnBvbHlsaW5lTGF5ZXIuYWRkTGF5ZXIobmV3UG9seWxpbmUpXG4gICAgfSlcbiAgICByZXR1cm4gdGhpcy5wb2x5bGluZUxheWVyXG4gIH1cbiAgcHJpdmF0ZSBwb2x5bGluZUNsaWNrSGFuZGxlcihwb2x5bGluZTogUG9seWxpbmUpIHtcbiAgICAvLyB0aGlzLmZvY3VzZWRQb2x5bGluZSA9IHBvbHlsaW5lXG4gICAgdGhpcy5jaGFubmVsRnVuYygnb24tY2xpY2stcG9seWxpbmUnLCBwb2x5bGluZSlcbiAgfVxuICBwcml2YXRlIGNhY2hlU2VnbWVudFBhcmFtcygpIHtcbiAgICBjb25zdCBzZWdtZW50ZWRMZW5ndGggPSB0aGlzLm9wdGlvbnMuc2VnbWVudGVkQ29sb3JzLmxlbmd0aFxuICAgIGxldCBtYXhWYWwgPSAtSW5maW5pdHlcbiAgICBsZXQgbWluVmFsID0gSW5maW5pdHlcbiAgICBmb3IgKGNvbnN0IGRhdGEgb2YgdGhpcy5kYXRhTGlzdCkge1xuICAgICAgY29uc3QgdmFsID0gZGF0YVt0aGlzLm9wdGlvbnMuc2VnbWVudGVkQXR0cl1cbiAgICAgIG1heFZhbCA9IE1hdGgubWF4KG1heFZhbCwgdmFsKVxuICAgICAgbWluVmFsID0gTWF0aC5taW4obWluVmFsLCB2YWwpXG4gICAgfVxuICAgIGNvbnN0IHN0ZXAgPSAobWF4VmFsIC0gbWluVmFsICsgMSkgLyBzZWdtZW50ZWRMZW5ndGhcbiAgICB0aGlzLnNlZ21lbnRlZE1pbiA9IG1pblZhbFxuICAgIHRoaXMuc2VnbWVudGVkU3RlcCA9IHN0ZXBcbiAgfVxuICBwcml2YXRlIGdldFNlZ21lbnRlZFBvbHlsaW5lQ29sb3IoZGF0YTogRGF0YUxpc3RJdGVtKTogc3RyaW5nIHtcbiAgICBjb25zdCB2YWwgPSBkYXRhW3RoaXMub3B0aW9ucy5zZWdtZW50ZWRBdHRyXVxuICAgIGNvbnN0IGNvbG9yID0gdGhpcy5vcHRpb25zLnNlZ21lbnRlZENvbG9yc1tcbiAgICAgICh2YWwgLSB0aGlzLnNlZ21lbnRlZE1pbikgLyB0aGlzLnNlZ21lbnRlZFN0ZXBcbiAgICBdXG4gICAgcmV0dXJuIGNvbG9yXG4gIH1cbn1cbiIsImltcG9ydCB7IERhdGFMaXN0SXRlbSB9IGZyb20gJy4uL2RlZmluaXRpb25zJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb2x5Z29uIGV4dGVuZHMgTC5Qb2x5Z29uIHtcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnZhcmlhYmxlLW5hbWVcbiAgcHJpdmF0ZSBfX2RhdGE6IERhdGFMaXN0SXRlbVxuICBjb25zdHJ1Y3RvcihcbiAgICBsYXRsbmdzOlxuICAgICAgfCBMLkxhdExuZ0V4cHJlc3Npb25bXVxuICAgICAgfCBMLkxhdExuZ0V4cHJlc3Npb25bXVtdXG4gICAgICB8IEwuTGF0TG5nRXhwcmVzc2lvbltdW11bXSxcbiAgICBvcHRpb25zPzogTC5Qb2x5bGluZU9wdGlvbnNcbiAgKSB7XG4gICAgc3VwZXIobGF0bG5ncywgb3B0aW9ucylcbiAgfVxuICBwdWJsaWMgc2V0RGF0YShkYXRhOiBEYXRhTGlzdEl0ZW0pIHtcbiAgICB0aGlzLl9fZGF0YSA9IGRhdGFcbiAgfVxuICBwdWJsaWMgZ2V0RGF0YSgpIHtcbiAgICByZXR1cm4gdGhpcy5fX2RhdGFcbiAgfVxufVxuIiwiaW1wb3J0IHsgRGF0YUxpc3RJdGVtLCBDaGFubmVsRnVuYyB9IGZyb20gJy4uL2RlZmluaXRpb25zJ1xuaW1wb3J0IFBvbHlnb24gZnJvbSAnLi9Qb2x5Z29uJ1xuXG4vKiog5riy5p+T6aKc6Imy5qC35byPIOWNleiJsnzliIbmrrUgKi9cbnR5cGUgUG9seWdvbkxheWVyUmVuZGVyQ29sb3JUeXBlID0gJ3NpbmdsZScgfCAnc2VnbWVudGVkJ1xuaW50ZXJmYWNlIFBvbHlnb25MYXllck9wdGlvbnMgZXh0ZW5kcyBMLlBvbHlsaW5lT3B0aW9ucyB7XG4gIHJlbmRlclBvbHlnb25Db2xvclR5cGU6IFBvbHlnb25MYXllclJlbmRlckNvbG9yVHlwZVxuXG4gIC8qKiBwb3B1cCDlsZXnpLrlrZfmrrUgKi9cbiAgcG9wdXBBdHRyPzogc3RyaW5nXG4gIC8qKiB0b29sdGlwIOWxleekuuWtl+autSAqL1xuICB0b29sdGlwQXR0cj86IHN0cmluZ1xuXG4gIG9wYWNpdHk/OiBudW1iZXJcblxuICAvKiog5YiG5q615riy5p+T57uf6K6h5a2X5q61ICovXG4gIHNlZ21lbnRlZEF0dHI/OiBzdHJpbmdcbiAgc2VnbWVudGVkQ29sb3JzPzogc3RyaW5nW11cbn1cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvbHlnb25zTGF5ZXIge1xuICBwcml2YXRlIG1hcDogTC5NYXBcbiAgcHJpdmF0ZSBkYXRhTGlzdDogRGF0YUxpc3RJdGVtW11cbiAgcHJpdmF0ZSBvcHRpb25zOiBQb2x5Z29uTGF5ZXJPcHRpb25zXG4gIHByaXZhdGUgY2hhbm5lbEZ1bmM6IENoYW5uZWxGdW5jXG4gIHByaXZhdGUgcG9seWdvbnM6IFBvbHlnb25bXVxuICBwcml2YXRlIHNlZ21lbnRlZE1pbjogbnVtYmVyXG4gIHByaXZhdGUgc2VnbWVudGVkU3RlcDogbnVtYmVyXG4gIC8vIHByaXZhdGUgZm9jdXNlZFBvbHlnb246IFBvbHlnb25cbiAgcHJpdmF0ZSBsYXllcjogTC5MYXllckdyb3VwXG4gIHByaXZhdGUgcG9seWdvbkxheWVyOiBMLkxheWVyR3JvdXBcbiAgY29uc3RydWN0b3IoXG4gICAgbWFwOiBMLk1hcCxcbiAgICBkYXRhTGlzdDogRGF0YUxpc3RJdGVtW10sXG4gICAgb3B0aW9uczogUG9seWdvbkxheWVyT3B0aW9ucyxcbiAgICBjaGFubmVsRnVuYzogQ2hhbm5lbEZ1bmNcbiAgKSB7XG4gICAgY29uc3QgZGVmYXVsdE9wdGlvbnM6IFBvbHlnb25MYXllck9wdGlvbnMgPSB7XG4gICAgICByZW5kZXJQb2x5Z29uQ29sb3JUeXBlOiAnc2luZ2xlJyxcbiAgICB9XG4gICAgdGhpcy5tYXAgPSBtYXBcbiAgICB0aGlzLmRhdGFMaXN0ID0gZGF0YUxpc3RcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgdGhpcy5jaGFubmVsRnVuYyA9IGNoYW5uZWxGdW5jXG5cbiAgICB0aGlzLnNlZ21lbnRlZE1pbiA9IEluZmluaXR5XG4gICAgdGhpcy5zZWdtZW50ZWRTdGVwID0gMVxuICAgIC8vIHRoaXMuZm9jdXNlZFBvbHlnb24gPSBudWxsXG5cbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucywgb3B0aW9ucylcblxuICAgIC8vIOe8k+WtmCBzZWdtZW50IOebuOWFs+aVsOaNrlxuICAgIHRoaXMuY2FjaGVTZWdtZW50UGFyYW1zKClcbiAgICB0aGlzLmluaXRQb2x5Z29ucygpXG4gIH1cbiAgcHVibGljIGRyYXcob3B0aW9ucz86IFBvbHlnb25MYXllck9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucylcbiAgICByZXR1cm4gdGhpcy5yZWRyYXcoKVxuICB9XG4gIHB1YmxpYyByZWRyYXcoKSB7XG4gICAgaWYgKHRoaXMubGF5ZXIpIHtcbiAgICAgIHRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMubGF5ZXIpXG4gICAgfVxuICAgIHRoaXMubGF5ZXIgPSB0aGlzLmNvbmZpZ1BvbHlnb25MYXllcigpXG4gICAgdGhpcy5tYXAuYWRkTGF5ZXIodGhpcy5sYXllcilcbiAgICByZXR1cm4gdGhpc1xuICB9XG4gIHByaXZhdGUgaW5pdFBvbHlnb25zKCkge1xuICAgIHRoaXMuZGF0YUxpc3QuZm9yRWFjaCgoZGF0YSkgPT4ge1xuICAgICAgdGhpcy5jYWNoZVNlZ21lbnRQYXJhbXMoKVxuXG4gICAgICBjb25zdCBsYXllciA9IEwuZ2VvSlNPTihkYXRhLmdlb21ldHJ5KS5nZXRMYXllcnMoKVswXVxuICAgICAgY29uc3QgcG9seWdvbiA9IG5ldyBQb2x5Z29uKChsYXllciBhcyBMLlBvbHlnb24pLmdldExhdExuZ3MoKSlcblxuICAgICAgLy8g5bCG55u45YWz5YC857uR5a6a5YiwIG1hcmtlcuS4ilxuICAgICAgcG9seWdvbi5zZXREYXRhKGRhdGEpXG5cbiAgICAgIHRoaXMucG9seWdvbnMucHVzaChwb2x5Z29uKVxuICAgIH0pXG4gIH1cbiAgcHJpdmF0ZSBjb25maWdQb2x5Z29uTGF5ZXIoKSB7XG4gICAgdGhpcy5wb2x5Z29uTGF5ZXIgPSBMLmxheWVyR3JvdXAoKVxuICAgIHRoaXMucG9seWdvbnMuZm9yRWFjaCgocG9seWdvbikgPT4ge1xuICAgICAgcG9seWdvbi5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMucG9seWdvbkNsaWNrSGFuZGxlcihwb2x5Z29uKVxuICAgICAgfSlcbiAgICAgIGNvbnN0IG9wdGlvbnM6IEwuUG9seWxpbmVPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcHRpb25zLCB7XG4gICAgICAgIGNvbG9yOiB0aGlzLmdldFNlZ21lbnRlZFBvbHlnb25Db2xvcihwb2x5Z29uLmdldERhdGEoKSksXG4gICAgICB9KVxuICAgICAgY29uc3QgbmV3UG9seWdvbiA9IG5ldyBQb2x5Z29uKHBvbHlnb24uZ2V0TGF0TG5ncygpLCBvcHRpb25zKVxuICAgICAgdGhpcy5wb2x5Z29uTGF5ZXIuYWRkTGF5ZXIobmV3UG9seWdvbilcbiAgICB9KVxuICAgIHJldHVybiB0aGlzLnBvbHlnb25MYXllclxuICB9XG4gIHByaXZhdGUgcG9seWdvbkNsaWNrSGFuZGxlcihwb2x5Z29uOiBQb2x5Z29uKSB7XG4gICAgLy8gdGhpcy5mb2N1c2VkUG9seWdvbiA9IHBvbHlnb25cbiAgICB0aGlzLmNoYW5uZWxGdW5jKCdvbi1jbGljay1wb2x5Z29uJywgcG9seWdvbilcbiAgfVxuICBwcml2YXRlIGNhY2hlU2VnbWVudFBhcmFtcygpIHtcbiAgICBjb25zdCBzZWdtZW50ZWRMZW5ndGggPSB0aGlzLm9wdGlvbnMuc2VnbWVudGVkQ29sb3JzLmxlbmd0aFxuICAgIGxldCBtYXhWYWwgPSAtSW5maW5pdHlcbiAgICBsZXQgbWluVmFsID0gSW5maW5pdHlcbiAgICBmb3IgKGNvbnN0IGRhdGEgb2YgdGhpcy5kYXRhTGlzdCkge1xuICAgICAgY29uc3QgdmFsID0gZGF0YVt0aGlzLm9wdGlvbnMuc2VnbWVudGVkQXR0cl1cbiAgICAgIG1heFZhbCA9IE1hdGgubWF4KG1heFZhbCwgdmFsKVxuICAgICAgbWluVmFsID0gTWF0aC5taW4obWluVmFsLCB2YWwpXG4gICAgfVxuICAgIGNvbnN0IHN0ZXAgPSAobWF4VmFsIC0gbWluVmFsICsgMSkgLyBzZWdtZW50ZWRMZW5ndGhcbiAgICB0aGlzLnNlZ21lbnRlZE1pbiA9IG1pblZhbFxuICAgIHRoaXMuc2VnbWVudGVkU3RlcCA9IHN0ZXBcbiAgfVxuICBwcml2YXRlIGdldFNlZ21lbnRlZFBvbHlnb25Db2xvcihkYXRhOiBEYXRhTGlzdEl0ZW0pOiBzdHJpbmcge1xuICAgIGNvbnN0IHZhbCA9IGRhdGFbdGhpcy5vcHRpb25zLnNlZ21lbnRlZEF0dHJdXG4gICAgY29uc3QgY29sb3IgPSB0aGlzLm9wdGlvbnMuc2VnbWVudGVkQ29sb3JzW1xuICAgICAgKHZhbCAtIHRoaXMuc2VnbWVudGVkTWluKSAvIHRoaXMuc2VnbWVudGVkU3RlcFxuICAgIF1cbiAgICByZXR1cm4gY29sb3JcbiAgfVxufVxuIiwiaW1wb3J0IE1hcmtlciBmcm9tICcuL21hcmtlci9NYXJrZXInXG5pbXBvcnQgTWFya2Vyc0xheWVyIGZyb20gJy4vbWFya2VyL01hcmtlcnNMYXllcidcbmltcG9ydCBNYXJrZXJzQnVmZmVyTGF5ZXIgZnJvbSAnLi9tYXJrZXIvTWFya2Vyc0J1ZmZlckxheWVyJ1xuaW1wb3J0IFBvbHlsaW5lIGZyb20gJy4vcG9seWxpbmUvUG9seWxpbmUnXG5pbXBvcnQgUG9seWxpbmVzTGF5ZXIgZnJvbSAnLi9wb2x5bGluZS9Qb2x5bGluZXNMYXllcidcbmltcG9ydCBQb2x5Z29uIGZyb20gJy4vcG9seWdvbi9Qb2x5Z29uJ1xuaW1wb3J0IFBvbHlnb25zTGF5ZXIgZnJvbSAnLi9wb2x5Z29uL1BvbHlnb25zTGF5ZXInXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgTWFya2VyLFxuICBNYXJrZXJzTGF5ZXIsXG4gIE1hcmtlcnNCdWZmZXJMYXllcixcbiAgUG9seWxpbmUsXG4gIFBvbHlsaW5lc0xheWVyLFxuICBQb2x5Z29uLFxuICBQb2x5Z29uc0xheWVyLFxufVxuZXhwb3J0IHtcbiAgTWFya2VyLFxuICBNYXJrZXJzTGF5ZXIsXG4gIE1hcmtlcnNCdWZmZXJMYXllcixcbiAgUG9seWxpbmUsXG4gIFBvbHlsaW5lc0xheWVyLFxuICBQb2x5Z29uLFxuICBQb2x5Z29uc0xheWVyLFxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==